"use strict";const Ae=require("electron"),Ie=require("path"),cc=require("better-sqlite3"),ut=require("fs"),fc=require("constants"),dr=require("stream"),Br=require("util"),xl=require("assert"),hr=require("child_process"),Ul=require("events"),pr=require("crypto"),ea=require("tty"),Hr=require("os"),Ut=require("url"),dc=require("string_decoder"),kl=require("zlib"),hc=require("http"),pc=require("net");function mc(e){const l=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const d in e)if(d!=="default"){const c=Object.getOwnPropertyDescriptor(e,d);Object.defineProperty(l,d,c.get?c:{enumerable:!0,get:()=>e[d]})}}return l.default=e,Object.freeze(l)}const Ra=mc(Ie),gc=()=>{const e=Ae.app.getPath("userData");return Ie.join(e,"sticky-notes.db")},vc=[{version:1,name:"initial_schema",up:e=>{e.exec(`
        CREATE TABLE IF NOT EXISTS workspaces (
          id TEXT PRIMARY KEY,
          name TEXT NOT NULL,
          layout TEXT NOT NULL,
          createdAt INTEGER NOT NULL,
          updatedAt INTEGER NOT NULL
        )
      `),e.exec(`
        CREATE TABLE IF NOT EXISTS notes (
          id TEXT PRIMARY KEY,
          workspaceId TEXT NOT NULL,
          panelId TEXT,
          title TEXT NOT NULL DEFAULT 'Untitled',
          content TEXT NOT NULL DEFAULT '',
          createdAt INTEGER NOT NULL,
          updatedAt INTEGER NOT NULL,
          FOREIGN KEY (workspaceId) REFERENCES workspaces(id) ON DELETE CASCADE
        )
      `),e.exec(`
        CREATE TABLE IF NOT EXISTS _migrations (
          version INTEGER PRIMARY KEY,
          name TEXT NOT NULL,
          appliedAt INTEGER NOT NULL
        )
      `)}}];class Ec{db=null;initialize(){const l=gc();console.log("[Database] Initializing at:",l),this.db=new cc(l),this.db.pragma("journal_mode = WAL"),this.db.pragma("foreign_keys = ON"),this.runMigrations()}runMigrations(){if(!this.db)throw new Error("Database not initialized");this.db.exec(`
      CREATE TABLE IF NOT EXISTS _migrations (
        version INTEGER PRIMARY KEY,
        name TEXT NOT NULL,
        appliedAt INTEGER NOT NULL
      )
    `);const l=new Set(this.db.prepare("SELECT version FROM _migrations").all().map(d=>d.version));for(const d of vc)l.has(d.version)||(console.log(`[Database] Running migration ${d.version}: ${d.name}`),this.db.transaction(()=>{d.up(this.db),this.db.prepare("INSERT INTO _migrations (version, name, appliedAt) VALUES (?, ?, ?)").run(d.version,d.name,Date.now())})(),console.log(`[Database] Migration ${d.version} complete`))}close(){this.db&&(this.db.close(),this.db=null)}getAllWorkspaces(){if(!this.db)throw new Error("Database not initialized");return this.db.prepare("SELECT * FROM workspaces ORDER BY createdAt ASC").all().map(d=>({...d,layout:JSON.parse(d.layout)}))}getWorkspace(l){if(!this.db)throw new Error("Database not initialized");const d=this.db.prepare("SELECT * FROM workspaces WHERE id = ?").get(l);return d?{...d,layout:JSON.parse(d.layout)}:null}createWorkspace(l){if(!this.db)throw new Error("Database not initialized");this.db.prepare("INSERT INTO workspaces (id, name, layout, createdAt, updatedAt) VALUES (?, ?, ?, ?, ?)").run(l.id,l.name,JSON.stringify(l.layout),l.createdAt,l.updatedAt)}updateWorkspace(l,d){if(!this.db)throw new Error("Database not initialized");const c=["updatedAt = ?"],f=[Date.now()];d.name!==void 0&&(c.push("name = ?"),f.push(d.name)),d.layout!==void 0&&(c.push("layout = ?"),f.push(JSON.stringify(d.layout))),f.push(l),this.db.prepare(`UPDATE workspaces SET ${c.join(", ")} WHERE id = ?`).run(...f)}deleteWorkspace(l){if(!this.db)throw new Error("Database not initialized");this.db.prepare("DELETE FROM workspaces WHERE id = ?").run(l)}getNotesForWorkspace(l){if(!this.db)throw new Error("Database not initialized");return this.db.prepare("SELECT * FROM notes WHERE workspaceId = ? ORDER BY createdAt ASC").all(l)}createNote(l){if(!this.db)throw new Error("Database not initialized");this.db.prepare("INSERT INTO notes (id, workspaceId, panelId, title, content, createdAt, updatedAt) VALUES (?, ?, ?, ?, ?, ?, ?)").run(l.id,l.workspaceId,l.panelId,l.title,l.content,l.createdAt,l.updatedAt)}updateNote(l,d){if(!this.db)throw new Error("Database not initialized");const c=["updatedAt = ?"],f=[Date.now()];d.panelId!==void 0&&(c.push("panelId = ?"),f.push(d.panelId)),d.title!==void 0&&(c.push("title = ?"),f.push(d.title)),d.content!==void 0&&(c.push("content = ?"),f.push(d.content)),f.push(l),this.db.prepare(`UPDATE notes SET ${c.join(", ")} WHERE id = ?`).run(...f)}deleteNote(l){if(!this.db)throw new Error("Database not initialized");this.db.prepare("DELETE FROM notes WHERE id = ?").run(l)}}const Ke=new Ec;var tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var St={},Qr={},Tr={},Ca;function Ve(){return Ca||(Ca=1,Tr.fromCallback=function(e){return Object.defineProperty(function(...l){if(typeof l[l.length-1]=="function")e.apply(this,l);else return new Promise((d,c)=>{l.push((f,u)=>f!=null?c(f):d(u)),e.apply(this,l)})},"name",{value:e.name})},Tr.fromPromise=function(e){return Object.defineProperty(function(...l){const d=l[l.length-1];if(typeof d!="function")return e.apply(this,l);l.pop(),e.apply(this,l).then(c=>d(null,c),d)},"name",{value:e.name})}),Tr}var Zr,Oa;function wc(){if(Oa)return Zr;Oa=1;var e=fc,l=process.cwd,d=null,c=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return d||(d=l.call(process)),d};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var f=process.chdir;process.chdir=function(s){d=null,f.call(process,s)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,f)}Zr=u;function u(s){e.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&h(s),s.lutimes||i(s),s.chown=o(s.chown),s.fchown=o(s.fchown),s.lchown=o(s.lchown),s.chmod=n(s.chmod),s.fchmod=n(s.fchmod),s.lchmod=n(s.lchmod),s.chownSync=a(s.chownSync),s.fchownSync=a(s.fchownSync),s.lchownSync=a(s.lchownSync),s.chmodSync=t(s.chmodSync),s.fchmodSync=t(s.fchmodSync),s.lchmodSync=t(s.lchmodSync),s.stat=p(s.stat),s.fstat=p(s.fstat),s.lstat=p(s.lstat),s.statSync=g(s.statSync),s.fstatSync=g(s.fstatSync),s.lstatSync=g(s.lstatSync),s.chmod&&!s.lchmod&&(s.lchmod=function(m,_,b){b&&process.nextTick(b)},s.lchmodSync=function(){}),s.chown&&!s.lchown&&(s.lchown=function(m,_,b,O){O&&process.nextTick(O)},s.lchownSync=function(){}),c==="win32"&&(s.rename=typeof s.rename!="function"?s.rename:(function(m){function _(b,O,I){var $=Date.now(),R=0;m(b,O,function A(T){if(T&&(T.code==="EACCES"||T.code==="EPERM"||T.code==="EBUSY")&&Date.now()-$<6e4){setTimeout(function(){s.stat(O,function(y,M){y&&y.code==="ENOENT"?m(b,O,A):I(T)})},R),R<100&&(R+=10);return}I&&I(T)})}return Object.setPrototypeOf&&Object.setPrototypeOf(_,m),_})(s.rename)),s.read=typeof s.read!="function"?s.read:(function(m){function _(b,O,I,$,R,A){var T;if(A&&typeof A=="function"){var y=0;T=function(M,U,x){if(M&&M.code==="EAGAIN"&&y<10)return y++,m.call(s,b,O,I,$,R,T);A.apply(this,arguments)}}return m.call(s,b,O,I,$,R,T)}return Object.setPrototypeOf&&Object.setPrototypeOf(_,m),_})(s.read),s.readSync=typeof s.readSync!="function"?s.readSync:(function(m){return function(_,b,O,I,$){for(var R=0;;)try{return m.call(s,_,b,O,I,$)}catch(A){if(A.code==="EAGAIN"&&R<10){R++;continue}throw A}}})(s.readSync);function h(m){m.lchmod=function(_,b,O){m.open(_,e.O_WRONLY|e.O_SYMLINK,b,function(I,$){if(I){O&&O(I);return}m.fchmod($,b,function(R){m.close($,function(A){O&&O(R||A)})})})},m.lchmodSync=function(_,b){var O=m.openSync(_,e.O_WRONLY|e.O_SYMLINK,b),I=!0,$;try{$=m.fchmodSync(O,b),I=!1}finally{if(I)try{m.closeSync(O)}catch{}else m.closeSync(O)}return $}}function i(m){e.hasOwnProperty("O_SYMLINK")&&m.futimes?(m.lutimes=function(_,b,O,I){m.open(_,e.O_SYMLINK,function($,R){if($){I&&I($);return}m.futimes(R,b,O,function(A){m.close(R,function(T){I&&I(A||T)})})})},m.lutimesSync=function(_,b,O){var I=m.openSync(_,e.O_SYMLINK),$,R=!0;try{$=m.futimesSync(I,b,O),R=!1}finally{if(R)try{m.closeSync(I)}catch{}else m.closeSync(I)}return $}):m.futimes&&(m.lutimes=function(_,b,O,I){I&&process.nextTick(I)},m.lutimesSync=function(){})}function n(m){return m&&function(_,b,O){return m.call(s,_,b,function(I){E(I)&&(I=null),O&&O.apply(this,arguments)})}}function t(m){return m&&function(_,b){try{return m.call(s,_,b)}catch(O){if(!E(O))throw O}}}function o(m){return m&&function(_,b,O,I){return m.call(s,_,b,O,function($){E($)&&($=null),I&&I.apply(this,arguments)})}}function a(m){return m&&function(_,b,O){try{return m.call(s,_,b,O)}catch(I){if(!E(I))throw I}}}function p(m){return m&&function(_,b,O){typeof b=="function"&&(O=b,b=null);function I($,R){R&&(R.uid<0&&(R.uid+=4294967296),R.gid<0&&(R.gid+=4294967296)),O&&O.apply(this,arguments)}return b?m.call(s,_,b,I):m.call(s,_,I)}}function g(m){return m&&function(_,b){var O=b?m.call(s,_,b):m.call(s,_);return O&&(O.uid<0&&(O.uid+=4294967296),O.gid<0&&(O.gid+=4294967296)),O}}function E(m){if(!m||m.code==="ENOSYS")return!0;var _=!process.getuid||process.getuid()!==0;return!!(_&&(m.code==="EINVAL"||m.code==="EPERM"))}}return Zr}var en,Ia;function _c(){if(Ia)return en;Ia=1;var e=dr.Stream;en=l;function l(d){return{ReadStream:c,WriteStream:f};function c(u,s){if(!(this instanceof c))return new c(u,s);e.call(this);var h=this;this.path=u,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,s=s||{};for(var i=Object.keys(s),n=0,t=i.length;n<t;n++){var o=i[n];this[o]=s[o]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){h._read()});return}d.open(this.path,this.flags,this.mode,function(a,p){if(a){h.emit("error",a),h.readable=!1;return}h.fd=p,h.emit("open",p),h._read()})}function f(u,s){if(!(this instanceof f))return new f(u,s);e.call(this),this.path=u,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,s=s||{};for(var h=Object.keys(s),i=0,n=h.length;i<n;i++){var t=h[i];this[t]=s[t]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=d.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}return en}var tn,Da;function Sc(){if(Da)return tn;Da=1,tn=l;var e=Object.getPrototypeOf||function(d){return d.__proto__};function l(d){if(d===null||typeof d!="object")return d;if(d instanceof Object)var c={__proto__:e(d)};else var c=Object.create(null);return Object.getOwnPropertyNames(d).forEach(function(f){Object.defineProperty(c,f,Object.getOwnPropertyDescriptor(d,f))}),c}return tn}var br,Pa;function We(){if(Pa)return br;Pa=1;var e=ut,l=wc(),d=_c(),c=Sc(),f=Br,u,s;typeof Symbol=="function"&&typeof Symbol.for=="function"?(u=Symbol.for("graceful-fs.queue"),s=Symbol.for("graceful-fs.previous")):(u="___graceful-fs.queue",s="___graceful-fs.previous");function h(){}function i(m,_){Object.defineProperty(m,u,{get:function(){return _}})}var n=h;if(f.debuglog?n=f.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(n=function(){var m=f.format.apply(f,arguments);m="GFS4: "+m.split(/\n/).join(`
GFS4: `),console.error(m)}),!e[u]){var t=tt[u]||[];i(e,t),e.close=(function(m){function _(b,O){return m.call(e,b,function(I){I||g(),typeof O=="function"&&O.apply(this,arguments)})}return Object.defineProperty(_,s,{value:m}),_})(e.close),e.closeSync=(function(m){function _(b){m.apply(e,arguments),g()}return Object.defineProperty(_,s,{value:m}),_})(e.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){n(e[u]),xl.equal(e[u].length,0)})}tt[u]||i(tt,e[u]),br=o(c(e)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!e.__patched&&(br=o(e),e.__patched=!0);function o(m){l(m),m.gracefulify=o,m.createReadStream=ce,m.createWriteStream=ue;var _=m.readFile;m.readFile=b;function b(J,Ee,S){return typeof Ee=="function"&&(S=Ee,Ee=null),v(J,Ee,S);function v(H,D,le,me){return _(H,D,function(pe){pe&&(pe.code==="EMFILE"||pe.code==="ENFILE")?a([v,[H,D,le],pe,me||Date.now(),Date.now()]):typeof le=="function"&&le.apply(this,arguments)})}}var O=m.writeFile;m.writeFile=I;function I(J,Ee,S,v){return typeof S=="function"&&(v=S,S=null),H(J,Ee,S,v);function H(D,le,me,pe,_e){return O(D,le,me,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?a([H,[D,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var $=m.appendFile;$&&(m.appendFile=R);function R(J,Ee,S,v){return typeof S=="function"&&(v=S,S=null),H(J,Ee,S,v);function H(D,le,me,pe,_e){return $(D,le,me,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?a([H,[D,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var A=m.copyFile;A&&(m.copyFile=T);function T(J,Ee,S,v){return typeof S=="function"&&(v=S,S=0),H(J,Ee,S,v);function H(D,le,me,pe,_e){return A(D,le,me,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?a([H,[D,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var y=m.readdir;m.readdir=U;var M=/^v[0-5]\./;function U(J,Ee,S){typeof Ee=="function"&&(S=Ee,Ee=null);var v=M.test(process.version)?function(le,me,pe,_e){return y(le,H(le,me,pe,_e))}:function(le,me,pe,_e){return y(le,me,H(le,me,pe,_e))};return v(J,Ee,S);function H(D,le,me,pe){return function(_e,ye){_e&&(_e.code==="EMFILE"||_e.code==="ENFILE")?a([v,[D,le,me],_e,pe||Date.now(),Date.now()]):(ye&&ye.sort&&ye.sort(),typeof me=="function"&&me.call(this,_e,ye))}}}if(process.version.substr(0,4)==="v0.8"){var x=d(m);k=x.ReadStream,W=x.WriteStream}var q=m.ReadStream;q&&(k.prototype=Object.create(q.prototype),k.prototype.open=K);var N=m.WriteStream;N&&(W.prototype=Object.create(N.prototype),W.prototype.open=ne),Object.defineProperty(m,"ReadStream",{get:function(){return k},set:function(J){k=J},enumerable:!0,configurable:!0}),Object.defineProperty(m,"WriteStream",{get:function(){return W},set:function(J){W=J},enumerable:!0,configurable:!0});var P=k;Object.defineProperty(m,"FileReadStream",{get:function(){return P},set:function(J){P=J},enumerable:!0,configurable:!0});var F=W;Object.defineProperty(m,"FileWriteStream",{get:function(){return F},set:function(J){F=J},enumerable:!0,configurable:!0});function k(J,Ee){return this instanceof k?(q.apply(this,arguments),this):k.apply(Object.create(k.prototype),arguments)}function K(){var J=this;Te(J.path,J.flags,J.mode,function(Ee,S){Ee?(J.autoClose&&J.destroy(),J.emit("error",Ee)):(J.fd=S,J.emit("open",S),J.read())})}function W(J,Ee){return this instanceof W?(N.apply(this,arguments),this):W.apply(Object.create(W.prototype),arguments)}function ne(){var J=this;Te(J.path,J.flags,J.mode,function(Ee,S){Ee?(J.destroy(),J.emit("error",Ee)):(J.fd=S,J.emit("open",S))})}function ce(J,Ee){return new m.ReadStream(J,Ee)}function ue(J,Ee){return new m.WriteStream(J,Ee)}var ie=m.open;m.open=Te;function Te(J,Ee,S,v){return typeof S=="function"&&(v=S,S=null),H(J,Ee,S,v);function H(D,le,me,pe,_e){return ie(D,le,me,function(ye,Le){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?a([H,[D,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}return m}function a(m){n("ENQUEUE",m[0].name,m[1]),e[u].push(m),E()}var p;function g(){for(var m=Date.now(),_=0;_<e[u].length;++_)e[u][_].length>2&&(e[u][_][3]=m,e[u][_][4]=m);E()}function E(){if(clearTimeout(p),p=void 0,e[u].length!==0){var m=e[u].shift(),_=m[0],b=m[1],O=m[2],I=m[3],$=m[4];if(I===void 0)n("RETRY",_.name,b),_.apply(null,b);else if(Date.now()-I>=6e4){n("TIMEOUT",_.name,b);var R=b.pop();typeof R=="function"&&R.call(null,O)}else{var A=Date.now()-$,T=Math.max($-I,1),y=Math.min(T*1.2,100);A>=y?(n("RETRY",_.name,b),_.apply(null,b.concat([I]))):e[u].push(m)}p===void 0&&(p=setTimeout(E,0))}}return br}var Na;function kt(){return Na||(Na=1,(function(e){const l=Ve().fromCallback,d=We(),c=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(f=>typeof d[f]=="function");Object.assign(e,d),c.forEach(f=>{e[f]=l(d[f])}),e.exists=function(f,u){return typeof u=="function"?d.exists(f,u):new Promise(s=>d.exists(f,s))},e.read=function(f,u,s,h,i,n){return typeof n=="function"?d.read(f,u,s,h,i,n):new Promise((t,o)=>{d.read(f,u,s,h,i,(a,p,g)=>{if(a)return o(a);t({bytesRead:p,buffer:g})})})},e.write=function(f,u,...s){return typeof s[s.length-1]=="function"?d.write(f,u,...s):new Promise((h,i)=>{d.write(f,u,...s,(n,t,o)=>{if(n)return i(n);h({bytesWritten:t,buffer:o})})})},typeof d.writev=="function"&&(e.writev=function(f,u,...s){return typeof s[s.length-1]=="function"?d.writev(f,u,...s):new Promise((h,i)=>{d.writev(f,u,...s,(n,t,o)=>{if(n)return i(n);h({bytesWritten:t,buffers:o})})})}),typeof d.realpath.native=="function"?e.realpath.native=l(d.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(Qr)),Qr}var Rr={},rn={},Fa;function Ac(){if(Fa)return rn;Fa=1;const e=Ie;return rn.checkPath=function(d){if(process.platform==="win32"&&/[<>:"|?*]/.test(d.replace(e.parse(d).root,""))){const f=new Error(`Path contains invalid characters: ${d}`);throw f.code="EINVAL",f}},rn}var La;function Tc(){if(La)return Rr;La=1;const e=kt(),{checkPath:l}=Ac(),d=c=>{const f={mode:511};return typeof c=="number"?c:{...f,...c}.mode};return Rr.makeDir=async(c,f)=>(l(c),e.mkdir(c,{mode:d(f),recursive:!0})),Rr.makeDirSync=(c,f)=>(l(c),e.mkdirSync(c,{mode:d(f),recursive:!0})),Rr}var nn,xa;function it(){if(xa)return nn;xa=1;const e=Ve().fromPromise,{makeDir:l,makeDirSync:d}=Tc(),c=e(l);return nn={mkdirs:c,mkdirsSync:d,mkdirp:c,mkdirpSync:d,ensureDir:c,ensureDirSync:d},nn}var an,Ua;function Ct(){if(Ua)return an;Ua=1;const e=Ve().fromPromise,l=kt();function d(c){return l.access(c).then(()=>!0).catch(()=>!1)}return an={pathExists:e(d),pathExistsSync:l.existsSync},an}var on,ka;function ql(){if(ka)return on;ka=1;const e=We();function l(c,f,u,s){e.open(c,"r+",(h,i)=>{if(h)return s(h);e.futimes(i,f,u,n=>{e.close(i,t=>{s&&s(n||t)})})})}function d(c,f,u){const s=e.openSync(c,"r+");return e.futimesSync(s,f,u),e.closeSync(s)}return on={utimesMillis:l,utimesMillisSync:d},on}var sn,qa;function qt(){if(qa)return sn;qa=1;const e=kt(),l=Ie,d=Br;function c(a,p,g){const E=g.dereference?m=>e.stat(m,{bigint:!0}):m=>e.lstat(m,{bigint:!0});return Promise.all([E(a),E(p).catch(m=>{if(m.code==="ENOENT")return null;throw m})]).then(([m,_])=>({srcStat:m,destStat:_}))}function f(a,p,g){let E;const m=g.dereference?b=>e.statSync(b,{bigint:!0}):b=>e.lstatSync(b,{bigint:!0}),_=m(a);try{E=m(p)}catch(b){if(b.code==="ENOENT")return{srcStat:_,destStat:null};throw b}return{srcStat:_,destStat:E}}function u(a,p,g,E,m){d.callbackify(c)(a,p,E,(_,b)=>{if(_)return m(_);const{srcStat:O,destStat:I}=b;if(I){if(n(O,I)){const $=l.basename(a),R=l.basename(p);return g==="move"&&$!==R&&$.toLowerCase()===R.toLowerCase()?m(null,{srcStat:O,destStat:I,isChangingCase:!0}):m(new Error("Source and destination must not be the same."))}if(O.isDirectory()&&!I.isDirectory())return m(new Error(`Cannot overwrite non-directory '${p}' with directory '${a}'.`));if(!O.isDirectory()&&I.isDirectory())return m(new Error(`Cannot overwrite directory '${p}' with non-directory '${a}'.`))}return O.isDirectory()&&t(a,p)?m(new Error(o(a,p,g))):m(null,{srcStat:O,destStat:I})})}function s(a,p,g,E){const{srcStat:m,destStat:_}=f(a,p,E);if(_){if(n(m,_)){const b=l.basename(a),O=l.basename(p);if(g==="move"&&b!==O&&b.toLowerCase()===O.toLowerCase())return{srcStat:m,destStat:_,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(m.isDirectory()&&!_.isDirectory())throw new Error(`Cannot overwrite non-directory '${p}' with directory '${a}'.`);if(!m.isDirectory()&&_.isDirectory())throw new Error(`Cannot overwrite directory '${p}' with non-directory '${a}'.`)}if(m.isDirectory()&&t(a,p))throw new Error(o(a,p,g));return{srcStat:m,destStat:_}}function h(a,p,g,E,m){const _=l.resolve(l.dirname(a)),b=l.resolve(l.dirname(g));if(b===_||b===l.parse(b).root)return m();e.stat(b,{bigint:!0},(O,I)=>O?O.code==="ENOENT"?m():m(O):n(p,I)?m(new Error(o(a,g,E))):h(a,p,b,E,m))}function i(a,p,g,E){const m=l.resolve(l.dirname(a)),_=l.resolve(l.dirname(g));if(_===m||_===l.parse(_).root)return;let b;try{b=e.statSync(_,{bigint:!0})}catch(O){if(O.code==="ENOENT")return;throw O}if(n(p,b))throw new Error(o(a,g,E));return i(a,p,_,E)}function n(a,p){return p.ino&&p.dev&&p.ino===a.ino&&p.dev===a.dev}function t(a,p){const g=l.resolve(a).split(l.sep).filter(m=>m),E=l.resolve(p).split(l.sep).filter(m=>m);return g.reduce((m,_,b)=>m&&E[b]===_,!0)}function o(a,p,g){return`Cannot ${g} '${a}' to a subdirectory of itself, '${p}'.`}return sn={checkPaths:u,checkPathsSync:s,checkParentPaths:h,checkParentPathsSync:i,isSrcSubdir:t,areIdentical:n},sn}var ln,Ma;function bc(){if(Ma)return ln;Ma=1;const e=We(),l=Ie,d=it().mkdirs,c=Ct().pathExists,f=ql().utimesMillis,u=qt();function s(U,x,q,N){typeof q=="function"&&!N?(N=q,q={}):typeof q=="function"&&(q={filter:q}),N=N||function(){},q=q||{},q.clobber="clobber"in q?!!q.clobber:!0,q.overwrite="overwrite"in q?!!q.overwrite:q.clobber,q.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),u.checkPaths(U,x,"copy",q,(P,F)=>{if(P)return N(P);const{srcStat:k,destStat:K}=F;u.checkParentPaths(U,k,x,"copy",W=>W?N(W):q.filter?i(h,K,U,x,q,N):h(K,U,x,q,N))})}function h(U,x,q,N,P){const F=l.dirname(q);c(F,(k,K)=>{if(k)return P(k);if(K)return t(U,x,q,N,P);d(F,W=>W?P(W):t(U,x,q,N,P))})}function i(U,x,q,N,P,F){Promise.resolve(P.filter(q,N)).then(k=>k?U(x,q,N,P,F):F(),k=>F(k))}function n(U,x,q,N,P){return N.filter?i(t,U,x,q,N,P):t(U,x,q,N,P)}function t(U,x,q,N,P){(N.dereference?e.stat:e.lstat)(x,(k,K)=>k?P(k):K.isDirectory()?I(K,U,x,q,N,P):K.isFile()||K.isCharacterDevice()||K.isBlockDevice()?o(K,U,x,q,N,P):K.isSymbolicLink()?y(U,x,q,N,P):K.isSocket()?P(new Error(`Cannot copy a socket file: ${x}`)):K.isFIFO()?P(new Error(`Cannot copy a FIFO pipe: ${x}`)):P(new Error(`Unknown file: ${x}`)))}function o(U,x,q,N,P,F){return x?a(U,q,N,P,F):p(U,q,N,P,F)}function a(U,x,q,N,P){if(N.overwrite)e.unlink(q,F=>F?P(F):p(U,x,q,N,P));else return N.errorOnExist?P(new Error(`'${q}' already exists`)):P()}function p(U,x,q,N,P){e.copyFile(x,q,F=>F?P(F):N.preserveTimestamps?g(U.mode,x,q,P):b(q,U.mode,P))}function g(U,x,q,N){return E(U)?m(q,U,P=>P?N(P):_(U,x,q,N)):_(U,x,q,N)}function E(U){return(U&128)===0}function m(U,x,q){return b(U,x|128,q)}function _(U,x,q,N){O(x,q,P=>P?N(P):b(q,U,N))}function b(U,x,q){return e.chmod(U,x,q)}function O(U,x,q){e.stat(U,(N,P)=>N?q(N):f(x,P.atime,P.mtime,q))}function I(U,x,q,N,P,F){return x?R(q,N,P,F):$(U.mode,q,N,P,F)}function $(U,x,q,N,P){e.mkdir(q,F=>{if(F)return P(F);R(x,q,N,k=>k?P(k):b(q,U,P))})}function R(U,x,q,N){e.readdir(U,(P,F)=>P?N(P):A(F,U,x,q,N))}function A(U,x,q,N,P){const F=U.pop();return F?T(U,F,x,q,N,P):P()}function T(U,x,q,N,P,F){const k=l.join(q,x),K=l.join(N,x);u.checkPaths(k,K,"copy",P,(W,ne)=>{if(W)return F(W);const{destStat:ce}=ne;n(ce,k,K,P,ue=>ue?F(ue):A(U,q,N,P,F))})}function y(U,x,q,N,P){e.readlink(x,(F,k)=>{if(F)return P(F);if(N.dereference&&(k=l.resolve(process.cwd(),k)),U)e.readlink(q,(K,W)=>K?K.code==="EINVAL"||K.code==="UNKNOWN"?e.symlink(k,q,P):P(K):(N.dereference&&(W=l.resolve(process.cwd(),W)),u.isSrcSubdir(k,W)?P(new Error(`Cannot copy '${k}' to a subdirectory of itself, '${W}'.`)):U.isDirectory()&&u.isSrcSubdir(W,k)?P(new Error(`Cannot overwrite '${W}' with '${k}'.`)):M(k,q,P)));else return e.symlink(k,q,P)})}function M(U,x,q){e.unlink(x,N=>N?q(N):e.symlink(U,x,q))}return ln=s,ln}var un,$a;function Rc(){if($a)return un;$a=1;const e=We(),l=Ie,d=it().mkdirsSync,c=ql().utimesMillisSync,f=qt();function u(A,T,y){typeof y=="function"&&(y={filter:y}),y=y||{},y.clobber="clobber"in y?!!y.clobber:!0,y.overwrite="overwrite"in y?!!y.overwrite:y.clobber,y.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:M,destStat:U}=f.checkPathsSync(A,T,"copy",y);return f.checkParentPathsSync(A,M,T,"copy"),s(U,A,T,y)}function s(A,T,y,M){if(M.filter&&!M.filter(T,y))return;const U=l.dirname(y);return e.existsSync(U)||d(U),i(A,T,y,M)}function h(A,T,y,M){if(!(M.filter&&!M.filter(T,y)))return i(A,T,y,M)}function i(A,T,y,M){const x=(M.dereference?e.statSync:e.lstatSync)(T);if(x.isDirectory())return _(x,A,T,y,M);if(x.isFile()||x.isCharacterDevice()||x.isBlockDevice())return n(x,A,T,y,M);if(x.isSymbolicLink())return $(A,T,y,M);throw x.isSocket()?new Error(`Cannot copy a socket file: ${T}`):x.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${T}`):new Error(`Unknown file: ${T}`)}function n(A,T,y,M,U){return T?t(A,y,M,U):o(A,y,M,U)}function t(A,T,y,M){if(M.overwrite)return e.unlinkSync(y),o(A,T,y,M);if(M.errorOnExist)throw new Error(`'${y}' already exists`)}function o(A,T,y,M){return e.copyFileSync(T,y),M.preserveTimestamps&&a(A.mode,T,y),E(y,A.mode)}function a(A,T,y){return p(A)&&g(y,A),m(T,y)}function p(A){return(A&128)===0}function g(A,T){return E(A,T|128)}function E(A,T){return e.chmodSync(A,T)}function m(A,T){const y=e.statSync(A);return c(T,y.atime,y.mtime)}function _(A,T,y,M,U){return T?O(y,M,U):b(A.mode,y,M,U)}function b(A,T,y,M){return e.mkdirSync(y),O(T,y,M),E(y,A)}function O(A,T,y){e.readdirSync(A).forEach(M=>I(M,A,T,y))}function I(A,T,y,M){const U=l.join(T,A),x=l.join(y,A),{destStat:q}=f.checkPathsSync(U,x,"copy",M);return h(q,U,x,M)}function $(A,T,y,M){let U=e.readlinkSync(T);if(M.dereference&&(U=l.resolve(process.cwd(),U)),A){let x;try{x=e.readlinkSync(y)}catch(q){if(q.code==="EINVAL"||q.code==="UNKNOWN")return e.symlinkSync(U,y);throw q}if(M.dereference&&(x=l.resolve(process.cwd(),x)),f.isSrcSubdir(U,x))throw new Error(`Cannot copy '${U}' to a subdirectory of itself, '${x}'.`);if(e.statSync(y).isDirectory()&&f.isSrcSubdir(x,U))throw new Error(`Cannot overwrite '${x}' with '${U}'.`);return R(U,y)}else return e.symlinkSync(U,y)}function R(A,T){return e.unlinkSync(T),e.symlinkSync(A,T)}return un=u,un}var cn,Ba;function ta(){if(Ba)return cn;Ba=1;const e=Ve().fromCallback;return cn={copy:e(bc()),copySync:Rc()},cn}var fn,Ha;function Cc(){if(Ha)return fn;Ha=1;const e=We(),l=Ie,d=xl,c=process.platform==="win32";function f(g){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(m=>{g[m]=g[m]||e[m],m=m+"Sync",g[m]=g[m]||e[m]}),g.maxBusyTries=g.maxBusyTries||3}function u(g,E,m){let _=0;typeof E=="function"&&(m=E,E={}),d(g,"rimraf: missing path"),d.strictEqual(typeof g,"string","rimraf: path should be a string"),d.strictEqual(typeof m,"function","rimraf: callback function required"),d(E,"rimraf: invalid options argument provided"),d.strictEqual(typeof E,"object","rimraf: options should be object"),f(E),s(g,E,function b(O){if(O){if((O.code==="EBUSY"||O.code==="ENOTEMPTY"||O.code==="EPERM")&&_<E.maxBusyTries){_++;const I=_*100;return setTimeout(()=>s(g,E,b),I)}O.code==="ENOENT"&&(O=null)}m(O)})}function s(g,E,m){d(g),d(E),d(typeof m=="function"),E.lstat(g,(_,b)=>{if(_&&_.code==="ENOENT")return m(null);if(_&&_.code==="EPERM"&&c)return h(g,E,_,m);if(b&&b.isDirectory())return n(g,E,_,m);E.unlink(g,O=>{if(O){if(O.code==="ENOENT")return m(null);if(O.code==="EPERM")return c?h(g,E,O,m):n(g,E,O,m);if(O.code==="EISDIR")return n(g,E,O,m)}return m(O)})})}function h(g,E,m,_){d(g),d(E),d(typeof _=="function"),E.chmod(g,438,b=>{b?_(b.code==="ENOENT"?null:m):E.stat(g,(O,I)=>{O?_(O.code==="ENOENT"?null:m):I.isDirectory()?n(g,E,m,_):E.unlink(g,_)})})}function i(g,E,m){let _;d(g),d(E);try{E.chmodSync(g,438)}catch(b){if(b.code==="ENOENT")return;throw m}try{_=E.statSync(g)}catch(b){if(b.code==="ENOENT")return;throw m}_.isDirectory()?a(g,E,m):E.unlinkSync(g)}function n(g,E,m,_){d(g),d(E),d(typeof _=="function"),E.rmdir(g,b=>{b&&(b.code==="ENOTEMPTY"||b.code==="EEXIST"||b.code==="EPERM")?t(g,E,_):b&&b.code==="ENOTDIR"?_(m):_(b)})}function t(g,E,m){d(g),d(E),d(typeof m=="function"),E.readdir(g,(_,b)=>{if(_)return m(_);let O=b.length,I;if(O===0)return E.rmdir(g,m);b.forEach($=>{u(l.join(g,$),E,R=>{if(!I){if(R)return m(I=R);--O===0&&E.rmdir(g,m)}})})})}function o(g,E){let m;E=E||{},f(E),d(g,"rimraf: missing path"),d.strictEqual(typeof g,"string","rimraf: path should be a string"),d(E,"rimraf: missing options"),d.strictEqual(typeof E,"object","rimraf: options should be object");try{m=E.lstatSync(g)}catch(_){if(_.code==="ENOENT")return;_.code==="EPERM"&&c&&i(g,E,_)}try{m&&m.isDirectory()?a(g,E,null):E.unlinkSync(g)}catch(_){if(_.code==="ENOENT")return;if(_.code==="EPERM")return c?i(g,E,_):a(g,E,_);if(_.code!=="EISDIR")throw _;a(g,E,_)}}function a(g,E,m){d(g),d(E);try{E.rmdirSync(g)}catch(_){if(_.code==="ENOTDIR")throw m;if(_.code==="ENOTEMPTY"||_.code==="EEXIST"||_.code==="EPERM")p(g,E);else if(_.code!=="ENOENT")throw _}}function p(g,E){if(d(g),d(E),E.readdirSync(g).forEach(m=>o(l.join(g,m),E)),c){const m=Date.now();do try{return E.rmdirSync(g,E)}catch{}while(Date.now()-m<500)}else return E.rmdirSync(g,E)}return fn=u,u.sync=o,fn}var dn,ja;function jr(){if(ja)return dn;ja=1;const e=We(),l=Ve().fromCallback,d=Cc();function c(u,s){if(e.rm)return e.rm(u,{recursive:!0,force:!0},s);d(u,s)}function f(u){if(e.rmSync)return e.rmSync(u,{recursive:!0,force:!0});d.sync(u)}return dn={remove:l(c),removeSync:f},dn}var hn,Ga;function Oc(){if(Ga)return hn;Ga=1;const e=Ve().fromPromise,l=kt(),d=Ie,c=it(),f=jr(),u=e(async function(i){let n;try{n=await l.readdir(i)}catch{return c.mkdirs(i)}return Promise.all(n.map(t=>f.remove(d.join(i,t))))});function s(h){let i;try{i=l.readdirSync(h)}catch{return c.mkdirsSync(h)}i.forEach(n=>{n=d.join(h,n),f.removeSync(n)})}return hn={emptyDirSync:s,emptydirSync:s,emptyDir:u,emptydir:u},hn}var pn,Wa;function Ic(){if(Wa)return pn;Wa=1;const e=Ve().fromCallback,l=Ie,d=We(),c=it();function f(s,h){function i(){d.writeFile(s,"",n=>{if(n)return h(n);h()})}d.stat(s,(n,t)=>{if(!n&&t.isFile())return h();const o=l.dirname(s);d.stat(o,(a,p)=>{if(a)return a.code==="ENOENT"?c.mkdirs(o,g=>{if(g)return h(g);i()}):h(a);p.isDirectory()?i():d.readdir(o,g=>{if(g)return h(g)})})})}function u(s){let h;try{h=d.statSync(s)}catch{}if(h&&h.isFile())return;const i=l.dirname(s);try{d.statSync(i).isDirectory()||d.readdirSync(i)}catch(n){if(n&&n.code==="ENOENT")c.mkdirsSync(i);else throw n}d.writeFileSync(s,"")}return pn={createFile:e(f),createFileSync:u},pn}var mn,Ya;function Dc(){if(Ya)return mn;Ya=1;const e=Ve().fromCallback,l=Ie,d=We(),c=it(),f=Ct().pathExists,{areIdentical:u}=qt();function s(i,n,t){function o(a,p){d.link(a,p,g=>{if(g)return t(g);t(null)})}d.lstat(n,(a,p)=>{d.lstat(i,(g,E)=>{if(g)return g.message=g.message.replace("lstat","ensureLink"),t(g);if(p&&u(E,p))return t(null);const m=l.dirname(n);f(m,(_,b)=>{if(_)return t(_);if(b)return o(i,n);c.mkdirs(m,O=>{if(O)return t(O);o(i,n)})})})})}function h(i,n){let t;try{t=d.lstatSync(n)}catch{}try{const p=d.lstatSync(i);if(t&&u(p,t))return}catch(p){throw p.message=p.message.replace("lstat","ensureLink"),p}const o=l.dirname(n);return d.existsSync(o)||c.mkdirsSync(o),d.linkSync(i,n)}return mn={createLink:e(s),createLinkSync:h},mn}var gn,Va;function Pc(){if(Va)return gn;Va=1;const e=Ie,l=We(),d=Ct().pathExists;function c(u,s,h){if(e.isAbsolute(u))return l.lstat(u,i=>i?(i.message=i.message.replace("lstat","ensureSymlink"),h(i)):h(null,{toCwd:u,toDst:u}));{const i=e.dirname(s),n=e.join(i,u);return d(n,(t,o)=>t?h(t):o?h(null,{toCwd:n,toDst:u}):l.lstat(u,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),h(a)):h(null,{toCwd:u,toDst:e.relative(i,u)})))}}function f(u,s){let h;if(e.isAbsolute(u)){if(h=l.existsSync(u),!h)throw new Error("absolute srcpath does not exist");return{toCwd:u,toDst:u}}else{const i=e.dirname(s),n=e.join(i,u);if(h=l.existsSync(n),h)return{toCwd:n,toDst:u};if(h=l.existsSync(u),!h)throw new Error("relative srcpath does not exist");return{toCwd:u,toDst:e.relative(i,u)}}}return gn={symlinkPaths:c,symlinkPathsSync:f},gn}var vn,za;function Nc(){if(za)return vn;za=1;const e=We();function l(c,f,u){if(u=typeof f=="function"?f:u,f=typeof f=="function"?!1:f,f)return u(null,f);e.lstat(c,(s,h)=>{if(s)return u(null,"file");f=h&&h.isDirectory()?"dir":"file",u(null,f)})}function d(c,f){let u;if(f)return f;try{u=e.lstatSync(c)}catch{return"file"}return u&&u.isDirectory()?"dir":"file"}return vn={symlinkType:l,symlinkTypeSync:d},vn}var En,Xa;function Fc(){if(Xa)return En;Xa=1;const e=Ve().fromCallback,l=Ie,d=kt(),c=it(),f=c.mkdirs,u=c.mkdirsSync,s=Pc(),h=s.symlinkPaths,i=s.symlinkPathsSync,n=Nc(),t=n.symlinkType,o=n.symlinkTypeSync,a=Ct().pathExists,{areIdentical:p}=qt();function g(_,b,O,I){I=typeof O=="function"?O:I,O=typeof O=="function"?!1:O,d.lstat(b,($,R)=>{!$&&R.isSymbolicLink()?Promise.all([d.stat(_),d.stat(b)]).then(([A,T])=>{if(p(A,T))return I(null);E(_,b,O,I)}):E(_,b,O,I)})}function E(_,b,O,I){h(_,b,($,R)=>{if($)return I($);_=R.toDst,t(R.toCwd,O,(A,T)=>{if(A)return I(A);const y=l.dirname(b);a(y,(M,U)=>{if(M)return I(M);if(U)return d.symlink(_,b,T,I);f(y,x=>{if(x)return I(x);d.symlink(_,b,T,I)})})})})}function m(_,b,O){let I;try{I=d.lstatSync(b)}catch{}if(I&&I.isSymbolicLink()){const T=d.statSync(_),y=d.statSync(b);if(p(T,y))return}const $=i(_,b);_=$.toDst,O=o($.toCwd,O);const R=l.dirname(b);return d.existsSync(R)||u(R),d.symlinkSync(_,b,O)}return En={createSymlink:e(g),createSymlinkSync:m},En}var yn,Ja;function Lc(){if(Ja)return yn;Ja=1;const{createFile:e,createFileSync:l}=Ic(),{createLink:d,createLinkSync:c}=Dc(),{createSymlink:f,createSymlinkSync:u}=Fc();return yn={createFile:e,createFileSync:l,ensureFile:e,ensureFileSync:l,createLink:d,createLinkSync:c,ensureLink:d,ensureLinkSync:c,createSymlink:f,createSymlinkSync:u,ensureSymlink:f,ensureSymlinkSync:u},yn}var wn,Ka;function ra(){if(Ka)return wn;Ka=1;function e(d,{EOL:c=`
`,finalEOL:f=!0,replacer:u=null,spaces:s}={}){const h=f?c:"";return JSON.stringify(d,u,s).replace(/\n/g,c)+h}function l(d){return Buffer.isBuffer(d)&&(d=d.toString("utf8")),d.replace(/^\uFEFF/,"")}return wn={stringify:e,stripBom:l},wn}var _n,Qa;function xc(){if(Qa)return _n;Qa=1;let e;try{e=We()}catch{e=ut}const l=Ve(),{stringify:d,stripBom:c}=ra();async function f(t,o={}){typeof o=="string"&&(o={encoding:o});const a=o.fs||e,p="throws"in o?o.throws:!0;let g=await l.fromCallback(a.readFile)(t,o);g=c(g);let E;try{E=JSON.parse(g,o?o.reviver:null)}catch(m){if(p)throw m.message=`${t}: ${m.message}`,m;return null}return E}const u=l.fromPromise(f);function s(t,o={}){typeof o=="string"&&(o={encoding:o});const a=o.fs||e,p="throws"in o?o.throws:!0;try{let g=a.readFileSync(t,o);return g=c(g),JSON.parse(g,o.reviver)}catch(g){if(p)throw g.message=`${t}: ${g.message}`,g;return null}}async function h(t,o,a={}){const p=a.fs||e,g=d(o,a);await l.fromCallback(p.writeFile)(t,g,a)}const i=l.fromPromise(h);function n(t,o,a={}){const p=a.fs||e,g=d(o,a);return p.writeFileSync(t,g,a)}return _n={readFile:u,readFileSync:s,writeFile:i,writeFileSync:n},_n}var Sn,Za;function Uc(){if(Za)return Sn;Za=1;const e=xc();return Sn={readJson:e.readFile,readJsonSync:e.readFileSync,writeJson:e.writeFile,writeJsonSync:e.writeFileSync},Sn}var An,eo;function na(){if(eo)return An;eo=1;const e=Ve().fromCallback,l=We(),d=Ie,c=it(),f=Ct().pathExists;function u(h,i,n,t){typeof n=="function"&&(t=n,n="utf8");const o=d.dirname(h);f(o,(a,p)=>{if(a)return t(a);if(p)return l.writeFile(h,i,n,t);c.mkdirs(o,g=>{if(g)return t(g);l.writeFile(h,i,n,t)})})}function s(h,...i){const n=d.dirname(h);if(l.existsSync(n))return l.writeFileSync(h,...i);c.mkdirsSync(n),l.writeFileSync(h,...i)}return An={outputFile:e(u),outputFileSync:s},An}var Tn,to;function kc(){if(to)return Tn;to=1;const{stringify:e}=ra(),{outputFile:l}=na();async function d(c,f,u={}){const s=e(f,u);await l(c,s,u)}return Tn=d,Tn}var bn,ro;function qc(){if(ro)return bn;ro=1;const{stringify:e}=ra(),{outputFileSync:l}=na();function d(c,f,u){const s=e(f,u);l(c,s,u)}return bn=d,bn}var Rn,no;function Mc(){if(no)return Rn;no=1;const e=Ve().fromPromise,l=Uc();return l.outputJson=e(kc()),l.outputJsonSync=qc(),l.outputJSON=l.outputJson,l.outputJSONSync=l.outputJsonSync,l.writeJSON=l.writeJson,l.writeJSONSync=l.writeJsonSync,l.readJSON=l.readJson,l.readJSONSync=l.readJsonSync,Rn=l,Rn}var Cn,io;function $c(){if(io)return Cn;io=1;const e=We(),l=Ie,d=ta().copy,c=jr().remove,f=it().mkdirp,u=Ct().pathExists,s=qt();function h(a,p,g,E){typeof g=="function"&&(E=g,g={}),g=g||{};const m=g.overwrite||g.clobber||!1;s.checkPaths(a,p,"move",g,(_,b)=>{if(_)return E(_);const{srcStat:O,isChangingCase:I=!1}=b;s.checkParentPaths(a,O,p,"move",$=>{if($)return E($);if(i(p))return n(a,p,m,I,E);f(l.dirname(p),R=>R?E(R):n(a,p,m,I,E))})})}function i(a){const p=l.dirname(a);return l.parse(p).root===p}function n(a,p,g,E,m){if(E)return t(a,p,g,m);if(g)return c(p,_=>_?m(_):t(a,p,g,m));u(p,(_,b)=>_?m(_):b?m(new Error("dest already exists.")):t(a,p,g,m))}function t(a,p,g,E){e.rename(a,p,m=>m?m.code!=="EXDEV"?E(m):o(a,p,g,E):E())}function o(a,p,g,E){d(a,p,{overwrite:g,errorOnExist:!0},_=>_?E(_):c(a,E))}return Cn=h,Cn}var On,ao;function Bc(){if(ao)return On;ao=1;const e=We(),l=Ie,d=ta().copySync,c=jr().removeSync,f=it().mkdirpSync,u=qt();function s(o,a,p){p=p||{};const g=p.overwrite||p.clobber||!1,{srcStat:E,isChangingCase:m=!1}=u.checkPathsSync(o,a,"move",p);return u.checkParentPathsSync(o,E,a,"move"),h(a)||f(l.dirname(a)),i(o,a,g,m)}function h(o){const a=l.dirname(o);return l.parse(a).root===a}function i(o,a,p,g){if(g)return n(o,a,p);if(p)return c(a),n(o,a,p);if(e.existsSync(a))throw new Error("dest already exists.");return n(o,a,p)}function n(o,a,p){try{e.renameSync(o,a)}catch(g){if(g.code!=="EXDEV")throw g;return t(o,a,p)}}function t(o,a,p){return d(o,a,{overwrite:p,errorOnExist:!0}),c(o)}return On=s,On}var In,oo;function Hc(){if(oo)return In;oo=1;const e=Ve().fromCallback;return In={move:e($c()),moveSync:Bc()},In}var Dn,so;function mt(){return so||(so=1,Dn={...kt(),...ta(),...Oc(),...Lc(),...Mc(),...it(),...Hc(),...na(),...Ct(),...jr()}),Dn}var jt={},At={},Pn={},Tt={},lo;function ia(){if(lo)return Tt;lo=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.CancellationError=Tt.CancellationToken=void 0;const e=Ul;let l=class extends e.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(f){this.removeParentCancelHandler(),this._parent=f,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(f){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,f!=null&&(this.parent=f)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(f){this.cancelled?f():this.once("cancel",f)}createPromise(f){if(this.cancelled)return Promise.reject(new d);const u=()=>{if(s!=null)try{this.removeListener("cancel",s),s=null}catch{}};let s=null;return new Promise((h,i)=>{let n=null;if(s=()=>{try{n!=null&&(n(),n=null)}finally{i(new d)}},this.cancelled){s();return}this.onCancel(s),f(h,i,t=>{n=t})}).then(h=>(u(),h)).catch(h=>{throw u(),h})}removeParentCancelHandler(){const f=this._parent;f!=null&&this.parentCancelHandler!=null&&(f.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}};Tt.CancellationToken=l;class d extends Error{constructor(){super("cancelled")}}return Tt.CancellationError=d,Tt}var Cr={},uo;function Gr(){if(uo)return Cr;uo=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.newError=e;function e(l,d){const c=new Error(l);return c.code=d,c}return Cr}var Be={},Or={exports:{}},Ir={exports:{}},Nn,co;function jc(){if(co)return Nn;co=1;var e=1e3,l=e*60,d=l*60,c=d*24,f=c*7,u=c*365.25;Nn=function(t,o){o=o||{};var a=typeof t;if(a==="string"&&t.length>0)return s(t);if(a==="number"&&isFinite(t))return o.long?i(t):h(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function s(t){if(t=String(t),!(t.length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(o){var a=parseFloat(o[1]),p=(o[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return a*u;case"weeks":case"week":case"w":return a*f;case"days":case"day":case"d":return a*c;case"hours":case"hour":case"hrs":case"hr":case"h":return a*d;case"minutes":case"minute":case"mins":case"min":case"m":return a*l;case"seconds":case"second":case"secs":case"sec":case"s":return a*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}function h(t){var o=Math.abs(t);return o>=c?Math.round(t/c)+"d":o>=d?Math.round(t/d)+"h":o>=l?Math.round(t/l)+"m":o>=e?Math.round(t/e)+"s":t+"ms"}function i(t){var o=Math.abs(t);return o>=c?n(t,o,c,"day"):o>=d?n(t,o,d,"hour"):o>=l?n(t,o,l,"minute"):o>=e?n(t,o,e,"second"):t+" ms"}function n(t,o,a,p){var g=o>=a*1.5;return Math.round(t/a)+" "+p+(g?"s":"")}return Nn}var Fn,fo;function Ml(){if(fo)return Fn;fo=1;function e(l){c.debug=c,c.default=c,c.coerce=n,c.disable=h,c.enable=u,c.enabled=i,c.humanize=jc(),c.destroy=t,Object.keys(l).forEach(o=>{c[o]=l[o]}),c.names=[],c.skips=[],c.formatters={};function d(o){let a=0;for(let p=0;p<o.length;p++)a=(a<<5)-a+o.charCodeAt(p),a|=0;return c.colors[Math.abs(a)%c.colors.length]}c.selectColor=d;function c(o){let a,p=null,g,E;function m(..._){if(!m.enabled)return;const b=m,O=Number(new Date),I=O-(a||O);b.diff=I,b.prev=a,b.curr=O,a=O,_[0]=c.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let $=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(A,T)=>{if(A==="%%")return"%";$++;const y=c.formatters[T];if(typeof y=="function"){const M=_[$];A=y.call(b,M),_.splice($,1),$--}return A}),c.formatArgs.call(b,_),(b.log||c.log).apply(b,_)}return m.namespace=o,m.useColors=c.useColors(),m.color=c.selectColor(o),m.extend=f,m.destroy=c.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(g!==c.namespaces&&(g=c.namespaces,E=c.enabled(o)),E),set:_=>{p=_}}),typeof c.init=="function"&&c.init(m),m}function f(o,a){const p=c(this.namespace+(typeof a>"u"?":":a)+o);return p.log=this.log,p}function u(o){c.save(o),c.namespaces=o,c.names=[],c.skips=[];const a=(typeof o=="string"?o:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const p of a)p[0]==="-"?c.skips.push(p.slice(1)):c.names.push(p)}function s(o,a){let p=0,g=0,E=-1,m=0;for(;p<o.length;)if(g<a.length&&(a[g]===o[p]||a[g]==="*"))a[g]==="*"?(E=g,m=p,g++):(p++,g++);else if(E!==-1)g=E+1,m++,p=m;else return!1;for(;g<a.length&&a[g]==="*";)g++;return g===a.length}function h(){const o=[...c.names,...c.skips.map(a=>"-"+a)].join(",");return c.enable(""),o}function i(o){for(const a of c.skips)if(s(o,a))return!1;for(const a of c.names)if(s(o,a))return!0;return!1}function n(o){return o instanceof Error?o.stack||o.message:o}function t(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return c.enable(c.load()),c}return Fn=e,Fn}var ho;function Gc(){return ho||(ho=1,(function(e,l){l.formatArgs=c,l.save=f,l.load=u,l.useColors=d,l.storage=s(),l.destroy=(()=>{let i=!1;return()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),l.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function d(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let i;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(i=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(i[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function c(i){if(i[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+i[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;i.splice(1,0,n,"color: inherit");let t=0,o=0;i[0].replace(/%[a-zA-Z%]/g,a=>{a!=="%%"&&(t++,a==="%c"&&(o=t))}),i.splice(o,0,n)}l.log=console.debug||console.log||(()=>{});function f(i){try{i?l.storage.setItem("debug",i):l.storage.removeItem("debug")}catch{}}function u(){let i;try{i=l.storage.getItem("debug")||l.storage.getItem("DEBUG")}catch{}return!i&&typeof process<"u"&&"env"in process&&(i=process.env.DEBUG),i}function s(){try{return localStorage}catch{}}e.exports=Ml()(l);const{formatters:h}=e.exports;h.j=function(i){try{return JSON.stringify(i)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}})(Ir,Ir.exports)),Ir.exports}var Dr={exports:{}},Ln,po;function Wc(){return po||(po=1,Ln=(e,l=process.argv)=>{const d=e.startsWith("-")?"":e.length===1?"-":"--",c=l.indexOf(d+e),f=l.indexOf("--");return c!==-1&&(f===-1||c<f)}),Ln}var xn,mo;function Yc(){if(mo)return xn;mo=1;const e=Hr,l=ea,d=Wc(),{env:c}=process;let f;d("no-color")||d("no-colors")||d("color=false")||d("color=never")?f=0:(d("color")||d("colors")||d("color=true")||d("color=always"))&&(f=1),"FORCE_COLOR"in c&&(c.FORCE_COLOR==="true"?f=1:c.FORCE_COLOR==="false"?f=0:f=c.FORCE_COLOR.length===0?1:Math.min(parseInt(c.FORCE_COLOR,10),3));function u(i){return i===0?!1:{level:i,hasBasic:!0,has256:i>=2,has16m:i>=3}}function s(i,n){if(f===0)return 0;if(d("color=16m")||d("color=full")||d("color=truecolor"))return 3;if(d("color=256"))return 2;if(i&&!n&&f===void 0)return 0;const t=f||0;if(c.TERM==="dumb")return t;if(process.platform==="win32"){const o=e.release().split(".");return Number(o[0])>=10&&Number(o[2])>=10586?Number(o[2])>=14931?3:2:1}if("CI"in c)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(o=>o in c)||c.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in c)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(c.TEAMCITY_VERSION)?1:0;if(c.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in c){const o=parseInt((c.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(c.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(c.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(c.TERM)||"COLORTERM"in c?1:t}function h(i){const n=s(i,i&&i.isTTY);return u(n)}return xn={supportsColor:h,stdout:u(s(!0,l.isatty(1))),stderr:u(s(!0,l.isatty(2)))},xn}var go;function Vc(){return go||(go=1,(function(e,l){const d=ea,c=Br;l.init=t,l.log=h,l.formatArgs=u,l.save=i,l.load=n,l.useColors=f,l.destroy=c.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),l.colors=[6,2,3,4,5,1];try{const a=Yc();a&&(a.stderr||a).level>=2&&(l.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}l.inspectOpts=Object.keys(process.env).filter(a=>/^debug_/i.test(a)).reduce((a,p)=>{const g=p.substring(6).toLowerCase().replace(/_([a-z])/g,(m,_)=>_.toUpperCase());let E=process.env[p];return/^(yes|on|true|enabled)$/i.test(E)?E=!0:/^(no|off|false|disabled)$/i.test(E)?E=!1:E==="null"?E=null:E=Number(E),a[g]=E,a},{});function f(){return"colors"in l.inspectOpts?!!l.inspectOpts.colors:d.isatty(process.stderr.fd)}function u(a){const{namespace:p,useColors:g}=this;if(g){const E=this.color,m="\x1B[3"+(E<8?E:"8;5;"+E),_=`  ${m};1m${p} \x1B[0m`;a[0]=_+a[0].split(`
`).join(`
`+_),a.push(m+"m+"+e.exports.humanize(this.diff)+"\x1B[0m")}else a[0]=s()+p+" "+a[0]}function s(){return l.inspectOpts.hideDate?"":new Date().toISOString()+" "}function h(...a){return process.stderr.write(c.formatWithOptions(l.inspectOpts,...a)+`
`)}function i(a){a?process.env.DEBUG=a:delete process.env.DEBUG}function n(){return process.env.DEBUG}function t(a){a.inspectOpts={};const p=Object.keys(l.inspectOpts);for(let g=0;g<p.length;g++)a.inspectOpts[p[g]]=l.inspectOpts[p[g]]}e.exports=Ml()(l);const{formatters:o}=e.exports;o.o=function(a){return this.inspectOpts.colors=this.useColors,c.inspect(a,this.inspectOpts).split(`
`).map(p=>p.trim()).join(" ")},o.O=function(a){return this.inspectOpts.colors=this.useColors,c.inspect(a,this.inspectOpts)}})(Dr,Dr.exports)),Dr.exports}var vo;function zc(){return vo||(vo=1,typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Or.exports=Gc():Or.exports=Vc()),Or.exports}var Gt={},Eo;function $l(){if(Eo)return Gt;Eo=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.ProgressCallbackTransform=void 0;const e=dr;let l=class extends e.Transform{constructor(c,f,u){super(),this.total=c,this.cancellationToken=f,this.onProgress=u,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(c,f,u){if(this.cancellationToken.cancelled){u(new Error("cancelled"),null);return}this.transferred+=c.length,this.delta+=c.length;const s=Date.now();s>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=s+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((s-this.start)/1e3))}),this.delta=0),u(null,c)}_flush(c){if(this.cancellationToken.cancelled){c(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,c(null)}};return Gt.ProgressCallbackTransform=l,Gt}var yo;function Xc(){if(yo)return Be;yo=1,Object.defineProperty(Be,"__esModule",{value:!0}),Be.DigestTransform=Be.HttpExecutor=Be.HttpError=void 0,Be.createHttpError=n,Be.parseJson=a,Be.configureRequestOptionsFromUrl=g,Be.configureRequestUrl=E,Be.safeGetHeader=b,Be.configureRequestOptions=I,Be.safeStringifyJson=$;const e=pr,l=zc(),d=ut,c=dr,f=Ut,u=ia(),s=Gr(),h=$l(),i=(0,l.default)("electron-builder");function n(R,A=null){return new o(R.statusCode||-1,`${R.statusCode} ${R.statusMessage}`+(A==null?"":`
`+JSON.stringify(A,null,"  "))+`
Headers: `+$(R.headers),A)}const t=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class o extends Error{constructor(A,T=`HTTP error: ${t.get(A)||A}`,y=null){super(T),this.statusCode=A,this.description=y,this.name="HttpError",this.code=`HTTP_ERROR_${A}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}Be.HttpError=o;function a(R){return R.then(A=>A==null||A.length===0?null:JSON.parse(A))}class p{constructor(){this.maxRedirects=10}request(A,T=new u.CancellationToken,y){I(A);const M=y==null?void 0:JSON.stringify(y),U=M?Buffer.from(M):void 0;if(U!=null){i(M);const{headers:x,...q}=A;A={method:"post",headers:{"Content-Type":"application/json","Content-Length":U.length,...x},...q}}return this.doApiRequest(A,T,x=>x.end(U))}doApiRequest(A,T,y,M=0){return i.enabled&&i(`Request: ${$(A)}`),T.createPromise((U,x,q)=>{const N=this.createRequest(A,P=>{try{this.handleResponse(P,A,T,U,x,M,y)}catch(F){x(F)}});this.addErrorAndTimeoutHandlers(N,x,A.timeout),this.addRedirectHandlers(N,A,x,M,P=>{this.doApiRequest(P,T,y,M).then(U).catch(x)}),y(N,x),q(()=>N.abort())})}addRedirectHandlers(A,T,y,M,U){}addErrorAndTimeoutHandlers(A,T,y=60*1e3){this.addTimeOutHandler(A,T,y),A.on("error",T),A.on("aborted",()=>{T(new Error("Request has been aborted by the server"))})}handleResponse(A,T,y,M,U,x,q){var N;if(i.enabled&&i(`Response: ${A.statusCode} ${A.statusMessage}, request options: ${$(T)}`),A.statusCode===404){U(n(A,`method: ${T.method||"GET"} url: ${T.protocol||"https:"}//${T.hostname}${T.port?`:${T.port}`:""}${T.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(A.statusCode===204){M();return}const P=(N=A.statusCode)!==null&&N!==void 0?N:0,F=P>=300&&P<400,k=b(A,"location");if(F&&k!=null){if(x>this.maxRedirects){U(this.createMaxRedirectError());return}this.doApiRequest(p.prepareRedirectUrlOptions(k,T),y,q,x).then(M).catch(U);return}A.setEncoding("utf8");let K="";A.on("error",U),A.on("data",W=>K+=W),A.on("end",()=>{try{if(A.statusCode!=null&&A.statusCode>=400){const W=b(A,"content-type"),ne=W!=null&&(Array.isArray(W)?W.find(ce=>ce.includes("json"))!=null:W.includes("json"));U(n(A,`method: ${T.method||"GET"} url: ${T.protocol||"https:"}//${T.hostname}${T.port?`:${T.port}`:""}${T.path}

          Data:
          ${ne?JSON.stringify(JSON.parse(K)):K}
          `))}else M(K.length===0?null:K)}catch(W){U(W)}})}async downloadToBuffer(A,T){return await T.cancellationToken.createPromise((y,M,U)=>{const x=[],q={headers:T.headers||void 0,redirect:"manual"};E(A,q),I(q),this.doDownload(q,{destination:null,options:T,onCancel:U,callback:N=>{N==null?y(Buffer.concat(x)):M(N)},responseHandler:(N,P)=>{let F=0;N.on("data",k=>{if(F+=k.length,F>524288e3){P(new Error("Maximum allowed size is 500 MB"));return}x.push(k)}),N.on("end",()=>{P(null)})}},0)})}doDownload(A,T,y){const M=this.createRequest(A,U=>{if(U.statusCode>=400){T.callback(new Error(`Cannot download "${A.protocol||"https:"}//${A.hostname}${A.path}", status ${U.statusCode}: ${U.statusMessage}`));return}U.on("error",T.callback);const x=b(U,"location");if(x!=null){y<this.maxRedirects?this.doDownload(p.prepareRedirectUrlOptions(x,A),T,y++):T.callback(this.createMaxRedirectError());return}T.responseHandler==null?O(T,U):T.responseHandler(U,T.callback)});this.addErrorAndTimeoutHandlers(M,T.callback,A.timeout),this.addRedirectHandlers(M,A,T.callback,y,U=>{this.doDownload(U,T,y++)}),M.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(A,T,y){A.on("socket",M=>{M.setTimeout(y,()=>{A.abort(),T(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(A,T){const y=g(A,{...T}),M=y.headers;if(M?.authorization){const U=new f.URL(A);(U.hostname.endsWith(".amazonaws.com")||U.searchParams.has("X-Amz-Credential"))&&delete M.authorization}return y}static retryOnServerError(A,T=3){for(let y=0;;y++)try{return A()}catch(M){if(y<T&&(M instanceof o&&M.isServerError()||M.code==="EPIPE"))continue;throw M}}}Be.HttpExecutor=p;function g(R,A){const T=I(A);return E(new f.URL(R),T),T}function E(R,A){A.protocol=R.protocol,A.hostname=R.hostname,R.port?A.port=R.port:A.port&&delete A.port,A.path=R.pathname+R.search}class m extends c.Transform{get actual(){return this._actual}constructor(A,T="sha512",y="base64"){super(),this.expected=A,this.algorithm=T,this.encoding=y,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,e.createHash)(T)}_transform(A,T,y){this.digester.update(A),y(null,A)}_flush(A){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(T){A(T);return}A(null)}validate(){if(this._actual==null)throw(0,s.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,s.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}Be.DigestTransform=m;function _(R,A,T){return R!=null&&A!=null&&R!==A?(T(new Error(`checksum mismatch: expected ${A} but got ${R} (X-Checksum-Sha2 header)`)),!1):!0}function b(R,A){const T=R.headers[A];return T==null?null:Array.isArray(T)?T.length===0?null:T[T.length-1]:T}function O(R,A){if(!_(b(A,"X-Checksum-Sha2"),R.options.sha2,R.callback))return;const T=[];if(R.options.onProgress!=null){const x=b(A,"content-length");x!=null&&T.push(new h.ProgressCallbackTransform(parseInt(x,10),R.options.cancellationToken,R.options.onProgress))}const y=R.options.sha512;y!=null?T.push(new m(y,"sha512",y.length===128&&!y.includes("+")&&!y.includes("Z")&&!y.includes("=")?"hex":"base64")):R.options.sha2!=null&&T.push(new m(R.options.sha2,"sha256","hex"));const M=(0,d.createWriteStream)(R.destination);T.push(M);let U=A;for(const x of T)x.on("error",q=>{M.close(),R.options.cancellationToken.cancelled||R.callback(q)}),U=U.pipe(x);M.on("finish",()=>{M.close(R.callback)})}function I(R,A,T){T!=null&&(R.method=T),R.headers={...R.headers};const y=R.headers;return A!=null&&(y.authorization=A.startsWith("Basic")||A.startsWith("Bearer")?A:`token ${A}`),y["User-Agent"]==null&&(y["User-Agent"]="electron-builder"),(T==null||T==="GET"||y["Cache-Control"]==null)&&(y["Cache-Control"]="no-cache"),R.protocol==null&&process.versions.electron!=null&&(R.protocol="https:"),R}function $(R,A){return JSON.stringify(R,(T,y)=>T.endsWith("Authorization")||T.endsWith("authorization")||T.endsWith("Password")||T.endsWith("PASSWORD")||T.endsWith("Token")||T.includes("password")||T.includes("token")||A!=null&&A.has(T)?"<stripped sensitive data>":y,2)}return Be}var Wt={},wo;function Jc(){if(wo)return Wt;wo=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.MemoLazy=void 0;let e=class{constructor(c,f){this.selector=c,this.creator=f,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const c=this.selector();if(this._value!==void 0&&l(this.selected,c))return this._value;this.selected=c;const f=this.creator(c);return this.value=f,f}set value(c){this._value=c}};Wt.MemoLazy=e;function l(d,c){if(typeof d=="object"&&d!==null&&(typeof c=="object"&&c!==null)){const s=Object.keys(d),h=Object.keys(c);return s.length===h.length&&s.every(i=>l(d[i],c[i]))}return d===c}return Wt}var Yt={},_o;function Kc(){if(_o)return Yt;_o=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.githubUrl=e,Yt.getS3LikeProviderBaseUrl=l;function e(u,s="github.com"){return`${u.protocol||"https"}://${u.host||s}`}function l(u){const s=u.provider;if(s==="s3")return d(u);if(s==="spaces")return f(u);throw new Error(`Not supported provider: ${s}`)}function d(u){let s;if(u.accelerate==!0)s=`https://${u.bucket}.s3-accelerate.amazonaws.com`;else if(u.endpoint!=null)s=`${u.endpoint}/${u.bucket}`;else if(u.bucket.includes(".")){if(u.region==null)throw new Error(`Bucket name "${u.bucket}" includes a dot, but S3 region is missing`);u.region==="us-east-1"?s=`https://s3.amazonaws.com/${u.bucket}`:s=`https://s3-${u.region}.amazonaws.com/${u.bucket}`}else u.region==="cn-north-1"?s=`https://${u.bucket}.s3.${u.region}.amazonaws.com.cn`:s=`https://${u.bucket}.s3.amazonaws.com`;return c(s,u.path)}function c(u,s){return s!=null&&s.length>0&&(s.startsWith("/")||(u+="/"),u+=s),u}function f(u){if(u.name==null)throw new Error("name is missing");if(u.region==null)throw new Error("region is missing");return c(`https://${u.name}.${u.region}.digitaloceanspaces.com`,u.path)}return Yt}var Pr={},So;function Qc(){if(So)return Pr;So=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.retry=l;const e=ia();async function l(d,c,f,u=0,s=0,h){var i;const n=new e.CancellationToken;try{return await d()}catch(t){if((!((i=h?.(t))!==null&&i!==void 0)||i)&&c>0&&!n.cancelled)return await new Promise(o=>setTimeout(o,f+u*s)),await l(d,c-1,f,u,s+1,h);throw t}}return Pr}var Nr={},Ao;function Zc(){if(Ao)return Nr;Ao=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.parseDn=e;function e(l){let d=!1,c=null,f="",u=0;l=l.trim();const s=new Map;for(let h=0;h<=l.length;h++){if(h===l.length){c!==null&&s.set(c,f);break}const i=l[h];if(d){if(i==='"'){d=!1;continue}}else{if(i==='"'){d=!0;continue}if(i==="\\"){h++;const n=parseInt(l.slice(h,h+2),16);Number.isNaN(n)?f+=l[h]:(h++,f+=String.fromCharCode(n));continue}if(c===null&&i==="="){c=f,f="";continue}if(i===","||i===";"||i==="+"){c!==null&&s.set(c,f),c=null,f="";continue}}if(i===" "&&!d){if(f.length===0)continue;if(h>u){let n=h;for(;l[n]===" ";)n++;u=n}if(u>=l.length||l[u]===","||l[u]===";"||c===null&&l[u]==="="||c!==null&&l[u]==="+"){h=u-1;continue}}f+=i}return s}return Nr}var bt={},To;function ef(){if(To)return bt;To=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.nil=bt.UUID=void 0;const e=pr,l=Gr(),d="options.name must be either a string or a Buffer",c=(0,e.randomBytes)(16);c[0]=c[0]|1;const f={},u=[];for(let o=0;o<256;o++){const a=(o+256).toString(16).substr(1);f[a]=o,u[o]=a}class s{constructor(a){this.ascii=null,this.binary=null;const p=s.check(a);if(!p)throw new Error("not a UUID");this.version=p.version,p.format==="ascii"?this.ascii=a:this.binary=a}static v5(a,p){return n(a,"sha1",80,p)}toString(){return this.ascii==null&&(this.ascii=t(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(a,p=0){if(typeof a=="string")return a=a.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(a)?a==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(f[a[14]+a[15]]&240)>>4,variant:h((f[a[19]+a[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(a)){if(a.length<p+16)return!1;let g=0;for(;g<16&&a[p+g]===0;g++);return g===16?{version:void 0,variant:"nil",format:"binary"}:{version:(a[p+6]&240)>>4,variant:h((a[p+8]&224)>>5),format:"binary"}}throw(0,l.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(a){const p=Buffer.allocUnsafe(16);let g=0;for(let E=0;E<16;E++)p[E]=f[a[g++]+a[g++]],(E===3||E===5||E===7||E===9)&&(g+=1);return p}}bt.UUID=s,s.OID=s.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function h(o){switch(o){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var i;(function(o){o[o.ASCII=0]="ASCII",o[o.BINARY=1]="BINARY",o[o.OBJECT=2]="OBJECT"})(i||(i={}));function n(o,a,p,g,E=i.ASCII){const m=(0,e.createHash)(a);if(typeof o!="string"&&!Buffer.isBuffer(o))throw(0,l.newError)(d,"ERR_INVALID_UUID_NAME");m.update(g),m.update(o);const b=m.digest();let O;switch(E){case i.BINARY:b[6]=b[6]&15|p,b[8]=b[8]&63|128,O=b;break;case i.OBJECT:b[6]=b[6]&15|p,b[8]=b[8]&63|128,O=new s(b);break;default:O=u[b[0]]+u[b[1]]+u[b[2]]+u[b[3]]+"-"+u[b[4]]+u[b[5]]+"-"+u[b[6]&15|p]+u[b[7]]+"-"+u[b[8]&63|128]+u[b[9]]+"-"+u[b[10]]+u[b[11]]+u[b[12]]+u[b[13]]+u[b[14]]+u[b[15]];break}return O}function t(o){return u[o[0]]+u[o[1]]+u[o[2]]+u[o[3]]+"-"+u[o[4]]+u[o[5]]+"-"+u[o[6]]+u[o[7]]+"-"+u[o[8]]+u[o[9]]+"-"+u[o[10]]+u[o[11]]+u[o[12]]+u[o[13]]+u[o[14]]+u[o[15]]}return bt.nil=new s("00000000-0000-0000-0000-000000000000"),bt}var Nt={},Un={},bo;function tf(){return bo||(bo=1,(function(e){(function(l){l.parser=function(S,v){return new c(S,v)},l.SAXParser=c,l.SAXStream=t,l.createStream=n,l.MAX_BUFFER_LENGTH=64*1024;var d=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];l.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function c(S,v){if(!(this instanceof c))return new c(S,v);var H=this;u(H),H.q=H.c="",H.bufferCheckPosition=l.MAX_BUFFER_LENGTH,H.opt=v||{},H.opt.lowercase=H.opt.lowercase||H.opt.lowercasetags,H.looseCase=H.opt.lowercase?"toLowerCase":"toUpperCase",H.tags=[],H.closed=H.closedRoot=H.sawRoot=!1,H.tag=H.error=null,H.strict=!!S,H.noscript=!!(S||H.opt.noscript),H.state=y.BEGIN,H.strictEntities=H.opt.strictEntities,H.ENTITIES=H.strictEntities?Object.create(l.XML_ENTITIES):Object.create(l.ENTITIES),H.attribList=[],H.opt.xmlns&&(H.ns=Object.create(E)),H.opt.unquotedAttributeValues===void 0&&(H.opt.unquotedAttributeValues=!S),H.trackPosition=H.opt.position!==!1,H.trackPosition&&(H.position=H.line=H.column=0),U(H,"onready")}Object.create||(Object.create=function(S){function v(){}v.prototype=S;var H=new v;return H}),Object.keys||(Object.keys=function(S){var v=[];for(var H in S)S.hasOwnProperty(H)&&v.push(H);return v});function f(S){for(var v=Math.max(l.MAX_BUFFER_LENGTH,10),H=0,D=0,le=d.length;D<le;D++){var me=S[d[D]].length;if(me>v)switch(d[D]){case"textNode":q(S);break;case"cdata":x(S,"oncdata",S.cdata),S.cdata="";break;case"script":x(S,"onscript",S.script),S.script="";break;default:P(S,"Max buffer length exceeded: "+d[D])}H=Math.max(H,me)}var pe=l.MAX_BUFFER_LENGTH-H;S.bufferCheckPosition=pe+S.position}function u(S){for(var v=0,H=d.length;v<H;v++)S[d[v]]=""}function s(S){q(S),S.cdata!==""&&(x(S,"oncdata",S.cdata),S.cdata=""),S.script!==""&&(x(S,"onscript",S.script),S.script="")}c.prototype={end:function(){F(this)},write:Ee,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var h;try{h=require("stream").Stream}catch{h=function(){}}h||(h=function(){});var i=l.EVENTS.filter(function(S){return S!=="error"&&S!=="end"});function n(S,v){return new t(S,v)}function t(S,v){if(!(this instanceof t))return new t(S,v);h.apply(this),this._parser=new c(S,v),this.writable=!0,this.readable=!0;var H=this;this._parser.onend=function(){H.emit("end")},this._parser.onerror=function(D){H.emit("error",D),H._parser.error=null},this._decoder=null,i.forEach(function(D){Object.defineProperty(H,"on"+D,{get:function(){return H._parser["on"+D]},set:function(le){if(!le)return H.removeAllListeners(D),H._parser["on"+D]=le,le;H.on(D,le)},enumerable:!0,configurable:!1})})}t.prototype=Object.create(h.prototype,{constructor:{value:t}}),t.prototype.write=function(S){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(S)){if(!this._decoder){var v=dc.StringDecoder;this._decoder=new v("utf8")}S=this._decoder.write(S)}return this._parser.write(S.toString()),this.emit("data",S),!0},t.prototype.end=function(S){return S&&S.length&&this.write(S),this._parser.end(),!0},t.prototype.on=function(S,v){var H=this;return!H._parser["on"+S]&&i.indexOf(S)!==-1&&(H._parser["on"+S]=function(){var D=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);D.splice(0,0,S),H.emit.apply(H,D)}),h.prototype.on.call(H,S,v)};var o="[CDATA[",a="DOCTYPE",p="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",E={xml:p,xmlns:g},m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,b=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function I(S){return S===" "||S===`
`||S==="\r"||S==="	"}function $(S){return S==='"'||S==="'"}function R(S){return S===">"||I(S)}function A(S,v){return S.test(v)}function T(S,v){return!A(S,v)}var y=0;l.STATE={BEGIN:y++,BEGIN_WHITESPACE:y++,TEXT:y++,TEXT_ENTITY:y++,OPEN_WAKA:y++,SGML_DECL:y++,SGML_DECL_QUOTED:y++,DOCTYPE:y++,DOCTYPE_QUOTED:y++,DOCTYPE_DTD:y++,DOCTYPE_DTD_QUOTED:y++,COMMENT_STARTING:y++,COMMENT:y++,COMMENT_ENDING:y++,COMMENT_ENDED:y++,CDATA:y++,CDATA_ENDING:y++,CDATA_ENDING_2:y++,PROC_INST:y++,PROC_INST_BODY:y++,PROC_INST_ENDING:y++,OPEN_TAG:y++,OPEN_TAG_SLASH:y++,ATTRIB:y++,ATTRIB_NAME:y++,ATTRIB_NAME_SAW_WHITE:y++,ATTRIB_VALUE:y++,ATTRIB_VALUE_QUOTED:y++,ATTRIB_VALUE_CLOSED:y++,ATTRIB_VALUE_UNQUOTED:y++,ATTRIB_VALUE_ENTITY_Q:y++,ATTRIB_VALUE_ENTITY_U:y++,CLOSE_TAG:y++,CLOSE_TAG_SAW_WHITE:y++,SCRIPT:y++,SCRIPT_ENDING:y++},l.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},l.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(l.ENTITIES).forEach(function(S){var v=l.ENTITIES[S],H=typeof v=="number"?String.fromCharCode(v):v;l.ENTITIES[S]=H});for(var M in l.STATE)l.STATE[l.STATE[M]]=M;y=l.STATE;function U(S,v,H){S[v]&&S[v](H)}function x(S,v,H){S.textNode&&q(S),U(S,v,H)}function q(S){S.textNode=N(S.opt,S.textNode),S.textNode&&U(S,"ontext",S.textNode),S.textNode=""}function N(S,v){return S.trim&&(v=v.trim()),S.normalize&&(v=v.replace(/\s+/g," ")),v}function P(S,v){return q(S),S.trackPosition&&(v+=`
Line: `+S.line+`
Column: `+S.column+`
Char: `+S.c),v=new Error(v),S.error=v,U(S,"onerror",v),S}function F(S){return S.sawRoot&&!S.closedRoot&&k(S,"Unclosed root tag"),S.state!==y.BEGIN&&S.state!==y.BEGIN_WHITESPACE&&S.state!==y.TEXT&&P(S,"Unexpected end"),q(S),S.c="",S.closed=!0,U(S,"onend"),c.call(S,S.strict,S.opt),S}function k(S,v){if(typeof S!="object"||!(S instanceof c))throw new Error("bad call to strictFail");S.strict&&P(S,v)}function K(S){S.strict||(S.tagName=S.tagName[S.looseCase]());var v=S.tags[S.tags.length-1]||S,H=S.tag={name:S.tagName,attributes:{}};S.opt.xmlns&&(H.ns=v.ns),S.attribList.length=0,x(S,"onopentagstart",H)}function W(S,v){var H=S.indexOf(":"),D=H<0?["",S]:S.split(":"),le=D[0],me=D[1];return v&&S==="xmlns"&&(le="xmlns",me=""),{prefix:le,local:me}}function ne(S){if(S.strict||(S.attribName=S.attribName[S.looseCase]()),S.attribList.indexOf(S.attribName)!==-1||S.tag.attributes.hasOwnProperty(S.attribName)){S.attribName=S.attribValue="";return}if(S.opt.xmlns){var v=W(S.attribName,!0),H=v.prefix,D=v.local;if(H==="xmlns")if(D==="xml"&&S.attribValue!==p)k(S,"xml: prefix must be bound to "+p+`
Actual: `+S.attribValue);else if(D==="xmlns"&&S.attribValue!==g)k(S,"xmlns: prefix must be bound to "+g+`
Actual: `+S.attribValue);else{var le=S.tag,me=S.tags[S.tags.length-1]||S;le.ns===me.ns&&(le.ns=Object.create(me.ns)),le.ns[D]=S.attribValue}S.attribList.push([S.attribName,S.attribValue])}else S.tag.attributes[S.attribName]=S.attribValue,x(S,"onattribute",{name:S.attribName,value:S.attribValue});S.attribName=S.attribValue=""}function ce(S,v){if(S.opt.xmlns){var H=S.tag,D=W(S.tagName);H.prefix=D.prefix,H.local=D.local,H.uri=H.ns[D.prefix]||"",H.prefix&&!H.uri&&(k(S,"Unbound namespace prefix: "+JSON.stringify(S.tagName)),H.uri=D.prefix);var le=S.tags[S.tags.length-1]||S;H.ns&&le.ns!==H.ns&&Object.keys(H.ns).forEach(function(B){x(S,"onopennamespace",{prefix:B,uri:H.ns[B]})});for(var me=0,pe=S.attribList.length;me<pe;me++){var _e=S.attribList[me],ye=_e[0],Le=_e[1],Ce=W(ye,!0),Me=Ce.prefix,gt=Ce.local,at=Me===""?"":H.ns[Me]||"",r={name:ye,value:Le,prefix:Me,local:gt,uri:at};Me&&Me!=="xmlns"&&!at&&(k(S,"Unbound namespace prefix: "+JSON.stringify(Me)),r.uri=Me),S.tag.attributes[ye]=r,x(S,"onattribute",r)}S.attribList.length=0}S.tag.isSelfClosing=!!v,S.sawRoot=!0,S.tags.push(S.tag),x(S,"onopentag",S.tag),v||(!S.noscript&&S.tagName.toLowerCase()==="script"?S.state=y.SCRIPT:S.state=y.TEXT,S.tag=null,S.tagName=""),S.attribName=S.attribValue="",S.attribList.length=0}function ue(S){if(!S.tagName){k(S,"Weird empty close tag."),S.textNode+="</>",S.state=y.TEXT;return}if(S.script){if(S.tagName!=="script"){S.script+="</"+S.tagName+">",S.tagName="",S.state=y.SCRIPT;return}x(S,"onscript",S.script),S.script=""}var v=S.tags.length,H=S.tagName;S.strict||(H=H[S.looseCase]());for(var D=H;v--;){var le=S.tags[v];if(le.name!==D)k(S,"Unexpected close tag");else break}if(v<0){k(S,"Unmatched closing tag: "+S.tagName),S.textNode+="</"+S.tagName+">",S.state=y.TEXT;return}S.tagName=H;for(var me=S.tags.length;me-- >v;){var pe=S.tag=S.tags.pop();S.tagName=S.tag.name,x(S,"onclosetag",S.tagName);var _e={};for(var ye in pe.ns)_e[ye]=pe.ns[ye];var Le=S.tags[S.tags.length-1]||S;S.opt.xmlns&&pe.ns!==Le.ns&&Object.keys(pe.ns).forEach(function(Ce){var Me=pe.ns[Ce];x(S,"onclosenamespace",{prefix:Ce,uri:Me})})}v===0&&(S.closedRoot=!0),S.tagName=S.attribValue=S.attribName="",S.attribList.length=0,S.state=y.TEXT}function ie(S){var v=S.entity,H=v.toLowerCase(),D,le="";return S.ENTITIES[v]?S.ENTITIES[v]:S.ENTITIES[H]?S.ENTITIES[H]:(v=H,v.charAt(0)==="#"&&(v.charAt(1)==="x"?(v=v.slice(2),D=parseInt(v,16),le=D.toString(16)):(v=v.slice(1),D=parseInt(v,10),le=D.toString(10))),v=v.replace(/^0+/,""),isNaN(D)||le.toLowerCase()!==v||D<0||D>1114111?(k(S,"Invalid character entity"),"&"+S.entity+";"):String.fromCodePoint(D))}function Te(S,v){v==="<"?(S.state=y.OPEN_WAKA,S.startTagPosition=S.position):I(v)||(k(S,"Non-whitespace before first tag."),S.textNode=v,S.state=y.TEXT)}function J(S,v){var H="";return v<S.length&&(H=S.charAt(v)),H}function Ee(S){var v=this;if(this.error)throw this.error;if(v.closed)return P(v,"Cannot write after close. Assign an onready handler.");if(S===null)return F(v);typeof S=="object"&&(S=S.toString());for(var H=0,D="";D=J(S,H++),v.c=D,!!D;)switch(v.trackPosition&&(v.position++,D===`
`?(v.line++,v.column=0):v.column++),v.state){case y.BEGIN:if(v.state=y.BEGIN_WHITESPACE,D==="\uFEFF")continue;Te(v,D);continue;case y.BEGIN_WHITESPACE:Te(v,D);continue;case y.TEXT:if(v.sawRoot&&!v.closedRoot){for(var me=H-1;D&&D!=="<"&&D!=="&";)D=J(S,H++),D&&v.trackPosition&&(v.position++,D===`
`?(v.line++,v.column=0):v.column++);v.textNode+=S.substring(me,H-1)}D==="<"&&!(v.sawRoot&&v.closedRoot&&!v.strict)?(v.state=y.OPEN_WAKA,v.startTagPosition=v.position):(!I(D)&&(!v.sawRoot||v.closedRoot)&&k(v,"Text data outside of root node."),D==="&"?v.state=y.TEXT_ENTITY:v.textNode+=D);continue;case y.SCRIPT:D==="<"?v.state=y.SCRIPT_ENDING:v.script+=D;continue;case y.SCRIPT_ENDING:D==="/"?v.state=y.CLOSE_TAG:(v.script+="<"+D,v.state=y.SCRIPT);continue;case y.OPEN_WAKA:if(D==="!")v.state=y.SGML_DECL,v.sgmlDecl="";else if(!I(D))if(A(m,D))v.state=y.OPEN_TAG,v.tagName=D;else if(D==="/")v.state=y.CLOSE_TAG,v.tagName="";else if(D==="?")v.state=y.PROC_INST,v.procInstName=v.procInstBody="";else{if(k(v,"Unencoded <"),v.startTagPosition+1<v.position){var le=v.position-v.startTagPosition;D=new Array(le).join(" ")+D}v.textNode+="<"+D,v.state=y.TEXT}continue;case y.SGML_DECL:if(v.sgmlDecl+D==="--"){v.state=y.COMMENT,v.comment="",v.sgmlDecl="";continue}v.doctype&&v.doctype!==!0&&v.sgmlDecl?(v.state=y.DOCTYPE_DTD,v.doctype+="<!"+v.sgmlDecl+D,v.sgmlDecl=""):(v.sgmlDecl+D).toUpperCase()===o?(x(v,"onopencdata"),v.state=y.CDATA,v.sgmlDecl="",v.cdata=""):(v.sgmlDecl+D).toUpperCase()===a?(v.state=y.DOCTYPE,(v.doctype||v.sawRoot)&&k(v,"Inappropriately located doctype declaration"),v.doctype="",v.sgmlDecl=""):D===">"?(x(v,"onsgmldeclaration",v.sgmlDecl),v.sgmlDecl="",v.state=y.TEXT):($(D)&&(v.state=y.SGML_DECL_QUOTED),v.sgmlDecl+=D);continue;case y.SGML_DECL_QUOTED:D===v.q&&(v.state=y.SGML_DECL,v.q=""),v.sgmlDecl+=D;continue;case y.DOCTYPE:D===">"?(v.state=y.TEXT,x(v,"ondoctype",v.doctype),v.doctype=!0):(v.doctype+=D,D==="["?v.state=y.DOCTYPE_DTD:$(D)&&(v.state=y.DOCTYPE_QUOTED,v.q=D));continue;case y.DOCTYPE_QUOTED:v.doctype+=D,D===v.q&&(v.q="",v.state=y.DOCTYPE);continue;case y.DOCTYPE_DTD:D==="]"?(v.doctype+=D,v.state=y.DOCTYPE):D==="<"?(v.state=y.OPEN_WAKA,v.startTagPosition=v.position):$(D)?(v.doctype+=D,v.state=y.DOCTYPE_DTD_QUOTED,v.q=D):v.doctype+=D;continue;case y.DOCTYPE_DTD_QUOTED:v.doctype+=D,D===v.q&&(v.state=y.DOCTYPE_DTD,v.q="");continue;case y.COMMENT:D==="-"?v.state=y.COMMENT_ENDING:v.comment+=D;continue;case y.COMMENT_ENDING:D==="-"?(v.state=y.COMMENT_ENDED,v.comment=N(v.opt,v.comment),v.comment&&x(v,"oncomment",v.comment),v.comment=""):(v.comment+="-"+D,v.state=y.COMMENT);continue;case y.COMMENT_ENDED:D!==">"?(k(v,"Malformed comment"),v.comment+="--"+D,v.state=y.COMMENT):v.doctype&&v.doctype!==!0?v.state=y.DOCTYPE_DTD:v.state=y.TEXT;continue;case y.CDATA:for(var me=H-1;D&&D!=="]";)D=J(S,H++),D&&v.trackPosition&&(v.position++,D===`
`?(v.line++,v.column=0):v.column++);v.cdata+=S.substring(me,H-1),D==="]"&&(v.state=y.CDATA_ENDING);continue;case y.CDATA_ENDING:D==="]"?v.state=y.CDATA_ENDING_2:(v.cdata+="]"+D,v.state=y.CDATA);continue;case y.CDATA_ENDING_2:D===">"?(v.cdata&&x(v,"oncdata",v.cdata),x(v,"onclosecdata"),v.cdata="",v.state=y.TEXT):D==="]"?v.cdata+="]":(v.cdata+="]]"+D,v.state=y.CDATA);continue;case y.PROC_INST:D==="?"?v.state=y.PROC_INST_ENDING:I(D)?v.state=y.PROC_INST_BODY:v.procInstName+=D;continue;case y.PROC_INST_BODY:if(!v.procInstBody&&I(D))continue;D==="?"?v.state=y.PROC_INST_ENDING:v.procInstBody+=D;continue;case y.PROC_INST_ENDING:D===">"?(x(v,"onprocessinginstruction",{name:v.procInstName,body:v.procInstBody}),v.procInstName=v.procInstBody="",v.state=y.TEXT):(v.procInstBody+="?"+D,v.state=y.PROC_INST_BODY);continue;case y.OPEN_TAG:A(_,D)?v.tagName+=D:(K(v),D===">"?ce(v):D==="/"?v.state=y.OPEN_TAG_SLASH:(I(D)||k(v,"Invalid character in tag name"),v.state=y.ATTRIB));continue;case y.OPEN_TAG_SLASH:D===">"?(ce(v,!0),ue(v)):(k(v,"Forward-slash in opening tag not followed by >"),v.state=y.ATTRIB);continue;case y.ATTRIB:if(I(D))continue;D===">"?ce(v):D==="/"?v.state=y.OPEN_TAG_SLASH:A(m,D)?(v.attribName=D,v.attribValue="",v.state=y.ATTRIB_NAME):k(v,"Invalid attribute name");continue;case y.ATTRIB_NAME:D==="="?v.state=y.ATTRIB_VALUE:D===">"?(k(v,"Attribute without value"),v.attribValue=v.attribName,ne(v),ce(v)):I(D)?v.state=y.ATTRIB_NAME_SAW_WHITE:A(_,D)?v.attribName+=D:k(v,"Invalid attribute name");continue;case y.ATTRIB_NAME_SAW_WHITE:if(D==="=")v.state=y.ATTRIB_VALUE;else{if(I(D))continue;k(v,"Attribute without value"),v.tag.attributes[v.attribName]="",v.attribValue="",x(v,"onattribute",{name:v.attribName,value:""}),v.attribName="",D===">"?ce(v):A(m,D)?(v.attribName=D,v.state=y.ATTRIB_NAME):(k(v,"Invalid attribute name"),v.state=y.ATTRIB)}continue;case y.ATTRIB_VALUE:if(I(D))continue;$(D)?(v.q=D,v.state=y.ATTRIB_VALUE_QUOTED):(v.opt.unquotedAttributeValues||P(v,"Unquoted attribute value"),v.state=y.ATTRIB_VALUE_UNQUOTED,v.attribValue=D);continue;case y.ATTRIB_VALUE_QUOTED:if(D!==v.q){D==="&"?v.state=y.ATTRIB_VALUE_ENTITY_Q:v.attribValue+=D;continue}ne(v),v.q="",v.state=y.ATTRIB_VALUE_CLOSED;continue;case y.ATTRIB_VALUE_CLOSED:I(D)?v.state=y.ATTRIB:D===">"?ce(v):D==="/"?v.state=y.OPEN_TAG_SLASH:A(m,D)?(k(v,"No whitespace between attributes"),v.attribName=D,v.attribValue="",v.state=y.ATTRIB_NAME):k(v,"Invalid attribute name");continue;case y.ATTRIB_VALUE_UNQUOTED:if(!R(D)){D==="&"?v.state=y.ATTRIB_VALUE_ENTITY_U:v.attribValue+=D;continue}ne(v),D===">"?ce(v):v.state=y.ATTRIB;continue;case y.CLOSE_TAG:if(v.tagName)D===">"?ue(v):A(_,D)?v.tagName+=D:v.script?(v.script+="</"+v.tagName,v.tagName="",v.state=y.SCRIPT):(I(D)||k(v,"Invalid tagname in closing tag"),v.state=y.CLOSE_TAG_SAW_WHITE);else{if(I(D))continue;T(m,D)?v.script?(v.script+="</"+D,v.state=y.SCRIPT):k(v,"Invalid tagname in closing tag."):v.tagName=D}continue;case y.CLOSE_TAG_SAW_WHITE:if(I(D))continue;D===">"?ue(v):k(v,"Invalid characters in closing tag");continue;case y.TEXT_ENTITY:case y.ATTRIB_VALUE_ENTITY_Q:case y.ATTRIB_VALUE_ENTITY_U:var pe,_e;switch(v.state){case y.TEXT_ENTITY:pe=y.TEXT,_e="textNode";break;case y.ATTRIB_VALUE_ENTITY_Q:pe=y.ATTRIB_VALUE_QUOTED,_e="attribValue";break;case y.ATTRIB_VALUE_ENTITY_U:pe=y.ATTRIB_VALUE_UNQUOTED,_e="attribValue";break}if(D===";"){var ye=ie(v);v.opt.unparsedEntities&&!Object.values(l.XML_ENTITIES).includes(ye)?(v.entity="",v.state=pe,v.write(ye)):(v[_e]+=ye,v.entity="",v.state=pe)}else A(v.entity.length?O:b,D)?v.entity+=D:(k(v,"Invalid character in entity name"),v[_e]+="&"+v.entity+D,v.entity="",v.state=pe);continue;default:throw new Error(v,"Unknown state: "+v.state)}return v.position>=v.bufferCheckPosition&&f(v),v}String.fromCodePoint||(function(){var S=String.fromCharCode,v=Math.floor,H=function(){var D=16384,le=[],me,pe,_e=-1,ye=arguments.length;if(!ye)return"";for(var Le="";++_e<ye;){var Ce=Number(arguments[_e]);if(!isFinite(Ce)||Ce<0||Ce>1114111||v(Ce)!==Ce)throw RangeError("Invalid code point: "+Ce);Ce<=65535?le.push(Ce):(Ce-=65536,me=(Ce>>10)+55296,pe=Ce%1024+56320,le.push(me,pe)),(_e+1===ye||le.length>D)&&(Le+=S.apply(null,le),le.length=0)}return Le};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:H,configurable:!0,writable:!0}):String.fromCodePoint=H})()})(e)})(Un)),Un}var Ro;function rf(){if(Ro)return Nt;Ro=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.XElement=void 0,Nt.parseXml=s;const e=tf(),l=Gr();class d{constructor(i){if(this.name=i,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!i)throw(0,l.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!f(i))throw(0,l.newError)(`Invalid element name: ${i}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(i){const n=this.attributes===null?null:this.attributes[i];if(n==null)throw(0,l.newError)(`No attribute "${i}"`,"ERR_XML_MISSED_ATTRIBUTE");return n}removeAttribute(i){this.attributes!==null&&delete this.attributes[i]}element(i,n=!1,t=null){const o=this.elementOrNull(i,n);if(o===null)throw(0,l.newError)(t||`No element "${i}"`,"ERR_XML_MISSED_ELEMENT");return o}elementOrNull(i,n=!1){if(this.elements===null)return null;for(const t of this.elements)if(u(t,i,n))return t;return null}getElements(i,n=!1){return this.elements===null?[]:this.elements.filter(t=>u(t,i,n))}elementValueOrEmpty(i,n=!1){const t=this.elementOrNull(i,n);return t===null?"":t.value}}Nt.XElement=d;const c=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function f(h){return c.test(h)}function u(h,i,n){const t=h.name;return t===i||n===!0&&t.length===i.length&&t.toLowerCase()===i.toLowerCase()}function s(h){let i=null;const n=e.parser(!0,{}),t=[];return n.onopentag=o=>{const a=new d(o.name);if(a.attributes=o.attributes,i===null)i=a;else{const p=t[t.length-1];p.elements==null&&(p.elements=[]),p.elements.push(a)}t.push(a)},n.onclosetag=()=>{t.pop()},n.ontext=o=>{t.length>0&&(t[t.length-1].value=o)},n.oncdata=o=>{const a=t[t.length-1];a.value=o,a.isCData=!0},n.onerror=o=>{throw o},n.write(h),i}return Nt}var Co;function qe(){return Co||(Co=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CURRENT_APP_PACKAGE_FILE_NAME=e.CURRENT_APP_INSTALLER_FILE_NAME=e.XElement=e.parseXml=e.UUID=e.parseDn=e.retry=e.githubUrl=e.getS3LikeProviderBaseUrl=e.ProgressCallbackTransform=e.MemoLazy=e.safeStringifyJson=e.safeGetHeader=e.parseJson=e.HttpExecutor=e.HttpError=e.DigestTransform=e.createHttpError=e.configureRequestUrl=e.configureRequestOptionsFromUrl=e.configureRequestOptions=e.newError=e.CancellationToken=e.CancellationError=void 0,e.asArray=o;var l=ia();Object.defineProperty(e,"CancellationError",{enumerable:!0,get:function(){return l.CancellationError}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return l.CancellationToken}});var d=Gr();Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return d.newError}});var c=Xc();Object.defineProperty(e,"configureRequestOptions",{enumerable:!0,get:function(){return c.configureRequestOptions}}),Object.defineProperty(e,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return c.configureRequestOptionsFromUrl}}),Object.defineProperty(e,"configureRequestUrl",{enumerable:!0,get:function(){return c.configureRequestUrl}}),Object.defineProperty(e,"createHttpError",{enumerable:!0,get:function(){return c.createHttpError}}),Object.defineProperty(e,"DigestTransform",{enumerable:!0,get:function(){return c.DigestTransform}}),Object.defineProperty(e,"HttpError",{enumerable:!0,get:function(){return c.HttpError}}),Object.defineProperty(e,"HttpExecutor",{enumerable:!0,get:function(){return c.HttpExecutor}}),Object.defineProperty(e,"parseJson",{enumerable:!0,get:function(){return c.parseJson}}),Object.defineProperty(e,"safeGetHeader",{enumerable:!0,get:function(){return c.safeGetHeader}}),Object.defineProperty(e,"safeStringifyJson",{enumerable:!0,get:function(){return c.safeStringifyJson}});var f=Jc();Object.defineProperty(e,"MemoLazy",{enumerable:!0,get:function(){return f.MemoLazy}});var u=$l();Object.defineProperty(e,"ProgressCallbackTransform",{enumerable:!0,get:function(){return u.ProgressCallbackTransform}});var s=Kc();Object.defineProperty(e,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return s.getS3LikeProviderBaseUrl}}),Object.defineProperty(e,"githubUrl",{enumerable:!0,get:function(){return s.githubUrl}});var h=Qc();Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return h.retry}});var i=Zc();Object.defineProperty(e,"parseDn",{enumerable:!0,get:function(){return i.parseDn}});var n=ef();Object.defineProperty(e,"UUID",{enumerable:!0,get:function(){return n.UUID}});var t=rf();Object.defineProperty(e,"parseXml",{enumerable:!0,get:function(){return t.parseXml}}),Object.defineProperty(e,"XElement",{enumerable:!0,get:function(){return t.XElement}}),e.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",e.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function o(a){return a==null?[]:Array.isArray(a)?a:[a]}})(Pn)),Pn}var He={},Fr={},ht={},Oo;function mr(){if(Oo)return ht;Oo=1;function e(s){return typeof s>"u"||s===null}function l(s){return typeof s=="object"&&s!==null}function d(s){return Array.isArray(s)?s:e(s)?[]:[s]}function c(s,h){var i,n,t,o;if(h)for(o=Object.keys(h),i=0,n=o.length;i<n;i+=1)t=o[i],s[t]=h[t];return s}function f(s,h){var i="",n;for(n=0;n<h;n+=1)i+=s;return i}function u(s){return s===0&&Number.NEGATIVE_INFINITY===1/s}return ht.isNothing=e,ht.isObject=l,ht.toArray=d,ht.repeat=f,ht.isNegativeZero=u,ht.extend=c,ht}var kn,Io;function gr(){if(Io)return kn;Io=1;function e(d,c){var f="",u=d.reason||"(unknown reason)";return d.mark?(d.mark.name&&(f+='in "'+d.mark.name+'" '),f+="("+(d.mark.line+1)+":"+(d.mark.column+1)+")",!c&&d.mark.snippet&&(f+=`

`+d.mark.snippet),u+" "+f):u}function l(d,c){Error.call(this),this.name="YAMLException",this.reason=d,this.mark=c,this.message=e(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}return l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.toString=function(c){return this.name+": "+e(this,c)},kn=l,kn}var qn,Do;function nf(){if(Do)return qn;Do=1;var e=mr();function l(f,u,s,h,i){var n="",t="",o=Math.floor(i/2)-1;return h-u>o&&(n=" ... ",u=h-o+n.length),s-h>o&&(t=" ...",s=h+o-t.length),{str:n+f.slice(u,s).replace(/\t/g,"")+t,pos:h-u+n.length}}function d(f,u){return e.repeat(" ",u-f.length)+f}function c(f,u){if(u=Object.create(u||null),!f.buffer)return null;u.maxLength||(u.maxLength=79),typeof u.indent!="number"&&(u.indent=1),typeof u.linesBefore!="number"&&(u.linesBefore=3),typeof u.linesAfter!="number"&&(u.linesAfter=2);for(var s=/\r?\n|\r|\0/g,h=[0],i=[],n,t=-1;n=s.exec(f.buffer);)i.push(n.index),h.push(n.index+n[0].length),f.position<=n.index&&t<0&&(t=h.length-2);t<0&&(t=h.length-1);var o="",a,p,g=Math.min(f.line+u.linesAfter,i.length).toString().length,E=u.maxLength-(u.indent+g+3);for(a=1;a<=u.linesBefore&&!(t-a<0);a++)p=l(f.buffer,h[t-a],i[t-a],f.position-(h[t]-h[t-a]),E),o=e.repeat(" ",u.indent)+d((f.line-a+1).toString(),g)+" | "+p.str+`
`+o;for(p=l(f.buffer,h[t],i[t],f.position,E),o+=e.repeat(" ",u.indent)+d((f.line+1).toString(),g)+" | "+p.str+`
`,o+=e.repeat("-",u.indent+g+3+p.pos)+`^
`,a=1;a<=u.linesAfter&&!(t+a>=i.length);a++)p=l(f.buffer,h[t+a],i[t+a],f.position-(h[t]-h[t+a]),E),o+=e.repeat(" ",u.indent)+d((f.line+a+1).toString(),g)+" | "+p.str+`
`;return o.replace(/\n$/,"")}return qn=c,qn}var Mn,Po;function je(){if(Po)return Mn;Po=1;var e=gr(),l=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],d=["scalar","sequence","mapping"];function c(u){var s={};return u!==null&&Object.keys(u).forEach(function(h){u[h].forEach(function(i){s[String(i)]=h})}),s}function f(u,s){if(s=s||{},Object.keys(s).forEach(function(h){if(l.indexOf(h)===-1)throw new e('Unknown option "'+h+'" is met in definition of "'+u+'" YAML type.')}),this.options=s,this.tag=u,this.kind=s.kind||null,this.resolve=s.resolve||function(){return!0},this.construct=s.construct||function(h){return h},this.instanceOf=s.instanceOf||null,this.predicate=s.predicate||null,this.represent=s.represent||null,this.representName=s.representName||null,this.defaultStyle=s.defaultStyle||null,this.multi=s.multi||!1,this.styleAliases=c(s.styleAliases||null),d.indexOf(this.kind)===-1)throw new e('Unknown kind "'+this.kind+'" is specified for "'+u+'" YAML type.')}return Mn=f,Mn}var $n,No;function Bl(){if(No)return $n;No=1;var e=gr(),l=je();function d(u,s){var h=[];return u[s].forEach(function(i){var n=h.length;h.forEach(function(t,o){t.tag===i.tag&&t.kind===i.kind&&t.multi===i.multi&&(n=o)}),h[n]=i}),h}function c(){var u={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},s,h;function i(n){n.multi?(u.multi[n.kind].push(n),u.multi.fallback.push(n)):u[n.kind][n.tag]=u.fallback[n.tag]=n}for(s=0,h=arguments.length;s<h;s+=1)arguments[s].forEach(i);return u}function f(u){return this.extend(u)}return f.prototype.extend=function(s){var h=[],i=[];if(s instanceof l)i.push(s);else if(Array.isArray(s))i=i.concat(s);else if(s&&(Array.isArray(s.implicit)||Array.isArray(s.explicit)))s.implicit&&(h=h.concat(s.implicit)),s.explicit&&(i=i.concat(s.explicit));else throw new e("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");h.forEach(function(t){if(!(t instanceof l))throw new e("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(t.loadKind&&t.loadKind!=="scalar")throw new e("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(t.multi)throw new e("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(t){if(!(t instanceof l))throw new e("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var n=Object.create(f.prototype);return n.implicit=(this.implicit||[]).concat(h),n.explicit=(this.explicit||[]).concat(i),n.compiledImplicit=d(n,"implicit"),n.compiledExplicit=d(n,"explicit"),n.compiledTypeMap=c(n.compiledImplicit,n.compiledExplicit),n},$n=f,$n}var Bn,Fo;function Hl(){if(Fo)return Bn;Fo=1;var e=je();return Bn=new e("tag:yaml.org,2002:str",{kind:"scalar",construct:function(l){return l!==null?l:""}}),Bn}var Hn,Lo;function jl(){if(Lo)return Hn;Lo=1;var e=je();return Hn=new e("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(l){return l!==null?l:[]}}),Hn}var jn,xo;function Gl(){if(xo)return jn;xo=1;var e=je();return jn=new e("tag:yaml.org,2002:map",{kind:"mapping",construct:function(l){return l!==null?l:{}}}),jn}var Gn,Uo;function Wl(){if(Uo)return Gn;Uo=1;var e=Bl();return Gn=new e({explicit:[Hl(),jl(),Gl()]}),Gn}var Wn,ko;function Yl(){if(ko)return Wn;ko=1;var e=je();function l(f){if(f===null)return!0;var u=f.length;return u===1&&f==="~"||u===4&&(f==="null"||f==="Null"||f==="NULL")}function d(){return null}function c(f){return f===null}return Wn=new e("tag:yaml.org,2002:null",{kind:"scalar",resolve:l,construct:d,predicate:c,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Wn}var Yn,qo;function Vl(){if(qo)return Yn;qo=1;var e=je();function l(f){if(f===null)return!1;var u=f.length;return u===4&&(f==="true"||f==="True"||f==="TRUE")||u===5&&(f==="false"||f==="False"||f==="FALSE")}function d(f){return f==="true"||f==="True"||f==="TRUE"}function c(f){return Object.prototype.toString.call(f)==="[object Boolean]"}return Yn=new e("tag:yaml.org,2002:bool",{kind:"scalar",resolve:l,construct:d,predicate:c,represent:{lowercase:function(f){return f?"true":"false"},uppercase:function(f){return f?"TRUE":"FALSE"},camelcase:function(f){return f?"True":"False"}},defaultStyle:"lowercase"}),Yn}var Vn,Mo;function zl(){if(Mo)return Vn;Mo=1;var e=mr(),l=je();function d(i){return 48<=i&&i<=57||65<=i&&i<=70||97<=i&&i<=102}function c(i){return 48<=i&&i<=55}function f(i){return 48<=i&&i<=57}function u(i){if(i===null)return!1;var n=i.length,t=0,o=!1,a;if(!n)return!1;if(a=i[t],(a==="-"||a==="+")&&(a=i[++t]),a==="0"){if(t+1===n)return!0;if(a=i[++t],a==="b"){for(t++;t<n;t++)if(a=i[t],a!=="_"){if(a!=="0"&&a!=="1")return!1;o=!0}return o&&a!=="_"}if(a==="x"){for(t++;t<n;t++)if(a=i[t],a!=="_"){if(!d(i.charCodeAt(t)))return!1;o=!0}return o&&a!=="_"}if(a==="o"){for(t++;t<n;t++)if(a=i[t],a!=="_"){if(!c(i.charCodeAt(t)))return!1;o=!0}return o&&a!=="_"}}if(a==="_")return!1;for(;t<n;t++)if(a=i[t],a!=="_"){if(!f(i.charCodeAt(t)))return!1;o=!0}return!(!o||a==="_")}function s(i){var n=i,t=1,o;if(n.indexOf("_")!==-1&&(n=n.replace(/_/g,"")),o=n[0],(o==="-"||o==="+")&&(o==="-"&&(t=-1),n=n.slice(1),o=n[0]),n==="0")return 0;if(o==="0"){if(n[1]==="b")return t*parseInt(n.slice(2),2);if(n[1]==="x")return t*parseInt(n.slice(2),16);if(n[1]==="o")return t*parseInt(n.slice(2),8)}return t*parseInt(n,10)}function h(i){return Object.prototype.toString.call(i)==="[object Number]"&&i%1===0&&!e.isNegativeZero(i)}return Vn=new l("tag:yaml.org,2002:int",{kind:"scalar",resolve:u,construct:s,predicate:h,represent:{binary:function(i){return i>=0?"0b"+i.toString(2):"-0b"+i.toString(2).slice(1)},octal:function(i){return i>=0?"0o"+i.toString(8):"-0o"+i.toString(8).slice(1)},decimal:function(i){return i.toString(10)},hexadecimal:function(i){return i>=0?"0x"+i.toString(16).toUpperCase():"-0x"+i.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Vn}var zn,$o;function Xl(){if($o)return zn;$o=1;var e=mr(),l=je(),d=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function c(i){return!(i===null||!d.test(i)||i[i.length-1]==="_")}function f(i){var n,t;return n=i.replace(/_/g,"").toLowerCase(),t=n[0]==="-"?-1:1,"+-".indexOf(n[0])>=0&&(n=n.slice(1)),n===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:n===".nan"?NaN:t*parseFloat(n,10)}var u=/^[-+]?[0-9]+e/;function s(i,n){var t;if(isNaN(i))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===i)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===i)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(e.isNegativeZero(i))return"-0.0";return t=i.toString(10),u.test(t)?t.replace("e",".e"):t}function h(i){return Object.prototype.toString.call(i)==="[object Number]"&&(i%1!==0||e.isNegativeZero(i))}return zn=new l("tag:yaml.org,2002:float",{kind:"scalar",resolve:c,construct:f,predicate:h,represent:s,defaultStyle:"lowercase"}),zn}var Xn,Bo;function Jl(){return Bo||(Bo=1,Xn=Wl().extend({implicit:[Yl(),Vl(),zl(),Xl()]})),Xn}var Jn,Ho;function Kl(){return Ho||(Ho=1,Jn=Jl()),Jn}var Kn,jo;function Ql(){if(jo)return Kn;jo=1;var e=je(),l=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),d=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function c(s){return s===null?!1:l.exec(s)!==null||d.exec(s)!==null}function f(s){var h,i,n,t,o,a,p,g=0,E=null,m,_,b;if(h=l.exec(s),h===null&&(h=d.exec(s)),h===null)throw new Error("Date resolve error");if(i=+h[1],n=+h[2]-1,t=+h[3],!h[4])return new Date(Date.UTC(i,n,t));if(o=+h[4],a=+h[5],p=+h[6],h[7]){for(g=h[7].slice(0,3);g.length<3;)g+="0";g=+g}return h[9]&&(m=+h[10],_=+(h[11]||0),E=(m*60+_)*6e4,h[9]==="-"&&(E=-E)),b=new Date(Date.UTC(i,n,t,o,a,p,g)),E&&b.setTime(b.getTime()-E),b}function u(s){return s.toISOString()}return Kn=new e("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:c,construct:f,instanceOf:Date,represent:u}),Kn}var Qn,Go;function Zl(){if(Go)return Qn;Go=1;var e=je();function l(d){return d==="<<"||d===null}return Qn=new e("tag:yaml.org,2002:merge",{kind:"scalar",resolve:l}),Qn}var Zn,Wo;function eu(){if(Wo)return Zn;Wo=1;var e=je(),l=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function d(s){if(s===null)return!1;var h,i,n=0,t=s.length,o=l;for(i=0;i<t;i++)if(h=o.indexOf(s.charAt(i)),!(h>64)){if(h<0)return!1;n+=6}return n%8===0}function c(s){var h,i,n=s.replace(/[\r\n=]/g,""),t=n.length,o=l,a=0,p=[];for(h=0;h<t;h++)h%4===0&&h&&(p.push(a>>16&255),p.push(a>>8&255),p.push(a&255)),a=a<<6|o.indexOf(n.charAt(h));return i=t%4*6,i===0?(p.push(a>>16&255),p.push(a>>8&255),p.push(a&255)):i===18?(p.push(a>>10&255),p.push(a>>2&255)):i===12&&p.push(a>>4&255),new Uint8Array(p)}function f(s){var h="",i=0,n,t,o=s.length,a=l;for(n=0;n<o;n++)n%3===0&&n&&(h+=a[i>>18&63],h+=a[i>>12&63],h+=a[i>>6&63],h+=a[i&63]),i=(i<<8)+s[n];return t=o%3,t===0?(h+=a[i>>18&63],h+=a[i>>12&63],h+=a[i>>6&63],h+=a[i&63]):t===2?(h+=a[i>>10&63],h+=a[i>>4&63],h+=a[i<<2&63],h+=a[64]):t===1&&(h+=a[i>>2&63],h+=a[i<<4&63],h+=a[64],h+=a[64]),h}function u(s){return Object.prototype.toString.call(s)==="[object Uint8Array]"}return Zn=new e("tag:yaml.org,2002:binary",{kind:"scalar",resolve:d,construct:c,predicate:u,represent:f}),Zn}var ei,Yo;function tu(){if(Yo)return ei;Yo=1;var e=je(),l=Object.prototype.hasOwnProperty,d=Object.prototype.toString;function c(u){if(u===null)return!0;var s=[],h,i,n,t,o,a=u;for(h=0,i=a.length;h<i;h+=1){if(n=a[h],o=!1,d.call(n)!=="[object Object]")return!1;for(t in n)if(l.call(n,t))if(!o)o=!0;else return!1;if(!o)return!1;if(s.indexOf(t)===-1)s.push(t);else return!1}return!0}function f(u){return u!==null?u:[]}return ei=new e("tag:yaml.org,2002:omap",{kind:"sequence",resolve:c,construct:f}),ei}var ti,Vo;function ru(){if(Vo)return ti;Vo=1;var e=je(),l=Object.prototype.toString;function d(f){if(f===null)return!0;var u,s,h,i,n,t=f;for(n=new Array(t.length),u=0,s=t.length;u<s;u+=1){if(h=t[u],l.call(h)!=="[object Object]"||(i=Object.keys(h),i.length!==1))return!1;n[u]=[i[0],h[i[0]]]}return!0}function c(f){if(f===null)return[];var u,s,h,i,n,t=f;for(n=new Array(t.length),u=0,s=t.length;u<s;u+=1)h=t[u],i=Object.keys(h),n[u]=[i[0],h[i[0]]];return n}return ti=new e("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:d,construct:c}),ti}var ri,zo;function nu(){if(zo)return ri;zo=1;var e=je(),l=Object.prototype.hasOwnProperty;function d(f){if(f===null)return!0;var u,s=f;for(u in s)if(l.call(s,u)&&s[u]!==null)return!1;return!0}function c(f){return f!==null?f:{}}return ri=new e("tag:yaml.org,2002:set",{kind:"mapping",resolve:d,construct:c}),ri}var ni,Xo;function aa(){return Xo||(Xo=1,ni=Kl().extend({implicit:[Ql(),Zl()],explicit:[eu(),tu(),ru(),nu()]})),ni}var Jo;function af(){if(Jo)return Fr;Jo=1;var e=mr(),l=gr(),d=nf(),c=aa(),f=Object.prototype.hasOwnProperty,u=1,s=2,h=3,i=4,n=1,t=2,o=3,a=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,p=/[\x85\u2028\u2029]/,g=/[,\[\]\{\}]/,E=/^(?:!|!!|![a-z\-]+!)$/i,m=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _(r){return Object.prototype.toString.call(r)}function b(r){return r===10||r===13}function O(r){return r===9||r===32}function I(r){return r===9||r===32||r===10||r===13}function $(r){return r===44||r===91||r===93||r===123||r===125}function R(r){var B;return 48<=r&&r<=57?r-48:(B=r|32,97<=B&&B<=102?B-97+10:-1)}function A(r){return r===120?2:r===117?4:r===85?8:0}function T(r){return 48<=r&&r<=57?r-48:-1}function y(r){return r===48?"\0":r===97?"\x07":r===98?"\b":r===116||r===9?"	":r===110?`
`:r===118?"\v":r===102?"\f":r===114?"\r":r===101?"\x1B":r===32?" ":r===34?'"':r===47?"/":r===92?"\\":r===78?"":r===95?"":r===76?"\u2028":r===80?"\u2029":""}function M(r){return r<=65535?String.fromCharCode(r):String.fromCharCode((r-65536>>10)+55296,(r-65536&1023)+56320)}for(var U=new Array(256),x=new Array(256),q=0;q<256;q++)U[q]=y(q)?1:0,x[q]=y(q);function N(r,B){this.input=r,this.filename=B.filename||null,this.schema=B.schema||c,this.onWarning=B.onWarning||null,this.legacy=B.legacy||!1,this.json=B.json||!1,this.listener=B.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=r.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function P(r,B){var G={name:r.filename,buffer:r.input.slice(0,-1),position:r.position,line:r.line,column:r.position-r.lineStart};return G.snippet=d(G),new l(B,G)}function F(r,B){throw P(r,B)}function k(r,B){r.onWarning&&r.onWarning.call(null,P(r,B))}var K={YAML:function(B,G,re){var Y,te,Z;B.version!==null&&F(B,"duplication of %YAML directive"),re.length!==1&&F(B,"YAML directive accepts exactly one argument"),Y=/^([0-9]+)\.([0-9]+)$/.exec(re[0]),Y===null&&F(B,"ill-formed argument of the YAML directive"),te=parseInt(Y[1],10),Z=parseInt(Y[2],10),te!==1&&F(B,"unacceptable YAML version of the document"),B.version=re[0],B.checkLineBreaks=Z<2,Z!==1&&Z!==2&&k(B,"unsupported YAML version of the document")},TAG:function(B,G,re){var Y,te;re.length!==2&&F(B,"TAG directive accepts exactly two arguments"),Y=re[0],te=re[1],E.test(Y)||F(B,"ill-formed tag handle (first argument) of the TAG directive"),f.call(B.tagMap,Y)&&F(B,'there is a previously declared suffix for "'+Y+'" tag handle'),m.test(te)||F(B,"ill-formed tag prefix (second argument) of the TAG directive");try{te=decodeURIComponent(te)}catch{F(B,"tag prefix is malformed: "+te)}B.tagMap[Y]=te}};function W(r,B,G,re){var Y,te,Z,ae;if(B<G){if(ae=r.input.slice(B,G),re)for(Y=0,te=ae.length;Y<te;Y+=1)Z=ae.charCodeAt(Y),Z===9||32<=Z&&Z<=1114111||F(r,"expected valid JSON character");else a.test(ae)&&F(r,"the stream contains non-printable characters");r.result+=ae}}function ne(r,B,G,re){var Y,te,Z,ae;for(e.isObject(G)||F(r,"cannot merge mappings; the provided source object is unacceptable"),Y=Object.keys(G),Z=0,ae=Y.length;Z<ae;Z+=1)te=Y[Z],f.call(B,te)||(B[te]=G[te],re[te]=!0)}function ce(r,B,G,re,Y,te,Z,ae,ge){var ve,be;if(Array.isArray(Y))for(Y=Array.prototype.slice.call(Y),ve=0,be=Y.length;ve<be;ve+=1)Array.isArray(Y[ve])&&F(r,"nested arrays are not supported inside keys"),typeof Y=="object"&&_(Y[ve])==="[object Object]"&&(Y[ve]="[object Object]");if(typeof Y=="object"&&_(Y)==="[object Object]"&&(Y="[object Object]"),Y=String(Y),B===null&&(B={}),re==="tag:yaml.org,2002:merge")if(Array.isArray(te))for(ve=0,be=te.length;ve<be;ve+=1)ne(r,B,te[ve],G);else ne(r,B,te,G);else!r.json&&!f.call(G,Y)&&f.call(B,Y)&&(r.line=Z||r.line,r.lineStart=ae||r.lineStart,r.position=ge||r.position,F(r,"duplicated mapping key")),Y==="__proto__"?Object.defineProperty(B,Y,{configurable:!0,enumerable:!0,writable:!0,value:te}):B[Y]=te,delete G[Y];return B}function ue(r){var B;B=r.input.charCodeAt(r.position),B===10?r.position++:B===13?(r.position++,r.input.charCodeAt(r.position)===10&&r.position++):F(r,"a line break is expected"),r.line+=1,r.lineStart=r.position,r.firstTabInLine=-1}function ie(r,B,G){for(var re=0,Y=r.input.charCodeAt(r.position);Y!==0;){for(;O(Y);)Y===9&&r.firstTabInLine===-1&&(r.firstTabInLine=r.position),Y=r.input.charCodeAt(++r.position);if(B&&Y===35)do Y=r.input.charCodeAt(++r.position);while(Y!==10&&Y!==13&&Y!==0);if(b(Y))for(ue(r),Y=r.input.charCodeAt(r.position),re++,r.lineIndent=0;Y===32;)r.lineIndent++,Y=r.input.charCodeAt(++r.position);else break}return G!==-1&&re!==0&&r.lineIndent<G&&k(r,"deficient indentation"),re}function Te(r){var B=r.position,G;return G=r.input.charCodeAt(B),!!((G===45||G===46)&&G===r.input.charCodeAt(B+1)&&G===r.input.charCodeAt(B+2)&&(B+=3,G=r.input.charCodeAt(B),G===0||I(G)))}function J(r,B){B===1?r.result+=" ":B>1&&(r.result+=e.repeat(`
`,B-1))}function Ee(r,B,G){var re,Y,te,Z,ae,ge,ve,be,de=r.kind,xe=r.result,w;if(w=r.input.charCodeAt(r.position),I(w)||$(w)||w===35||w===38||w===42||w===33||w===124||w===62||w===39||w===34||w===37||w===64||w===96||(w===63||w===45)&&(Y=r.input.charCodeAt(r.position+1),I(Y)||G&&$(Y)))return!1;for(r.kind="scalar",r.result="",te=Z=r.position,ae=!1;w!==0;){if(w===58){if(Y=r.input.charCodeAt(r.position+1),I(Y)||G&&$(Y))break}else if(w===35){if(re=r.input.charCodeAt(r.position-1),I(re))break}else{if(r.position===r.lineStart&&Te(r)||G&&$(w))break;if(b(w))if(ge=r.line,ve=r.lineStart,be=r.lineIndent,ie(r,!1,-1),r.lineIndent>=B){ae=!0,w=r.input.charCodeAt(r.position);continue}else{r.position=Z,r.line=ge,r.lineStart=ve,r.lineIndent=be;break}}ae&&(W(r,te,Z,!1),J(r,r.line-ge),te=Z=r.position,ae=!1),O(w)||(Z=r.position+1),w=r.input.charCodeAt(++r.position)}return W(r,te,Z,!1),r.result?!0:(r.kind=de,r.result=xe,!1)}function S(r,B){var G,re,Y;if(G=r.input.charCodeAt(r.position),G!==39)return!1;for(r.kind="scalar",r.result="",r.position++,re=Y=r.position;(G=r.input.charCodeAt(r.position))!==0;)if(G===39)if(W(r,re,r.position,!0),G=r.input.charCodeAt(++r.position),G===39)re=r.position,r.position++,Y=r.position;else return!0;else b(G)?(W(r,re,Y,!0),J(r,ie(r,!1,B)),re=Y=r.position):r.position===r.lineStart&&Te(r)?F(r,"unexpected end of the document within a single quoted scalar"):(r.position++,Y=r.position);F(r,"unexpected end of the stream within a single quoted scalar")}function v(r,B){var G,re,Y,te,Z,ae;if(ae=r.input.charCodeAt(r.position),ae!==34)return!1;for(r.kind="scalar",r.result="",r.position++,G=re=r.position;(ae=r.input.charCodeAt(r.position))!==0;){if(ae===34)return W(r,G,r.position,!0),r.position++,!0;if(ae===92){if(W(r,G,r.position,!0),ae=r.input.charCodeAt(++r.position),b(ae))ie(r,!1,B);else if(ae<256&&U[ae])r.result+=x[ae],r.position++;else if((Z=A(ae))>0){for(Y=Z,te=0;Y>0;Y--)ae=r.input.charCodeAt(++r.position),(Z=R(ae))>=0?te=(te<<4)+Z:F(r,"expected hexadecimal character");r.result+=M(te),r.position++}else F(r,"unknown escape sequence");G=re=r.position}else b(ae)?(W(r,G,re,!0),J(r,ie(r,!1,B)),G=re=r.position):r.position===r.lineStart&&Te(r)?F(r,"unexpected end of the document within a double quoted scalar"):(r.position++,re=r.position)}F(r,"unexpected end of the stream within a double quoted scalar")}function H(r,B){var G=!0,re,Y,te,Z=r.tag,ae,ge=r.anchor,ve,be,de,xe,w,j=Object.create(null),X,V,Q,ee;if(ee=r.input.charCodeAt(r.position),ee===91)be=93,w=!1,ae=[];else if(ee===123)be=125,w=!0,ae={};else return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=ae),ee=r.input.charCodeAt(++r.position);ee!==0;){if(ie(r,!0,B),ee=r.input.charCodeAt(r.position),ee===be)return r.position++,r.tag=Z,r.anchor=ge,r.kind=w?"mapping":"sequence",r.result=ae,!0;G?ee===44&&F(r,"expected the node content, but found ','"):F(r,"missed comma between flow collection entries"),V=X=Q=null,de=xe=!1,ee===63&&(ve=r.input.charCodeAt(r.position+1),I(ve)&&(de=xe=!0,r.position++,ie(r,!0,B))),re=r.line,Y=r.lineStart,te=r.position,Le(r,B,u,!1,!0),V=r.tag,X=r.result,ie(r,!0,B),ee=r.input.charCodeAt(r.position),(xe||r.line===re)&&ee===58&&(de=!0,ee=r.input.charCodeAt(++r.position),ie(r,!0,B),Le(r,B,u,!1,!0),Q=r.result),w?ce(r,ae,j,V,X,Q,re,Y,te):de?ae.push(ce(r,null,j,V,X,Q,re,Y,te)):ae.push(X),ie(r,!0,B),ee=r.input.charCodeAt(r.position),ee===44?(G=!0,ee=r.input.charCodeAt(++r.position)):G=!1}F(r,"unexpected end of the stream within a flow collection")}function D(r,B){var G,re,Y=n,te=!1,Z=!1,ae=B,ge=0,ve=!1,be,de;if(de=r.input.charCodeAt(r.position),de===124)re=!1;else if(de===62)re=!0;else return!1;for(r.kind="scalar",r.result="";de!==0;)if(de=r.input.charCodeAt(++r.position),de===43||de===45)n===Y?Y=de===43?o:t:F(r,"repeat of a chomping mode identifier");else if((be=T(de))>=0)be===0?F(r,"bad explicit indentation width of a block scalar; it cannot be less than one"):Z?F(r,"repeat of an indentation width identifier"):(ae=B+be-1,Z=!0);else break;if(O(de)){do de=r.input.charCodeAt(++r.position);while(O(de));if(de===35)do de=r.input.charCodeAt(++r.position);while(!b(de)&&de!==0)}for(;de!==0;){for(ue(r),r.lineIndent=0,de=r.input.charCodeAt(r.position);(!Z||r.lineIndent<ae)&&de===32;)r.lineIndent++,de=r.input.charCodeAt(++r.position);if(!Z&&r.lineIndent>ae&&(ae=r.lineIndent),b(de)){ge++;continue}if(r.lineIndent<ae){Y===o?r.result+=e.repeat(`
`,te?1+ge:ge):Y===n&&te&&(r.result+=`
`);break}for(re?O(de)?(ve=!0,r.result+=e.repeat(`
`,te?1+ge:ge)):ve?(ve=!1,r.result+=e.repeat(`
`,ge+1)):ge===0?te&&(r.result+=" "):r.result+=e.repeat(`
`,ge):r.result+=e.repeat(`
`,te?1+ge:ge),te=!0,Z=!0,ge=0,G=r.position;!b(de)&&de!==0;)de=r.input.charCodeAt(++r.position);W(r,G,r.position,!1)}return!0}function le(r,B){var G,re=r.tag,Y=r.anchor,te=[],Z,ae=!1,ge;if(r.firstTabInLine!==-1)return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=te),ge=r.input.charCodeAt(r.position);ge!==0&&(r.firstTabInLine!==-1&&(r.position=r.firstTabInLine,F(r,"tab characters must not be used in indentation")),!(ge!==45||(Z=r.input.charCodeAt(r.position+1),!I(Z))));){if(ae=!0,r.position++,ie(r,!0,-1)&&r.lineIndent<=B){te.push(null),ge=r.input.charCodeAt(r.position);continue}if(G=r.line,Le(r,B,h,!1,!0),te.push(r.result),ie(r,!0,-1),ge=r.input.charCodeAt(r.position),(r.line===G||r.lineIndent>B)&&ge!==0)F(r,"bad indentation of a sequence entry");else if(r.lineIndent<B)break}return ae?(r.tag=re,r.anchor=Y,r.kind="sequence",r.result=te,!0):!1}function me(r,B,G){var re,Y,te,Z,ae,ge,ve=r.tag,be=r.anchor,de={},xe=Object.create(null),w=null,j=null,X=null,V=!1,Q=!1,ee;if(r.firstTabInLine!==-1)return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=de),ee=r.input.charCodeAt(r.position);ee!==0;){if(!V&&r.firstTabInLine!==-1&&(r.position=r.firstTabInLine,F(r,"tab characters must not be used in indentation")),re=r.input.charCodeAt(r.position+1),te=r.line,(ee===63||ee===58)&&I(re))ee===63?(V&&(ce(r,de,xe,w,j,null,Z,ae,ge),w=j=X=null),Q=!0,V=!0,Y=!0):V?(V=!1,Y=!0):F(r,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),r.position+=1,ee=re;else{if(Z=r.line,ae=r.lineStart,ge=r.position,!Le(r,G,s,!1,!0))break;if(r.line===te){for(ee=r.input.charCodeAt(r.position);O(ee);)ee=r.input.charCodeAt(++r.position);if(ee===58)ee=r.input.charCodeAt(++r.position),I(ee)||F(r,"a whitespace character is expected after the key-value separator within a block mapping"),V&&(ce(r,de,xe,w,j,null,Z,ae,ge),w=j=X=null),Q=!0,V=!1,Y=!1,w=r.tag,j=r.result;else if(Q)F(r,"can not read an implicit mapping pair; a colon is missed");else return r.tag=ve,r.anchor=be,!0}else if(Q)F(r,"can not read a block mapping entry; a multiline key may not be an implicit key");else return r.tag=ve,r.anchor=be,!0}if((r.line===te||r.lineIndent>B)&&(V&&(Z=r.line,ae=r.lineStart,ge=r.position),Le(r,B,i,!0,Y)&&(V?j=r.result:X=r.result),V||(ce(r,de,xe,w,j,X,Z,ae,ge),w=j=X=null),ie(r,!0,-1),ee=r.input.charCodeAt(r.position)),(r.line===te||r.lineIndent>B)&&ee!==0)F(r,"bad indentation of a mapping entry");else if(r.lineIndent<B)break}return V&&ce(r,de,xe,w,j,null,Z,ae,ge),Q&&(r.tag=ve,r.anchor=be,r.kind="mapping",r.result=de),Q}function pe(r){var B,G=!1,re=!1,Y,te,Z;if(Z=r.input.charCodeAt(r.position),Z!==33)return!1;if(r.tag!==null&&F(r,"duplication of a tag property"),Z=r.input.charCodeAt(++r.position),Z===60?(G=!0,Z=r.input.charCodeAt(++r.position)):Z===33?(re=!0,Y="!!",Z=r.input.charCodeAt(++r.position)):Y="!",B=r.position,G){do Z=r.input.charCodeAt(++r.position);while(Z!==0&&Z!==62);r.position<r.length?(te=r.input.slice(B,r.position),Z=r.input.charCodeAt(++r.position)):F(r,"unexpected end of the stream within a verbatim tag")}else{for(;Z!==0&&!I(Z);)Z===33&&(re?F(r,"tag suffix cannot contain exclamation marks"):(Y=r.input.slice(B-1,r.position+1),E.test(Y)||F(r,"named tag handle cannot contain such characters"),re=!0,B=r.position+1)),Z=r.input.charCodeAt(++r.position);te=r.input.slice(B,r.position),g.test(te)&&F(r,"tag suffix cannot contain flow indicator characters")}te&&!m.test(te)&&F(r,"tag name cannot contain such characters: "+te);try{te=decodeURIComponent(te)}catch{F(r,"tag name is malformed: "+te)}return G?r.tag=te:f.call(r.tagMap,Y)?r.tag=r.tagMap[Y]+te:Y==="!"?r.tag="!"+te:Y==="!!"?r.tag="tag:yaml.org,2002:"+te:F(r,'undeclared tag handle "'+Y+'"'),!0}function _e(r){var B,G;if(G=r.input.charCodeAt(r.position),G!==38)return!1;for(r.anchor!==null&&F(r,"duplication of an anchor property"),G=r.input.charCodeAt(++r.position),B=r.position;G!==0&&!I(G)&&!$(G);)G=r.input.charCodeAt(++r.position);return r.position===B&&F(r,"name of an anchor node must contain at least one character"),r.anchor=r.input.slice(B,r.position),!0}function ye(r){var B,G,re;if(re=r.input.charCodeAt(r.position),re!==42)return!1;for(re=r.input.charCodeAt(++r.position),B=r.position;re!==0&&!I(re)&&!$(re);)re=r.input.charCodeAt(++r.position);return r.position===B&&F(r,"name of an alias node must contain at least one character"),G=r.input.slice(B,r.position),f.call(r.anchorMap,G)||F(r,'unidentified alias "'+G+'"'),r.result=r.anchorMap[G],ie(r,!0,-1),!0}function Le(r,B,G,re,Y){var te,Z,ae,ge=1,ve=!1,be=!1,de,xe,w,j,X,V;if(r.listener!==null&&r.listener("open",r),r.tag=null,r.anchor=null,r.kind=null,r.result=null,te=Z=ae=i===G||h===G,re&&ie(r,!0,-1)&&(ve=!0,r.lineIndent>B?ge=1:r.lineIndent===B?ge=0:r.lineIndent<B&&(ge=-1)),ge===1)for(;pe(r)||_e(r);)ie(r,!0,-1)?(ve=!0,ae=te,r.lineIndent>B?ge=1:r.lineIndent===B?ge=0:r.lineIndent<B&&(ge=-1)):ae=!1;if(ae&&(ae=ve||Y),(ge===1||i===G)&&(u===G||s===G?X=B:X=B+1,V=r.position-r.lineStart,ge===1?ae&&(le(r,V)||me(r,V,X))||H(r,X)?be=!0:(Z&&D(r,X)||S(r,X)||v(r,X)?be=!0:ye(r)?(be=!0,(r.tag!==null||r.anchor!==null)&&F(r,"alias node should not have any properties")):Ee(r,X,u===G)&&(be=!0,r.tag===null&&(r.tag="?")),r.anchor!==null&&(r.anchorMap[r.anchor]=r.result)):ge===0&&(be=ae&&le(r,V))),r.tag===null)r.anchor!==null&&(r.anchorMap[r.anchor]=r.result);else if(r.tag==="?"){for(r.result!==null&&r.kind!=="scalar"&&F(r,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+r.kind+'"'),de=0,xe=r.implicitTypes.length;de<xe;de+=1)if(j=r.implicitTypes[de],j.resolve(r.result)){r.result=j.construct(r.result),r.tag=j.tag,r.anchor!==null&&(r.anchorMap[r.anchor]=r.result);break}}else if(r.tag!=="!"){if(f.call(r.typeMap[r.kind||"fallback"],r.tag))j=r.typeMap[r.kind||"fallback"][r.tag];else for(j=null,w=r.typeMap.multi[r.kind||"fallback"],de=0,xe=w.length;de<xe;de+=1)if(r.tag.slice(0,w[de].tag.length)===w[de].tag){j=w[de];break}j||F(r,"unknown tag !<"+r.tag+">"),r.result!==null&&j.kind!==r.kind&&F(r,"unacceptable node kind for !<"+r.tag+'> tag; it should be "'+j.kind+'", not "'+r.kind+'"'),j.resolve(r.result,r.tag)?(r.result=j.construct(r.result,r.tag),r.anchor!==null&&(r.anchorMap[r.anchor]=r.result)):F(r,"cannot resolve a node with !<"+r.tag+"> explicit tag")}return r.listener!==null&&r.listener("close",r),r.tag!==null||r.anchor!==null||be}function Ce(r){var B=r.position,G,re,Y,te=!1,Z;for(r.version=null,r.checkLineBreaks=r.legacy,r.tagMap=Object.create(null),r.anchorMap=Object.create(null);(Z=r.input.charCodeAt(r.position))!==0&&(ie(r,!0,-1),Z=r.input.charCodeAt(r.position),!(r.lineIndent>0||Z!==37));){for(te=!0,Z=r.input.charCodeAt(++r.position),G=r.position;Z!==0&&!I(Z);)Z=r.input.charCodeAt(++r.position);for(re=r.input.slice(G,r.position),Y=[],re.length<1&&F(r,"directive name must not be less than one character in length");Z!==0;){for(;O(Z);)Z=r.input.charCodeAt(++r.position);if(Z===35){do Z=r.input.charCodeAt(++r.position);while(Z!==0&&!b(Z));break}if(b(Z))break;for(G=r.position;Z!==0&&!I(Z);)Z=r.input.charCodeAt(++r.position);Y.push(r.input.slice(G,r.position))}Z!==0&&ue(r),f.call(K,re)?K[re](r,re,Y):k(r,'unknown document directive "'+re+'"')}if(ie(r,!0,-1),r.lineIndent===0&&r.input.charCodeAt(r.position)===45&&r.input.charCodeAt(r.position+1)===45&&r.input.charCodeAt(r.position+2)===45?(r.position+=3,ie(r,!0,-1)):te&&F(r,"directives end mark is expected"),Le(r,r.lineIndent-1,i,!1,!0),ie(r,!0,-1),r.checkLineBreaks&&p.test(r.input.slice(B,r.position))&&k(r,"non-ASCII line breaks are interpreted as content"),r.documents.push(r.result),r.position===r.lineStart&&Te(r)){r.input.charCodeAt(r.position)===46&&(r.position+=3,ie(r,!0,-1));return}if(r.position<r.length-1)F(r,"end of the stream or a document separator is expected");else return}function Me(r,B){r=String(r),B=B||{},r.length!==0&&(r.charCodeAt(r.length-1)!==10&&r.charCodeAt(r.length-1)!==13&&(r+=`
`),r.charCodeAt(0)===65279&&(r=r.slice(1)));var G=new N(r,B),re=r.indexOf("\0");for(re!==-1&&(G.position=re,F(G,"null byte is not allowed in input")),G.input+="\0";G.input.charCodeAt(G.position)===32;)G.lineIndent+=1,G.position+=1;for(;G.position<G.length-1;)Ce(G);return G.documents}function gt(r,B,G){B!==null&&typeof B=="object"&&typeof G>"u"&&(G=B,B=null);var re=Me(r,G);if(typeof B!="function")return re;for(var Y=0,te=re.length;Y<te;Y+=1)B(re[Y])}function at(r,B){var G=Me(r,B);if(G.length!==0){if(G.length===1)return G[0];throw new l("expected a single document in the stream, but found more")}}return Fr.loadAll=gt,Fr.load=at,Fr}var ii={},Ko;function of(){if(Ko)return ii;Ko=1;var e=mr(),l=gr(),d=aa(),c=Object.prototype.toString,f=Object.prototype.hasOwnProperty,u=65279,s=9,h=10,i=13,n=32,t=33,o=34,a=35,p=37,g=38,E=39,m=42,_=44,b=45,O=58,I=61,$=62,R=63,A=64,T=91,y=93,M=96,U=123,x=124,q=125,N={};N[0]="\\0",N[7]="\\a",N[8]="\\b",N[9]="\\t",N[10]="\\n",N[11]="\\v",N[12]="\\f",N[13]="\\r",N[27]="\\e",N[34]='\\"',N[92]="\\\\",N[133]="\\N",N[160]="\\_",N[8232]="\\L",N[8233]="\\P";var P=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],F=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function k(w,j){var X,V,Q,ee,fe,oe,he;if(j===null)return{};for(X={},V=Object.keys(j),Q=0,ee=V.length;Q<ee;Q+=1)fe=V[Q],oe=String(j[fe]),fe.slice(0,2)==="!!"&&(fe="tag:yaml.org,2002:"+fe.slice(2)),he=w.compiledTypeMap.fallback[fe],he&&f.call(he.styleAliases,oe)&&(oe=he.styleAliases[oe]),X[fe]=oe;return X}function K(w){var j,X,V;if(j=w.toString(16).toUpperCase(),w<=255)X="x",V=2;else if(w<=65535)X="u",V=4;else if(w<=4294967295)X="U",V=8;else throw new l("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+X+e.repeat("0",V-j.length)+j}var W=1,ne=2;function ce(w){this.schema=w.schema||d,this.indent=Math.max(1,w.indent||2),this.noArrayIndent=w.noArrayIndent||!1,this.skipInvalid=w.skipInvalid||!1,this.flowLevel=e.isNothing(w.flowLevel)?-1:w.flowLevel,this.styleMap=k(this.schema,w.styles||null),this.sortKeys=w.sortKeys||!1,this.lineWidth=w.lineWidth||80,this.noRefs=w.noRefs||!1,this.noCompatMode=w.noCompatMode||!1,this.condenseFlow=w.condenseFlow||!1,this.quotingType=w.quotingType==='"'?ne:W,this.forceQuotes=w.forceQuotes||!1,this.replacer=typeof w.replacer=="function"?w.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ue(w,j){for(var X=e.repeat(" ",j),V=0,Q=-1,ee="",fe,oe=w.length;V<oe;)Q=w.indexOf(`
`,V),Q===-1?(fe=w.slice(V),V=oe):(fe=w.slice(V,Q+1),V=Q+1),fe.length&&fe!==`
`&&(ee+=X),ee+=fe;return ee}function ie(w,j){return`
`+e.repeat(" ",w.indent*j)}function Te(w,j){var X,V,Q;for(X=0,V=w.implicitTypes.length;X<V;X+=1)if(Q=w.implicitTypes[X],Q.resolve(j))return!0;return!1}function J(w){return w===n||w===s}function Ee(w){return 32<=w&&w<=126||161<=w&&w<=55295&&w!==8232&&w!==8233||57344<=w&&w<=65533&&w!==u||65536<=w&&w<=1114111}function S(w){return Ee(w)&&w!==u&&w!==i&&w!==h}function v(w,j,X){var V=S(w),Q=V&&!J(w);return(X?V:V&&w!==_&&w!==T&&w!==y&&w!==U&&w!==q)&&w!==a&&!(j===O&&!Q)||S(j)&&!J(j)&&w===a||j===O&&Q}function H(w){return Ee(w)&&w!==u&&!J(w)&&w!==b&&w!==R&&w!==O&&w!==_&&w!==T&&w!==y&&w!==U&&w!==q&&w!==a&&w!==g&&w!==m&&w!==t&&w!==x&&w!==I&&w!==$&&w!==E&&w!==o&&w!==p&&w!==A&&w!==M}function D(w){return!J(w)&&w!==O}function le(w,j){var X=w.charCodeAt(j),V;return X>=55296&&X<=56319&&j+1<w.length&&(V=w.charCodeAt(j+1),V>=56320&&V<=57343)?(X-55296)*1024+V-56320+65536:X}function me(w){var j=/^\n* /;return j.test(w)}var pe=1,_e=2,ye=3,Le=4,Ce=5;function Me(w,j,X,V,Q,ee,fe,oe){var he,we=0,Oe=null,Ne=!1,Re=!1,Dt=V!==-1,Ze=-1,vt=H(le(w,0))&&D(le(w,w.length-1));if(j||fe)for(he=0;he<w.length;we>=65536?he+=2:he++){if(we=le(w,he),!Ee(we))return Ce;vt=vt&&v(we,Oe,oe),Oe=we}else{for(he=0;he<w.length;we>=65536?he+=2:he++){if(we=le(w,he),we===h)Ne=!0,Dt&&(Re=Re||he-Ze-1>V&&w[Ze+1]!==" ",Ze=he);else if(!Ee(we))return Ce;vt=vt&&v(we,Oe,oe),Oe=we}Re=Re||Dt&&he-Ze-1>V&&w[Ze+1]!==" "}return!Ne&&!Re?vt&&!fe&&!Q(w)?pe:ee===ne?Ce:_e:X>9&&me(w)?Ce:fe?ee===ne?Ce:_e:Re?Le:ye}function gt(w,j,X,V,Q){w.dump=(function(){if(j.length===0)return w.quotingType===ne?'""':"''";if(!w.noCompatMode&&(P.indexOf(j)!==-1||F.test(j)))return w.quotingType===ne?'"'+j+'"':"'"+j+"'";var ee=w.indent*Math.max(1,X),fe=w.lineWidth===-1?-1:Math.max(Math.min(w.lineWidth,40),w.lineWidth-ee),oe=V||w.flowLevel>-1&&X>=w.flowLevel;function he(we){return Te(w,we)}switch(Me(j,oe,w.indent,fe,he,w.quotingType,w.forceQuotes&&!V,Q)){case pe:return j;case _e:return"'"+j.replace(/'/g,"''")+"'";case ye:return"|"+at(j,w.indent)+r(ue(j,ee));case Le:return">"+at(j,w.indent)+r(ue(B(j,fe),ee));case Ce:return'"'+re(j)+'"';default:throw new l("impossible error: invalid scalar style")}})()}function at(w,j){var X=me(w)?String(j):"",V=w[w.length-1]===`
`,Q=V&&(w[w.length-2]===`
`||w===`
`),ee=Q?"+":V?"":"-";return X+ee+`
`}function r(w){return w[w.length-1]===`
`?w.slice(0,-1):w}function B(w,j){for(var X=/(\n+)([^\n]*)/g,V=(function(){var we=w.indexOf(`
`);return we=we!==-1?we:w.length,X.lastIndex=we,G(w.slice(0,we),j)})(),Q=w[0]===`
`||w[0]===" ",ee,fe;fe=X.exec(w);){var oe=fe[1],he=fe[2];ee=he[0]===" ",V+=oe+(!Q&&!ee&&he!==""?`
`:"")+G(he,j),Q=ee}return V}function G(w,j){if(w===""||w[0]===" ")return w;for(var X=/ [^ ]/g,V,Q=0,ee,fe=0,oe=0,he="";V=X.exec(w);)oe=V.index,oe-Q>j&&(ee=fe>Q?fe:oe,he+=`
`+w.slice(Q,ee),Q=ee+1),fe=oe;return he+=`
`,w.length-Q>j&&fe>Q?he+=w.slice(Q,fe)+`
`+w.slice(fe+1):he+=w.slice(Q),he.slice(1)}function re(w){for(var j="",X=0,V,Q=0;Q<w.length;X>=65536?Q+=2:Q++)X=le(w,Q),V=N[X],!V&&Ee(X)?(j+=w[Q],X>=65536&&(j+=w[Q+1])):j+=V||K(X);return j}function Y(w,j,X){var V="",Q=w.tag,ee,fe,oe;for(ee=0,fe=X.length;ee<fe;ee+=1)oe=X[ee],w.replacer&&(oe=w.replacer.call(X,String(ee),oe)),(ve(w,j,oe,!1,!1)||typeof oe>"u"&&ve(w,j,null,!1,!1))&&(V!==""&&(V+=","+(w.condenseFlow?"":" ")),V+=w.dump);w.tag=Q,w.dump="["+V+"]"}function te(w,j,X,V){var Q="",ee=w.tag,fe,oe,he;for(fe=0,oe=X.length;fe<oe;fe+=1)he=X[fe],w.replacer&&(he=w.replacer.call(X,String(fe),he)),(ve(w,j+1,he,!0,!0,!1,!0)||typeof he>"u"&&ve(w,j+1,null,!0,!0,!1,!0))&&((!V||Q!=="")&&(Q+=ie(w,j)),w.dump&&h===w.dump.charCodeAt(0)?Q+="-":Q+="- ",Q+=w.dump);w.tag=ee,w.dump=Q||"[]"}function Z(w,j,X){var V="",Q=w.tag,ee=Object.keys(X),fe,oe,he,we,Oe;for(fe=0,oe=ee.length;fe<oe;fe+=1)Oe="",V!==""&&(Oe+=", "),w.condenseFlow&&(Oe+='"'),he=ee[fe],we=X[he],w.replacer&&(we=w.replacer.call(X,he,we)),ve(w,j,he,!1,!1)&&(w.dump.length>1024&&(Oe+="? "),Oe+=w.dump+(w.condenseFlow?'"':"")+":"+(w.condenseFlow?"":" "),ve(w,j,we,!1,!1)&&(Oe+=w.dump,V+=Oe));w.tag=Q,w.dump="{"+V+"}"}function ae(w,j,X,V){var Q="",ee=w.tag,fe=Object.keys(X),oe,he,we,Oe,Ne,Re;if(w.sortKeys===!0)fe.sort();else if(typeof w.sortKeys=="function")fe.sort(w.sortKeys);else if(w.sortKeys)throw new l("sortKeys must be a boolean or a function");for(oe=0,he=fe.length;oe<he;oe+=1)Re="",(!V||Q!=="")&&(Re+=ie(w,j)),we=fe[oe],Oe=X[we],w.replacer&&(Oe=w.replacer.call(X,we,Oe)),ve(w,j+1,we,!0,!0,!0)&&(Ne=w.tag!==null&&w.tag!=="?"||w.dump&&w.dump.length>1024,Ne&&(w.dump&&h===w.dump.charCodeAt(0)?Re+="?":Re+="? "),Re+=w.dump,Ne&&(Re+=ie(w,j)),ve(w,j+1,Oe,!0,Ne)&&(w.dump&&h===w.dump.charCodeAt(0)?Re+=":":Re+=": ",Re+=w.dump,Q+=Re));w.tag=ee,w.dump=Q||"{}"}function ge(w,j,X){var V,Q,ee,fe,oe,he;for(Q=X?w.explicitTypes:w.implicitTypes,ee=0,fe=Q.length;ee<fe;ee+=1)if(oe=Q[ee],(oe.instanceOf||oe.predicate)&&(!oe.instanceOf||typeof j=="object"&&j instanceof oe.instanceOf)&&(!oe.predicate||oe.predicate(j))){if(X?oe.multi&&oe.representName?w.tag=oe.representName(j):w.tag=oe.tag:w.tag="?",oe.represent){if(he=w.styleMap[oe.tag]||oe.defaultStyle,c.call(oe.represent)==="[object Function]")V=oe.represent(j,he);else if(f.call(oe.represent,he))V=oe.represent[he](j,he);else throw new l("!<"+oe.tag+'> tag resolver accepts not "'+he+'" style');w.dump=V}return!0}return!1}function ve(w,j,X,V,Q,ee,fe){w.tag=null,w.dump=X,ge(w,X,!1)||ge(w,X,!0);var oe=c.call(w.dump),he=V,we;V&&(V=w.flowLevel<0||w.flowLevel>j);var Oe=oe==="[object Object]"||oe==="[object Array]",Ne,Re;if(Oe&&(Ne=w.duplicates.indexOf(X),Re=Ne!==-1),(w.tag!==null&&w.tag!=="?"||Re||w.indent!==2&&j>0)&&(Q=!1),Re&&w.usedDuplicates[Ne])w.dump="*ref_"+Ne;else{if(Oe&&Re&&!w.usedDuplicates[Ne]&&(w.usedDuplicates[Ne]=!0),oe==="[object Object]")V&&Object.keys(w.dump).length!==0?(ae(w,j,w.dump,Q),Re&&(w.dump="&ref_"+Ne+w.dump)):(Z(w,j,w.dump),Re&&(w.dump="&ref_"+Ne+" "+w.dump));else if(oe==="[object Array]")V&&w.dump.length!==0?(w.noArrayIndent&&!fe&&j>0?te(w,j-1,w.dump,Q):te(w,j,w.dump,Q),Re&&(w.dump="&ref_"+Ne+w.dump)):(Y(w,j,w.dump),Re&&(w.dump="&ref_"+Ne+" "+w.dump));else if(oe==="[object String]")w.tag!=="?"&&gt(w,w.dump,j,ee,he);else{if(oe==="[object Undefined]")return!1;if(w.skipInvalid)return!1;throw new l("unacceptable kind of an object to dump "+oe)}w.tag!==null&&w.tag!=="?"&&(we=encodeURI(w.tag[0]==="!"?w.tag.slice(1):w.tag).replace(/!/g,"%21"),w.tag[0]==="!"?we="!"+we:we.slice(0,18)==="tag:yaml.org,2002:"?we="!!"+we.slice(18):we="!<"+we+">",w.dump=we+" "+w.dump)}return!0}function be(w,j){var X=[],V=[],Q,ee;for(de(w,X,V),Q=0,ee=V.length;Q<ee;Q+=1)j.duplicates.push(X[V[Q]]);j.usedDuplicates=new Array(ee)}function de(w,j,X){var V,Q,ee;if(w!==null&&typeof w=="object")if(Q=j.indexOf(w),Q!==-1)X.indexOf(Q)===-1&&X.push(Q);else if(j.push(w),Array.isArray(w))for(Q=0,ee=w.length;Q<ee;Q+=1)de(w[Q],j,X);else for(V=Object.keys(w),Q=0,ee=V.length;Q<ee;Q+=1)de(w[V[Q]],j,X)}function xe(w,j){j=j||{};var X=new ce(j);X.noRefs||be(w,X);var V=w;return X.replacer&&(V=X.replacer.call({"":V},"",V)),ve(X,0,V,!0,!0)?X.dump+`
`:""}return ii.dump=xe,ii}var Qo;function oa(){if(Qo)return He;Qo=1;var e=af(),l=of();function d(c,f){return function(){throw new Error("Function yaml."+c+" is removed in js-yaml 4. Use yaml."+f+" instead, which is now safe by default.")}}return He.Type=je(),He.Schema=Bl(),He.FAILSAFE_SCHEMA=Wl(),He.JSON_SCHEMA=Jl(),He.CORE_SCHEMA=Kl(),He.DEFAULT_SCHEMA=aa(),He.load=e.load,He.loadAll=e.loadAll,He.dump=l.dump,He.YAMLException=gr(),He.types={binary:eu(),float:Xl(),map:Gl(),null:Yl(),pairs:ru(),set:nu(),timestamp:Ql(),bool:Vl(),int:zl(),merge:Zl(),omap:tu(),seq:jl(),str:Hl()},He.safeLoad=d("safeLoad","load"),He.safeLoadAll=d("safeLoadAll","loadAll"),He.safeDump=d("safeDump","dump"),He}var Vt={},Zo;function sf(){if(Zo)return Vt;Zo=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.Lazy=void 0;class e{constructor(d){this._value=null,this.creator=d}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const d=this.creator();return this.value=d,d}set value(d){this._value=d,this.creator=null}}return Vt.Lazy=e,Vt}var Lr={exports:{}},ai,es;function Wr(){if(es)return ai;es=1;const e="2.0.0",l=256,d=Number.MAX_SAFE_INTEGER||9007199254740991,c=16,f=l-6;return ai={MAX_LENGTH:l,MAX_SAFE_COMPONENT_LENGTH:c,MAX_SAFE_BUILD_LENGTH:f,MAX_SAFE_INTEGER:d,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ai}var oi,ts;function Yr(){return ts||(ts=1,oi=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...l)=>console.error("SEMVER",...l):()=>{}),oi}var rs;function vr(){return rs||(rs=1,(function(e,l){const{MAX_SAFE_COMPONENT_LENGTH:d,MAX_SAFE_BUILD_LENGTH:c,MAX_LENGTH:f}=Wr(),u=Yr();l=e.exports={};const s=l.re=[],h=l.safeRe=[],i=l.src=[],n=l.safeSrc=[],t=l.t={};let o=0;const a="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",f],[a,c]],g=m=>{for(const[_,b]of p)m=m.split(`${_}*`).join(`${_}{0,${b}}`).split(`${_}+`).join(`${_}{1,${b}}`);return m},E=(m,_,b)=>{const O=g(_),I=o++;u(m,I,_),t[m]=I,i[I]=_,n[I]=O,s[I]=new RegExp(_,b?"g":void 0),h[I]=new RegExp(O,b?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*"),E("NUMERICIDENTIFIERLOOSE","\\d+"),E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${a}*`),E("MAINVERSION",`(${i[t.NUMERICIDENTIFIER]})\\.(${i[t.NUMERICIDENTIFIER]})\\.(${i[t.NUMERICIDENTIFIER]})`),E("MAINVERSIONLOOSE",`(${i[t.NUMERICIDENTIFIERLOOSE]})\\.(${i[t.NUMERICIDENTIFIERLOOSE]})\\.(${i[t.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASEIDENTIFIER",`(?:${i[t.NONNUMERICIDENTIFIER]}|${i[t.NUMERICIDENTIFIER]})`),E("PRERELEASEIDENTIFIERLOOSE",`(?:${i[t.NONNUMERICIDENTIFIER]}|${i[t.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASE",`(?:-(${i[t.PRERELEASEIDENTIFIER]}(?:\\.${i[t.PRERELEASEIDENTIFIER]})*))`),E("PRERELEASELOOSE",`(?:-?(${i[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${i[t.PRERELEASEIDENTIFIERLOOSE]})*))`),E("BUILDIDENTIFIER",`${a}+`),E("BUILD",`(?:\\+(${i[t.BUILDIDENTIFIER]}(?:\\.${i[t.BUILDIDENTIFIER]})*))`),E("FULLPLAIN",`v?${i[t.MAINVERSION]}${i[t.PRERELEASE]}?${i[t.BUILD]}?`),E("FULL",`^${i[t.FULLPLAIN]}$`),E("LOOSEPLAIN",`[v=\\s]*${i[t.MAINVERSIONLOOSE]}${i[t.PRERELEASELOOSE]}?${i[t.BUILD]}?`),E("LOOSE",`^${i[t.LOOSEPLAIN]}$`),E("GTLT","((?:<|>)?=?)"),E("XRANGEIDENTIFIERLOOSE",`${i[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),E("XRANGEIDENTIFIER",`${i[t.NUMERICIDENTIFIER]}|x|X|\\*`),E("XRANGEPLAIN",`[v=\\s]*(${i[t.XRANGEIDENTIFIER]})(?:\\.(${i[t.XRANGEIDENTIFIER]})(?:\\.(${i[t.XRANGEIDENTIFIER]})(?:${i[t.PRERELEASE]})?${i[t.BUILD]}?)?)?`),E("XRANGEPLAINLOOSE",`[v=\\s]*(${i[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[t.XRANGEIDENTIFIERLOOSE]})(?:${i[t.PRERELEASELOOSE]})?${i[t.BUILD]}?)?)?`),E("XRANGE",`^${i[t.GTLT]}\\s*${i[t.XRANGEPLAIN]}$`),E("XRANGELOOSE",`^${i[t.GTLT]}\\s*${i[t.XRANGEPLAINLOOSE]}$`),E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${d}})(?:\\.(\\d{1,${d}}))?(?:\\.(\\d{1,${d}}))?`),E("COERCE",`${i[t.COERCEPLAIN]}(?:$|[^\\d])`),E("COERCEFULL",i[t.COERCEPLAIN]+`(?:${i[t.PRERELEASE]})?(?:${i[t.BUILD]})?(?:$|[^\\d])`),E("COERCERTL",i[t.COERCE],!0),E("COERCERTLFULL",i[t.COERCEFULL],!0),E("LONETILDE","(?:~>?)"),E("TILDETRIM",`(\\s*)${i[t.LONETILDE]}\\s+`,!0),l.tildeTrimReplace="$1~",E("TILDE",`^${i[t.LONETILDE]}${i[t.XRANGEPLAIN]}$`),E("TILDELOOSE",`^${i[t.LONETILDE]}${i[t.XRANGEPLAINLOOSE]}$`),E("LONECARET","(?:\\^)"),E("CARETTRIM",`(\\s*)${i[t.LONECARET]}\\s+`,!0),l.caretTrimReplace="$1^",E("CARET",`^${i[t.LONECARET]}${i[t.XRANGEPLAIN]}$`),E("CARETLOOSE",`^${i[t.LONECARET]}${i[t.XRANGEPLAINLOOSE]}$`),E("COMPARATORLOOSE",`^${i[t.GTLT]}\\s*(${i[t.LOOSEPLAIN]})$|^$`),E("COMPARATOR",`^${i[t.GTLT]}\\s*(${i[t.FULLPLAIN]})$|^$`),E("COMPARATORTRIM",`(\\s*)${i[t.GTLT]}\\s*(${i[t.LOOSEPLAIN]}|${i[t.XRANGEPLAIN]})`,!0),l.comparatorTrimReplace="$1$2$3",E("HYPHENRANGE",`^\\s*(${i[t.XRANGEPLAIN]})\\s+-\\s+(${i[t.XRANGEPLAIN]})\\s*$`),E("HYPHENRANGELOOSE",`^\\s*(${i[t.XRANGEPLAINLOOSE]})\\s+-\\s+(${i[t.XRANGEPLAINLOOSE]})\\s*$`),E("STAR","(<|>)?=?\\s*\\*"),E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Lr,Lr.exports)),Lr.exports}var si,ns;function sa(){if(ns)return si;ns=1;const e=Object.freeze({loose:!0}),l=Object.freeze({});return si=c=>c?typeof c!="object"?e:c:l,si}var li,is;function iu(){if(is)return li;is=1;const e=/^[0-9]+$/,l=(c,f)=>{if(typeof c=="number"&&typeof f=="number")return c===f?0:c<f?-1:1;const u=e.test(c),s=e.test(f);return u&&s&&(c=+c,f=+f),c===f?0:u&&!s?-1:s&&!u?1:c<f?-1:1};return li={compareIdentifiers:l,rcompareIdentifiers:(c,f)=>l(f,c)},li}var ui,as;function Ge(){if(as)return ui;as=1;const e=Yr(),{MAX_LENGTH:l,MAX_SAFE_INTEGER:d}=Wr(),{safeRe:c,t:f}=vr(),u=sa(),{compareIdentifiers:s}=iu();class h{constructor(n,t){if(t=u(t),n instanceof h){if(n.loose===!!t.loose&&n.includePrerelease===!!t.includePrerelease)return n;n=n.version}else if(typeof n!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof n}".`);if(n.length>l)throw new TypeError(`version is longer than ${l} characters`);e("SemVer",n,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const o=n.trim().match(t.loose?c[f.LOOSE]:c[f.FULL]);if(!o)throw new TypeError(`Invalid Version: ${n}`);if(this.raw=n,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>d||this.major<0)throw new TypeError("Invalid major version");if(this.minor>d||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>d||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){const p=+a;if(p>=0&&p<d)return p}return a}):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(n){if(e("SemVer.compare",this.version,this.options,n),!(n instanceof h)){if(typeof n=="string"&&n===this.version)return 0;n=new h(n,this.options)}return n.version===this.version?0:this.compareMain(n)||this.comparePre(n)}compareMain(n){return n instanceof h||(n=new h(n,this.options)),this.major<n.major?-1:this.major>n.major?1:this.minor<n.minor?-1:this.minor>n.minor?1:this.patch<n.patch?-1:this.patch>n.patch?1:0}comparePre(n){if(n instanceof h||(n=new h(n,this.options)),this.prerelease.length&&!n.prerelease.length)return-1;if(!this.prerelease.length&&n.prerelease.length)return 1;if(!this.prerelease.length&&!n.prerelease.length)return 0;let t=0;do{const o=this.prerelease[t],a=n.prerelease[t];if(e("prerelease compare",t,o,a),o===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(o===void 0)return-1;if(o===a)continue;return s(o,a)}while(++t)}compareBuild(n){n instanceof h||(n=new h(n,this.options));let t=0;do{const o=this.build[t],a=n.build[t];if(e("build compare",t,o,a),o===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(o===void 0)return-1;if(o===a)continue;return s(o,a)}while(++t)}inc(n,t,o){if(n.startsWith("pre")){if(!t&&o===!1)throw new Error("invalid increment argument: identifier is empty");if(t){const a=`-${t}`.match(this.options.loose?c[f.PRERELEASELOOSE]:c[f.PRERELEASE]);if(!a||a[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(n){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,o);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,o);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,o),this.inc("pre",t,o);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,o),this.inc("pre",t,o);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const a=Number(o)?1:0;if(this.prerelease.length===0)this.prerelease=[a];else{let p=this.prerelease.length;for(;--p>=0;)typeof this.prerelease[p]=="number"&&(this.prerelease[p]++,p=-2);if(p===-1){if(t===this.prerelease.join(".")&&o===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(t){let p=[t,a];o===!1&&(p=[t]),s(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=p):this.prerelease=p}break}default:throw new Error(`invalid increment argument: ${n}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return ui=h,ui}var ci,os;function Mt(){if(os)return ci;os=1;const e=Ge();return ci=(d,c,f=!1)=>{if(d instanceof e)return d;try{return new e(d,c)}catch(u){if(!f)return null;throw u}},ci}var fi,ss;function lf(){if(ss)return fi;ss=1;const e=Mt();return fi=(d,c)=>{const f=e(d,c);return f?f.version:null},fi}var di,ls;function uf(){if(ls)return di;ls=1;const e=Mt();return di=(d,c)=>{const f=e(d.trim().replace(/^[=v]+/,""),c);return f?f.version:null},di}var hi,us;function cf(){if(us)return hi;us=1;const e=Ge();return hi=(d,c,f,u,s)=>{typeof f=="string"&&(s=u,u=f,f=void 0);try{return new e(d instanceof e?d.version:d,f).inc(c,u,s).version}catch{return null}},hi}var pi,cs;function ff(){if(cs)return pi;cs=1;const e=Mt();return pi=(d,c)=>{const f=e(d,null,!0),u=e(c,null,!0),s=f.compare(u);if(s===0)return null;const h=s>0,i=h?f:u,n=h?u:f,t=!!i.prerelease.length;if(!!n.prerelease.length&&!t){if(!n.patch&&!n.minor)return"major";if(n.compareMain(i)===0)return n.minor&&!n.patch?"minor":"patch"}const a=t?"pre":"";return f.major!==u.major?a+"major":f.minor!==u.minor?a+"minor":f.patch!==u.patch?a+"patch":"prerelease"},pi}var mi,fs;function df(){if(fs)return mi;fs=1;const e=Ge();return mi=(d,c)=>new e(d,c).major,mi}var gi,ds;function hf(){if(ds)return gi;ds=1;const e=Ge();return gi=(d,c)=>new e(d,c).minor,gi}var vi,hs;function pf(){if(hs)return vi;hs=1;const e=Ge();return vi=(d,c)=>new e(d,c).patch,vi}var Ei,ps;function mf(){if(ps)return Ei;ps=1;const e=Mt();return Ei=(d,c)=>{const f=e(d,c);return f&&f.prerelease.length?f.prerelease:null},Ei}var yi,ms;function rt(){if(ms)return yi;ms=1;const e=Ge();return yi=(d,c,f)=>new e(d,f).compare(new e(c,f)),yi}var wi,gs;function gf(){if(gs)return wi;gs=1;const e=rt();return wi=(d,c,f)=>e(c,d,f),wi}var _i,vs;function vf(){if(vs)return _i;vs=1;const e=rt();return _i=(d,c)=>e(d,c,!0),_i}var Si,Es;function la(){if(Es)return Si;Es=1;const e=Ge();return Si=(d,c,f)=>{const u=new e(d,f),s=new e(c,f);return u.compare(s)||u.compareBuild(s)},Si}var Ai,ys;function Ef(){if(ys)return Ai;ys=1;const e=la();return Ai=(d,c)=>d.sort((f,u)=>e(f,u,c)),Ai}var Ti,ws;function yf(){if(ws)return Ti;ws=1;const e=la();return Ti=(d,c)=>d.sort((f,u)=>e(u,f,c)),Ti}var bi,_s;function Vr(){if(_s)return bi;_s=1;const e=rt();return bi=(d,c,f)=>e(d,c,f)>0,bi}var Ri,Ss;function ua(){if(Ss)return Ri;Ss=1;const e=rt();return Ri=(d,c,f)=>e(d,c,f)<0,Ri}var Ci,As;function au(){if(As)return Ci;As=1;const e=rt();return Ci=(d,c,f)=>e(d,c,f)===0,Ci}var Oi,Ts;function ou(){if(Ts)return Oi;Ts=1;const e=rt();return Oi=(d,c,f)=>e(d,c,f)!==0,Oi}var Ii,bs;function ca(){if(bs)return Ii;bs=1;const e=rt();return Ii=(d,c,f)=>e(d,c,f)>=0,Ii}var Di,Rs;function fa(){if(Rs)return Di;Rs=1;const e=rt();return Di=(d,c,f)=>e(d,c,f)<=0,Di}var Pi,Cs;function su(){if(Cs)return Pi;Cs=1;const e=au(),l=ou(),d=Vr(),c=ca(),f=ua(),u=fa();return Pi=(h,i,n,t)=>{switch(i){case"===":return typeof h=="object"&&(h=h.version),typeof n=="object"&&(n=n.version),h===n;case"!==":return typeof h=="object"&&(h=h.version),typeof n=="object"&&(n=n.version),h!==n;case"":case"=":case"==":return e(h,n,t);case"!=":return l(h,n,t);case">":return d(h,n,t);case">=":return c(h,n,t);case"<":return f(h,n,t);case"<=":return u(h,n,t);default:throw new TypeError(`Invalid operator: ${i}`)}},Pi}var Ni,Os;function wf(){if(Os)return Ni;Os=1;const e=Ge(),l=Mt(),{safeRe:d,t:c}=vr();return Ni=(u,s)=>{if(u instanceof e)return u;if(typeof u=="number"&&(u=String(u)),typeof u!="string")return null;s=s||{};let h=null;if(!s.rtl)h=u.match(s.includePrerelease?d[c.COERCEFULL]:d[c.COERCE]);else{const p=s.includePrerelease?d[c.COERCERTLFULL]:d[c.COERCERTL];let g;for(;(g=p.exec(u))&&(!h||h.index+h[0].length!==u.length);)(!h||g.index+g[0].length!==h.index+h[0].length)&&(h=g),p.lastIndex=g.index+g[1].length+g[2].length;p.lastIndex=-1}if(h===null)return null;const i=h[2],n=h[3]||"0",t=h[4]||"0",o=s.includePrerelease&&h[5]?`-${h[5]}`:"",a=s.includePrerelease&&h[6]?`+${h[6]}`:"";return l(`${i}.${n}.${t}${o}${a}`,s)},Ni}var Fi,Is;function _f(){if(Is)return Fi;Is=1;class e{constructor(){this.max=1e3,this.map=new Map}get(d){const c=this.map.get(d);if(c!==void 0)return this.map.delete(d),this.map.set(d,c),c}delete(d){return this.map.delete(d)}set(d,c){if(!this.delete(d)&&c!==void 0){if(this.map.size>=this.max){const u=this.map.keys().next().value;this.delete(u)}this.map.set(d,c)}return this}}return Fi=e,Fi}var Li,Ds;function nt(){if(Ds)return Li;Ds=1;const e=/\s+/g;class l{constructor(P,F){if(F=f(F),P instanceof l)return P.loose===!!F.loose&&P.includePrerelease===!!F.includePrerelease?P:new l(P.raw,F);if(P instanceof u)return this.raw=P.value,this.set=[[P]],this.formatted=void 0,this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=P.trim().replace(e," "),this.set=this.raw.split("||").map(k=>this.parseRange(k.trim())).filter(k=>k.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const k=this.set[0];if(this.set=this.set.filter(K=>!E(K[0])),this.set.length===0)this.set=[k];else if(this.set.length>1){for(const K of this.set)if(K.length===1&&m(K[0])){this.set=[K];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let P=0;P<this.set.length;P++){P>0&&(this.formatted+="||");const F=this.set[P];for(let k=0;k<F.length;k++)k>0&&(this.formatted+=" "),this.formatted+=F[k].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(P){const k=((this.options.includePrerelease&&p)|(this.options.loose&&g))+":"+P,K=c.get(k);if(K)return K;const W=this.options.loose,ne=W?i[n.HYPHENRANGELOOSE]:i[n.HYPHENRANGE];P=P.replace(ne,x(this.options.includePrerelease)),s("hyphen replace",P),P=P.replace(i[n.COMPARATORTRIM],t),s("comparator trim",P),P=P.replace(i[n.TILDETRIM],o),s("tilde trim",P),P=P.replace(i[n.CARETTRIM],a),s("caret trim",P);let ce=P.split(" ").map(J=>b(J,this.options)).join(" ").split(/\s+/).map(J=>U(J,this.options));W&&(ce=ce.filter(J=>(s("loose invalid filter",J,this.options),!!J.match(i[n.COMPARATORLOOSE])))),s("range list",ce);const ue=new Map,ie=ce.map(J=>new u(J,this.options));for(const J of ie){if(E(J))return[J];ue.set(J.value,J)}ue.size>1&&ue.has("")&&ue.delete("");const Te=[...ue.values()];return c.set(k,Te),Te}intersects(P,F){if(!(P instanceof l))throw new TypeError("a Range is required");return this.set.some(k=>_(k,F)&&P.set.some(K=>_(K,F)&&k.every(W=>K.every(ne=>W.intersects(ne,F)))))}test(P){if(!P)return!1;if(typeof P=="string")try{P=new h(P,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(q(this.set[F],P,this.options))return!0;return!1}}Li=l;const d=_f(),c=new d,f=sa(),u=zr(),s=Yr(),h=Ge(),{safeRe:i,t:n,comparatorTrimReplace:t,tildeTrimReplace:o,caretTrimReplace:a}=vr(),{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:g}=Wr(),E=N=>N.value==="<0.0.0-0",m=N=>N.value==="",_=(N,P)=>{let F=!0;const k=N.slice();let K=k.pop();for(;F&&k.length;)F=k.every(W=>K.intersects(W,P)),K=k.pop();return F},b=(N,P)=>(N=N.replace(i[n.BUILD],""),s("comp",N,P),N=R(N,P),s("caret",N),N=I(N,P),s("tildes",N),N=T(N,P),s("xrange",N),N=M(N,P),s("stars",N),N),O=N=>!N||N.toLowerCase()==="x"||N==="*",I=(N,P)=>N.trim().split(/\s+/).map(F=>$(F,P)).join(" "),$=(N,P)=>{const F=P.loose?i[n.TILDELOOSE]:i[n.TILDE];return N.replace(F,(k,K,W,ne,ce)=>{s("tilde",N,k,K,W,ne,ce);let ue;return O(K)?ue="":O(W)?ue=`>=${K}.0.0 <${+K+1}.0.0-0`:O(ne)?ue=`>=${K}.${W}.0 <${K}.${+W+1}.0-0`:ce?(s("replaceTilde pr",ce),ue=`>=${K}.${W}.${ne}-${ce} <${K}.${+W+1}.0-0`):ue=`>=${K}.${W}.${ne} <${K}.${+W+1}.0-0`,s("tilde return",ue),ue})},R=(N,P)=>N.trim().split(/\s+/).map(F=>A(F,P)).join(" "),A=(N,P)=>{s("caret",N,P);const F=P.loose?i[n.CARETLOOSE]:i[n.CARET],k=P.includePrerelease?"-0":"";return N.replace(F,(K,W,ne,ce,ue)=>{s("caret",N,K,W,ne,ce,ue);let ie;return O(W)?ie="":O(ne)?ie=`>=${W}.0.0${k} <${+W+1}.0.0-0`:O(ce)?W==="0"?ie=`>=${W}.${ne}.0${k} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.0${k} <${+W+1}.0.0-0`:ue?(s("replaceCaret pr",ue),W==="0"?ne==="0"?ie=`>=${W}.${ne}.${ce}-${ue} <${W}.${ne}.${+ce+1}-0`:ie=`>=${W}.${ne}.${ce}-${ue} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.${ce}-${ue} <${+W+1}.0.0-0`):(s("no pr"),W==="0"?ne==="0"?ie=`>=${W}.${ne}.${ce}${k} <${W}.${ne}.${+ce+1}-0`:ie=`>=${W}.${ne}.${ce}${k} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.${ce} <${+W+1}.0.0-0`),s("caret return",ie),ie})},T=(N,P)=>(s("replaceXRanges",N,P),N.split(/\s+/).map(F=>y(F,P)).join(" ")),y=(N,P)=>{N=N.trim();const F=P.loose?i[n.XRANGELOOSE]:i[n.XRANGE];return N.replace(F,(k,K,W,ne,ce,ue)=>{s("xRange",N,k,K,W,ne,ce,ue);const ie=O(W),Te=ie||O(ne),J=Te||O(ce),Ee=J;return K==="="&&Ee&&(K=""),ue=P.includePrerelease?"-0":"",ie?K===">"||K==="<"?k="<0.0.0-0":k="*":K&&Ee?(Te&&(ne=0),ce=0,K===">"?(K=">=",Te?(W=+W+1,ne=0,ce=0):(ne=+ne+1,ce=0)):K==="<="&&(K="<",Te?W=+W+1:ne=+ne+1),K==="<"&&(ue="-0"),k=`${K+W}.${ne}.${ce}${ue}`):Te?k=`>=${W}.0.0${ue} <${+W+1}.0.0-0`:J&&(k=`>=${W}.${ne}.0${ue} <${W}.${+ne+1}.0-0`),s("xRange return",k),k})},M=(N,P)=>(s("replaceStars",N,P),N.trim().replace(i[n.STAR],"")),U=(N,P)=>(s("replaceGTE0",N,P),N.trim().replace(i[P.includePrerelease?n.GTE0PRE:n.GTE0],"")),x=N=>(P,F,k,K,W,ne,ce,ue,ie,Te,J,Ee)=>(O(k)?F="":O(K)?F=`>=${k}.0.0${N?"-0":""}`:O(W)?F=`>=${k}.${K}.0${N?"-0":""}`:ne?F=`>=${F}`:F=`>=${F}${N?"-0":""}`,O(ie)?ue="":O(Te)?ue=`<${+ie+1}.0.0-0`:O(J)?ue=`<${ie}.${+Te+1}.0-0`:Ee?ue=`<=${ie}.${Te}.${J}-${Ee}`:N?ue=`<${ie}.${Te}.${+J+1}-0`:ue=`<=${ue}`,`${F} ${ue}`.trim()),q=(N,P,F)=>{for(let k=0;k<N.length;k++)if(!N[k].test(P))return!1;if(P.prerelease.length&&!F.includePrerelease){for(let k=0;k<N.length;k++)if(s(N[k].semver),N[k].semver!==u.ANY&&N[k].semver.prerelease.length>0){const K=N[k].semver;if(K.major===P.major&&K.minor===P.minor&&K.patch===P.patch)return!0}return!1}return!0};return Li}var xi,Ps;function zr(){if(Ps)return xi;Ps=1;const e=Symbol("SemVer ANY");class l{static get ANY(){return e}constructor(t,o){if(o=d(o),t instanceof l){if(t.loose===!!o.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),s("comparator",t,o),this.options=o,this.loose=!!o.loose,this.parse(t),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(t){const o=this.options.loose?c[f.COMPARATORLOOSE]:c[f.COMPARATOR],a=t.match(o);if(!a)throw new TypeError(`Invalid comparator: ${t}`);this.operator=a[1]!==void 0?a[1]:"",this.operator==="="&&(this.operator=""),a[2]?this.semver=new h(a[2],this.options.loose):this.semver=e}toString(){return this.value}test(t){if(s("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if(typeof t=="string")try{t=new h(t,this.options)}catch{return!1}return u(t,this.operator,this.semver,this.options)}intersects(t,o){if(!(t instanceof l))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new i(t.value,o).test(this.value):t.operator===""?t.value===""?!0:new i(this.value,o).test(t.semver):(o=d(o),o.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!o.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||u(this.semver,"<",t.semver,o)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||u(this.semver,">",t.semver,o)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}}xi=l;const d=sa(),{safeRe:c,t:f}=vr(),u=su(),s=Yr(),h=Ge(),i=nt();return xi}var Ui,Ns;function Xr(){if(Ns)return Ui;Ns=1;const e=nt();return Ui=(d,c,f)=>{try{c=new e(c,f)}catch{return!1}return c.test(d)},Ui}var ki,Fs;function Sf(){if(Fs)return ki;Fs=1;const e=nt();return ki=(d,c)=>new e(d,c).set.map(f=>f.map(u=>u.value).join(" ").trim().split(" ")),ki}var qi,Ls;function Af(){if(Ls)return qi;Ls=1;const e=Ge(),l=nt();return qi=(c,f,u)=>{let s=null,h=null,i=null;try{i=new l(f,u)}catch{return null}return c.forEach(n=>{i.test(n)&&(!s||h.compare(n)===-1)&&(s=n,h=new e(s,u))}),s},qi}var Mi,xs;function Tf(){if(xs)return Mi;xs=1;const e=Ge(),l=nt();return Mi=(c,f,u)=>{let s=null,h=null,i=null;try{i=new l(f,u)}catch{return null}return c.forEach(n=>{i.test(n)&&(!s||h.compare(n)===1)&&(s=n,h=new e(s,u))}),s},Mi}var $i,Us;function bf(){if(Us)return $i;Us=1;const e=Ge(),l=nt(),d=Vr();return $i=(f,u)=>{f=new l(f,u);let s=new e("0.0.0");if(f.test(s)||(s=new e("0.0.0-0"),f.test(s)))return s;s=null;for(let h=0;h<f.set.length;++h){const i=f.set[h];let n=null;i.forEach(t=>{const o=new e(t.semver.version);switch(t.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!n||d(o,n))&&(n=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${t.operator}`)}}),n&&(!s||d(s,n))&&(s=n)}return s&&f.test(s)?s:null},$i}var Bi,ks;function Rf(){if(ks)return Bi;ks=1;const e=nt();return Bi=(d,c)=>{try{return new e(d,c).range||"*"}catch{return null}},Bi}var Hi,qs;function da(){if(qs)return Hi;qs=1;const e=Ge(),l=zr(),{ANY:d}=l,c=nt(),f=Xr(),u=Vr(),s=ua(),h=fa(),i=ca();return Hi=(t,o,a,p)=>{t=new e(t,p),o=new c(o,p);let g,E,m,_,b;switch(a){case">":g=u,E=h,m=s,_=">",b=">=";break;case"<":g=s,E=i,m=u,_="<",b="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(f(t,o,p))return!1;for(let O=0;O<o.set.length;++O){const I=o.set[O];let $=null,R=null;if(I.forEach(A=>{A.semver===d&&(A=new l(">=0.0.0")),$=$||A,R=R||A,g(A.semver,$.semver,p)?$=A:m(A.semver,R.semver,p)&&(R=A)}),$.operator===_||$.operator===b||(!R.operator||R.operator===_)&&E(t,R.semver))return!1;if(R.operator===b&&m(t,R.semver))return!1}return!0},Hi}var ji,Ms;function Cf(){if(Ms)return ji;Ms=1;const e=da();return ji=(d,c,f)=>e(d,c,">",f),ji}var Gi,$s;function Of(){if($s)return Gi;$s=1;const e=da();return Gi=(d,c,f)=>e(d,c,"<",f),Gi}var Wi,Bs;function If(){if(Bs)return Wi;Bs=1;const e=nt();return Wi=(d,c,f)=>(d=new e(d,f),c=new e(c,f),d.intersects(c,f)),Wi}var Yi,Hs;function Df(){if(Hs)return Yi;Hs=1;const e=Xr(),l=rt();return Yi=(d,c,f)=>{const u=[];let s=null,h=null;const i=d.sort((a,p)=>l(a,p,f));for(const a of i)e(a,c,f)?(h=a,s||(s=a)):(h&&u.push([s,h]),h=null,s=null);s&&u.push([s,null]);const n=[];for(const[a,p]of u)a===p?n.push(a):!p&&a===i[0]?n.push("*"):p?a===i[0]?n.push(`<=${p}`):n.push(`${a} - ${p}`):n.push(`>=${a}`);const t=n.join(" || "),o=typeof c.raw=="string"?c.raw:String(c);return t.length<o.length?t:c},Yi}var Vi,js;function Pf(){if(js)return Vi;js=1;const e=nt(),l=zr(),{ANY:d}=l,c=Xr(),f=rt(),u=(o,a,p={})=>{if(o===a)return!0;o=new e(o,p),a=new e(a,p);let g=!1;e:for(const E of o.set){for(const m of a.set){const _=i(E,m,p);if(g=g||_!==null,_)continue e}if(g)return!1}return!0},s=[new l(">=0.0.0-0")],h=[new l(">=0.0.0")],i=(o,a,p)=>{if(o===a)return!0;if(o.length===1&&o[0].semver===d){if(a.length===1&&a[0].semver===d)return!0;p.includePrerelease?o=s:o=h}if(a.length===1&&a[0].semver===d){if(p.includePrerelease)return!0;a=h}const g=new Set;let E,m;for(const T of o)T.operator===">"||T.operator===">="?E=n(E,T,p):T.operator==="<"||T.operator==="<="?m=t(m,T,p):g.add(T.semver);if(g.size>1)return null;let _;if(E&&m){if(_=f(E.semver,m.semver,p),_>0)return null;if(_===0&&(E.operator!==">="||m.operator!=="<="))return null}for(const T of g){if(E&&!c(T,String(E),p)||m&&!c(T,String(m),p))return null;for(const y of a)if(!c(T,String(y),p))return!1;return!0}let b,O,I,$,R=m&&!p.includePrerelease&&m.semver.prerelease.length?m.semver:!1,A=E&&!p.includePrerelease&&E.semver.prerelease.length?E.semver:!1;R&&R.prerelease.length===1&&m.operator==="<"&&R.prerelease[0]===0&&(R=!1);for(const T of a){if($=$||T.operator===">"||T.operator===">=",I=I||T.operator==="<"||T.operator==="<=",E){if(A&&T.semver.prerelease&&T.semver.prerelease.length&&T.semver.major===A.major&&T.semver.minor===A.minor&&T.semver.patch===A.patch&&(A=!1),T.operator===">"||T.operator===">="){if(b=n(E,T,p),b===T&&b!==E)return!1}else if(E.operator===">="&&!c(E.semver,String(T),p))return!1}if(m){if(R&&T.semver.prerelease&&T.semver.prerelease.length&&T.semver.major===R.major&&T.semver.minor===R.minor&&T.semver.patch===R.patch&&(R=!1),T.operator==="<"||T.operator==="<="){if(O=t(m,T,p),O===T&&O!==m)return!1}else if(m.operator==="<="&&!c(m.semver,String(T),p))return!1}if(!T.operator&&(m||E)&&_!==0)return!1}return!(E&&I&&!m&&_!==0||m&&$&&!E&&_!==0||A||R)},n=(o,a,p)=>{if(!o)return a;const g=f(o.semver,a.semver,p);return g>0?o:g<0||a.operator===">"&&o.operator===">="?a:o},t=(o,a,p)=>{if(!o)return a;const g=f(o.semver,a.semver,p);return g<0?o:g>0||a.operator==="<"&&o.operator==="<="?a:o};return Vi=u,Vi}var zi,Gs;function lu(){if(Gs)return zi;Gs=1;const e=vr(),l=Wr(),d=Ge(),c=iu(),f=Mt(),u=lf(),s=uf(),h=cf(),i=ff(),n=df(),t=hf(),o=pf(),a=mf(),p=rt(),g=gf(),E=vf(),m=la(),_=Ef(),b=yf(),O=Vr(),I=ua(),$=au(),R=ou(),A=ca(),T=fa(),y=su(),M=wf(),U=zr(),x=nt(),q=Xr(),N=Sf(),P=Af(),F=Tf(),k=bf(),K=Rf(),W=da(),ne=Cf(),ce=Of(),ue=If(),ie=Df(),Te=Pf();return zi={parse:f,valid:u,clean:s,inc:h,diff:i,major:n,minor:t,patch:o,prerelease:a,compare:p,rcompare:g,compareLoose:E,compareBuild:m,sort:_,rsort:b,gt:O,lt:I,eq:$,neq:R,gte:A,lte:T,cmp:y,coerce:M,Comparator:U,Range:x,satisfies:q,toComparators:N,maxSatisfying:P,minSatisfying:F,minVersion:k,validRange:K,outside:W,gtr:ne,ltr:ce,intersects:ue,simplifyRange:ie,subset:Te,SemVer:d,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:l.SEMVER_SPEC_VERSION,RELEASE_TYPES:l.RELEASE_TYPES,compareIdentifiers:c.compareIdentifiers,rcompareIdentifiers:c.rcompareIdentifiers},zi}var Ft={},fr={exports:{}};fr.exports;var Ws;function Nf(){return Ws||(Ws=1,(function(e,l){var d=200,c="__lodash_hash_undefined__",f=1,u=2,s=9007199254740991,h="[object Arguments]",i="[object Array]",n="[object AsyncFunction]",t="[object Boolean]",o="[object Date]",a="[object Error]",p="[object Function]",g="[object GeneratorFunction]",E="[object Map]",m="[object Number]",_="[object Null]",b="[object Object]",O="[object Promise]",I="[object Proxy]",$="[object RegExp]",R="[object Set]",A="[object String]",T="[object Symbol]",y="[object Undefined]",M="[object WeakMap]",U="[object ArrayBuffer]",x="[object DataView]",q="[object Float32Array]",N="[object Float64Array]",P="[object Int8Array]",F="[object Int16Array]",k="[object Int32Array]",K="[object Uint8Array]",W="[object Uint8ClampedArray]",ne="[object Uint16Array]",ce="[object Uint32Array]",ue=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,Te=/^(?:0|[1-9]\d*)$/,J={};J[q]=J[N]=J[P]=J[F]=J[k]=J[K]=J[W]=J[ne]=J[ce]=!0,J[h]=J[i]=J[U]=J[t]=J[x]=J[o]=J[a]=J[p]=J[E]=J[m]=J[b]=J[$]=J[R]=J[A]=J[M]=!1;var Ee=typeof tt=="object"&&tt&&tt.Object===Object&&tt,S=typeof self=="object"&&self&&self.Object===Object&&self,v=Ee||S||Function("return this")(),H=l&&!l.nodeType&&l,D=H&&!0&&e&&!e.nodeType&&e,le=D&&D.exports===H,me=le&&Ee.process,pe=(function(){try{return me&&me.binding&&me.binding("util")}catch{}})(),_e=pe&&pe.isTypedArray;function ye(C,L){for(var z=-1,se=C==null?0:C.length,De=0,Se=[];++z<se;){var Fe=C[z];L(Fe,z,C)&&(Se[De++]=Fe)}return Se}function Le(C,L){for(var z=-1,se=L.length,De=C.length;++z<se;)C[De+z]=L[z];return C}function Ce(C,L){for(var z=-1,se=C==null?0:C.length;++z<se;)if(L(C[z],z,C))return!0;return!1}function Me(C,L){for(var z=-1,se=Array(C);++z<C;)se[z]=L(z);return se}function gt(C){return function(L){return C(L)}}function at(C,L){return C.has(L)}function r(C,L){return C?.[L]}function B(C){var L=-1,z=Array(C.size);return C.forEach(function(se,De){z[++L]=[De,se]}),z}function G(C,L){return function(z){return C(L(z))}}function re(C){var L=-1,z=Array(C.size);return C.forEach(function(se){z[++L]=se}),z}var Y=Array.prototype,te=Function.prototype,Z=Object.prototype,ae=v["__core-js_shared__"],ge=te.toString,ve=Z.hasOwnProperty,be=(function(){var C=/[^.]+$/.exec(ae&&ae.keys&&ae.keys.IE_PROTO||"");return C?"Symbol(src)_1."+C:""})(),de=Z.toString,xe=RegExp("^"+ge.call(ve).replace(ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=le?v.Buffer:void 0,j=v.Symbol,X=v.Uint8Array,V=Z.propertyIsEnumerable,Q=Y.splice,ee=j?j.toStringTag:void 0,fe=Object.getOwnPropertySymbols,oe=w?w.isBuffer:void 0,he=G(Object.keys,Object),we=Pt(v,"DataView"),Oe=Pt(v,"Map"),Ne=Pt(v,"Promise"),Re=Pt(v,"Set"),Dt=Pt(v,"WeakMap"),Ze=Pt(Object,"create"),vt=wt(we),vu=wt(Oe),Eu=wt(Ne),yu=wt(Re),wu=wt(Dt),ma=j?j.prototype:void 0,Jr=ma?ma.valueOf:void 0;function Et(C){var L=-1,z=C==null?0:C.length;for(this.clear();++L<z;){var se=C[L];this.set(se[0],se[1])}}function _u(){this.__data__=Ze?Ze(null):{},this.size=0}function Su(C){var L=this.has(C)&&delete this.__data__[C];return this.size-=L?1:0,L}function Au(C){var L=this.__data__;if(Ze){var z=L[C];return z===c?void 0:z}return ve.call(L,C)?L[C]:void 0}function Tu(C){var L=this.__data__;return Ze?L[C]!==void 0:ve.call(L,C)}function bu(C,L){var z=this.__data__;return this.size+=this.has(C)?0:1,z[C]=Ze&&L===void 0?c:L,this}Et.prototype.clear=_u,Et.prototype.delete=Su,Et.prototype.get=Au,Et.prototype.has=Tu,Et.prototype.set=bu;function ot(C){var L=-1,z=C==null?0:C.length;for(this.clear();++L<z;){var se=C[L];this.set(se[0],se[1])}}function Ru(){this.__data__=[],this.size=0}function Cu(C){var L=this.__data__,z=yr(L,C);if(z<0)return!1;var se=L.length-1;return z==se?L.pop():Q.call(L,z,1),--this.size,!0}function Ou(C){var L=this.__data__,z=yr(L,C);return z<0?void 0:L[z][1]}function Iu(C){return yr(this.__data__,C)>-1}function Du(C,L){var z=this.__data__,se=yr(z,C);return se<0?(++this.size,z.push([C,L])):z[se][1]=L,this}ot.prototype.clear=Ru,ot.prototype.delete=Cu,ot.prototype.get=Ou,ot.prototype.has=Iu,ot.prototype.set=Du;function yt(C){var L=-1,z=C==null?0:C.length;for(this.clear();++L<z;){var se=C[L];this.set(se[0],se[1])}}function Pu(){this.size=0,this.__data__={hash:new Et,map:new(Oe||ot),string:new Et}}function Nu(C){var L=wr(this,C).delete(C);return this.size-=L?1:0,L}function Fu(C){return wr(this,C).get(C)}function Lu(C){return wr(this,C).has(C)}function xu(C,L){var z=wr(this,C),se=z.size;return z.set(C,L),this.size+=z.size==se?0:1,this}yt.prototype.clear=Pu,yt.prototype.delete=Nu,yt.prototype.get=Fu,yt.prototype.has=Lu,yt.prototype.set=xu;function Er(C){var L=-1,z=C==null?0:C.length;for(this.__data__=new yt;++L<z;)this.add(C[L])}function Uu(C){return this.__data__.set(C,c),this}function ku(C){return this.__data__.has(C)}Er.prototype.add=Er.prototype.push=Uu,Er.prototype.has=ku;function ct(C){var L=this.__data__=new ot(C);this.size=L.size}function qu(){this.__data__=new ot,this.size=0}function Mu(C){var L=this.__data__,z=L.delete(C);return this.size=L.size,z}function $u(C){return this.__data__.get(C)}function Bu(C){return this.__data__.has(C)}function Hu(C,L){var z=this.__data__;if(z instanceof ot){var se=z.__data__;if(!Oe||se.length<d-1)return se.push([C,L]),this.size=++z.size,this;z=this.__data__=new yt(se)}return z.set(C,L),this.size=z.size,this}ct.prototype.clear=qu,ct.prototype.delete=Mu,ct.prototype.get=$u,ct.prototype.has=Bu,ct.prototype.set=Hu;function ju(C,L){var z=_r(C),se=!z&&ic(C),De=!z&&!se&&Kr(C),Se=!z&&!se&&!De&&Ta(C),Fe=z||se||De||Se,Ue=Fe?Me(C.length,String):[],ke=Ue.length;for(var Pe in C)ve.call(C,Pe)&&!(Fe&&(Pe=="length"||De&&(Pe=="offset"||Pe=="parent")||Se&&(Pe=="buffer"||Pe=="byteLength"||Pe=="byteOffset")||Zu(Pe,ke)))&&Ue.push(Pe);return Ue}function yr(C,L){for(var z=C.length;z--;)if(wa(C[z][0],L))return z;return-1}function Gu(C,L,z){var se=L(C);return _r(C)?se:Le(se,z(C))}function Bt(C){return C==null?C===void 0?y:_:ee&&ee in Object(C)?Ku(C):nc(C)}function ga(C){return Ht(C)&&Bt(C)==h}function va(C,L,z,se,De){return C===L?!0:C==null||L==null||!Ht(C)&&!Ht(L)?C!==C&&L!==L:Wu(C,L,z,se,va,De)}function Wu(C,L,z,se,De,Se){var Fe=_r(C),Ue=_r(L),ke=Fe?i:ft(C),Pe=Ue?i:ft(L);ke=ke==h?b:ke,Pe=Pe==h?b:Pe;var Ye=ke==b,et=Pe==b,$e=ke==Pe;if($e&&Kr(C)){if(!Kr(L))return!1;Fe=!0,Ye=!1}if($e&&!Ye)return Se||(Se=new ct),Fe||Ta(C)?Ea(C,L,z,se,De,Se):Xu(C,L,ke,z,se,De,Se);if(!(z&f)){var ze=Ye&&ve.call(C,"__wrapped__"),Xe=et&&ve.call(L,"__wrapped__");if(ze||Xe){var dt=ze?C.value():C,st=Xe?L.value():L;return Se||(Se=new ct),De(dt,st,z,se,Se)}}return $e?(Se||(Se=new ct),Ju(C,L,z,se,De,Se)):!1}function Yu(C){if(!Aa(C)||tc(C))return!1;var L=_a(C)?xe:ie;return L.test(wt(C))}function Vu(C){return Ht(C)&&Sa(C.length)&&!!J[Bt(C)]}function zu(C){if(!rc(C))return he(C);var L=[];for(var z in Object(C))ve.call(C,z)&&z!="constructor"&&L.push(z);return L}function Ea(C,L,z,se,De,Se){var Fe=z&f,Ue=C.length,ke=L.length;if(Ue!=ke&&!(Fe&&ke>Ue))return!1;var Pe=Se.get(C);if(Pe&&Se.get(L))return Pe==L;var Ye=-1,et=!0,$e=z&u?new Er:void 0;for(Se.set(C,L),Se.set(L,C);++Ye<Ue;){var ze=C[Ye],Xe=L[Ye];if(se)var dt=Fe?se(Xe,ze,Ye,L,C,Se):se(ze,Xe,Ye,C,L,Se);if(dt!==void 0){if(dt)continue;et=!1;break}if($e){if(!Ce(L,function(st,_t){if(!at($e,_t)&&(ze===st||De(ze,st,z,se,Se)))return $e.push(_t)})){et=!1;break}}else if(!(ze===Xe||De(ze,Xe,z,se,Se))){et=!1;break}}return Se.delete(C),Se.delete(L),et}function Xu(C,L,z,se,De,Se,Fe){switch(z){case x:if(C.byteLength!=L.byteLength||C.byteOffset!=L.byteOffset)return!1;C=C.buffer,L=L.buffer;case U:return!(C.byteLength!=L.byteLength||!Se(new X(C),new X(L)));case t:case o:case m:return wa(+C,+L);case a:return C.name==L.name&&C.message==L.message;case $:case A:return C==L+"";case E:var Ue=B;case R:var ke=se&f;if(Ue||(Ue=re),C.size!=L.size&&!ke)return!1;var Pe=Fe.get(C);if(Pe)return Pe==L;se|=u,Fe.set(C,L);var Ye=Ea(Ue(C),Ue(L),se,De,Se,Fe);return Fe.delete(C),Ye;case T:if(Jr)return Jr.call(C)==Jr.call(L)}return!1}function Ju(C,L,z,se,De,Se){var Fe=z&f,Ue=ya(C),ke=Ue.length,Pe=ya(L),Ye=Pe.length;if(ke!=Ye&&!Fe)return!1;for(var et=ke;et--;){var $e=Ue[et];if(!(Fe?$e in L:ve.call(L,$e)))return!1}var ze=Se.get(C);if(ze&&Se.get(L))return ze==L;var Xe=!0;Se.set(C,L),Se.set(L,C);for(var dt=Fe;++et<ke;){$e=Ue[et];var st=C[$e],_t=L[$e];if(se)var ba=Fe?se(_t,st,$e,L,C,Se):se(st,_t,$e,C,L,Se);if(!(ba===void 0?st===_t||De(st,_t,z,se,Se):ba)){Xe=!1;break}dt||(dt=$e=="constructor")}if(Xe&&!dt){var Sr=C.constructor,Ar=L.constructor;Sr!=Ar&&"constructor"in C&&"constructor"in L&&!(typeof Sr=="function"&&Sr instanceof Sr&&typeof Ar=="function"&&Ar instanceof Ar)&&(Xe=!1)}return Se.delete(C),Se.delete(L),Xe}function ya(C){return Gu(C,sc,Qu)}function wr(C,L){var z=C.__data__;return ec(L)?z[typeof L=="string"?"string":"hash"]:z.map}function Pt(C,L){var z=r(C,L);return Yu(z)?z:void 0}function Ku(C){var L=ve.call(C,ee),z=C[ee];try{C[ee]=void 0;var se=!0}catch{}var De=de.call(C);return se&&(L?C[ee]=z:delete C[ee]),De}var Qu=fe?function(C){return C==null?[]:(C=Object(C),ye(fe(C),function(L){return V.call(C,L)}))}:lc,ft=Bt;(we&&ft(new we(new ArrayBuffer(1)))!=x||Oe&&ft(new Oe)!=E||Ne&&ft(Ne.resolve())!=O||Re&&ft(new Re)!=R||Dt&&ft(new Dt)!=M)&&(ft=function(C){var L=Bt(C),z=L==b?C.constructor:void 0,se=z?wt(z):"";if(se)switch(se){case vt:return x;case vu:return E;case Eu:return O;case yu:return R;case wu:return M}return L});function Zu(C,L){return L=L??s,!!L&&(typeof C=="number"||Te.test(C))&&C>-1&&C%1==0&&C<L}function ec(C){var L=typeof C;return L=="string"||L=="number"||L=="symbol"||L=="boolean"?C!=="__proto__":C===null}function tc(C){return!!be&&be in C}function rc(C){var L=C&&C.constructor,z=typeof L=="function"&&L.prototype||Z;return C===z}function nc(C){return de.call(C)}function wt(C){if(C!=null){try{return ge.call(C)}catch{}try{return C+""}catch{}}return""}function wa(C,L){return C===L||C!==C&&L!==L}var ic=ga((function(){return arguments})())?ga:function(C){return Ht(C)&&ve.call(C,"callee")&&!V.call(C,"callee")},_r=Array.isArray;function ac(C){return C!=null&&Sa(C.length)&&!_a(C)}var Kr=oe||uc;function oc(C,L){return va(C,L)}function _a(C){if(!Aa(C))return!1;var L=Bt(C);return L==p||L==g||L==n||L==I}function Sa(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=s}function Aa(C){var L=typeof C;return C!=null&&(L=="object"||L=="function")}function Ht(C){return C!=null&&typeof C=="object"}var Ta=_e?gt(_e):Vu;function sc(C){return ac(C)?ju(C):zu(C)}function lc(){return[]}function uc(){return!1}e.exports=oc})(fr,fr.exports)),fr.exports}var Ys;function Ff(){if(Ys)return Ft;Ys=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.DownloadedUpdateHelper=void 0,Ft.createTempUpdateFile=h;const e=pr,l=ut,d=Nf(),c=mt(),f=Ie;let u=class{constructor(n){this.cacheDir=n,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return f.join(this.cacheDir,"pending")}async validateDownloadedPath(n,t,o,a){if(this.versionInfo!=null&&this.file===n&&this.fileInfo!=null)return d(this.versionInfo,t)&&d(this.fileInfo.info,o.info)&&await(0,c.pathExists)(n)?n:null;const p=await this.getValidCachedUpdateFile(o,a);return p===null?null:(a.info(`Update has already been downloaded to ${n}).`),this._file=p,p)}async setDownloadedFile(n,t,o,a,p,g){this._file=n,this._packageFile=t,this.versionInfo=o,this.fileInfo=a,this._downloadedFileInfo={fileName:p,sha512:a.info.sha512,isAdminRightsRequired:a.info.isAdminRightsRequired===!0},g&&await(0,c.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,c.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(n,t){const o=this.getUpdateInfoFile();if(!await(0,c.pathExists)(o))return null;let p;try{p=await(0,c.readJson)(o)}catch(_){let b="No cached update info available";return _.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),b+=` (error on read: ${_.message})`),t.info(b),null}if(!(p?.fileName!==null))return t.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(n.info.sha512!==p.sha512)return t.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${p.sha512}, expected: ${n.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const E=f.join(this.cacheDirForPendingUpdate,p.fileName);if(!await(0,c.pathExists)(E))return t.info("Cached update file doesn't exist"),null;const m=await s(E);return n.info.sha512!==m?(t.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${m}, expected: ${n.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=p,E)}getUpdateInfoFile(){return f.join(this.cacheDirForPendingUpdate,"update-info.json")}};Ft.DownloadedUpdateHelper=u;function s(i,n="sha512",t="base64",o){return new Promise((a,p)=>{const g=(0,e.createHash)(n);g.on("error",p).setEncoding(t),(0,l.createReadStream)(i,{...o,highWaterMark:1024*1024}).on("error",p).on("end",()=>{g.end(),a(g.read())}).pipe(g,{end:!1})})}async function h(i,n,t){let o=0,a=f.join(n,i);for(let p=0;p<3;p++)try{return await(0,c.unlink)(a),a}catch(g){if(g.code==="ENOENT")return a;t.warn(`Error on remove temp update file: ${g}`),a=f.join(n,`${o++}-${i}`)}return a}return Ft}var zt={},xr={},Vs;function Lf(){if(Vs)return xr;Vs=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.getAppCacheDir=d;const e=Ie,l=Hr;function d(){const c=(0,l.homedir)();let f;return process.platform==="win32"?f=process.env.LOCALAPPDATA||e.join(c,"AppData","Local"):process.platform==="darwin"?f=e.join(c,"Library","Caches"):f=process.env.XDG_CACHE_HOME||e.join(c,".cache"),f}return xr}var zs;function xf(){if(zs)return zt;zs=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.ElectronAppAdapter=void 0;const e=Ie,l=Lf();let d=class{constructor(f=Ae.app){this.app=f}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?e.join(process.resourcesPath,"app-update.yml"):e.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,l.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(f){this.app.once("quit",(u,s)=>f(s))}};return zt.ElectronAppAdapter=d,zt}var Xi={},Xs;function Uf(){return Xs||(Xs=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ElectronHttpExecutor=e.NET_SESSION_NAME=void 0,e.getNetSession=d;const l=qe();e.NET_SESSION_NAME="electron-updater";function d(){return Ae.session.fromPartition(e.NET_SESSION_NAME,{cache:!1})}class c extends l.HttpExecutor{constructor(u){super(),this.proxyLoginCallback=u,this.cachedSession=null}async download(u,s,h){return await h.cancellationToken.createPromise((i,n,t)=>{const o={headers:h.headers||void 0,redirect:"manual"};(0,l.configureRequestUrl)(u,o),(0,l.configureRequestOptions)(o),this.doDownload(o,{destination:s,options:h,onCancel:t,callback:a=>{a==null?i(s):n(a)},responseHandler:null},0)})}createRequest(u,s){u.headers&&u.headers.Host&&(u.host=u.headers.Host,delete u.headers.Host),this.cachedSession==null&&(this.cachedSession=d());const h=Ae.net.request({...u,session:this.cachedSession});return h.on("response",s),this.proxyLoginCallback!=null&&h.on("login",this.proxyLoginCallback),h}addRedirectHandlers(u,s,h,i,n){u.on("redirect",(t,o,a)=>{u.abort(),i>this.maxRedirects?h(this.createMaxRedirectError()):n(l.HttpExecutor.prepareRedirectUrlOptions(a,s))})}}e.ElectronHttpExecutor=c})(Xi)),Xi}var Xt={},Rt={},Ji,Js;function kf(){if(Js)return Ji;Js=1;var e="[object Symbol]",l=/[\\^$.*+?()[\]{}|]/g,d=RegExp(l.source),c=typeof tt=="object"&&tt&&tt.Object===Object&&tt,f=typeof self=="object"&&self&&self.Object===Object&&self,u=c||f||Function("return this")(),s=Object.prototype,h=s.toString,i=u.Symbol,n=i?i.prototype:void 0,t=n?n.toString:void 0;function o(m){if(typeof m=="string")return m;if(p(m))return t?t.call(m):"";var _=m+"";return _=="0"&&1/m==-1/0?"-0":_}function a(m){return!!m&&typeof m=="object"}function p(m){return typeof m=="symbol"||a(m)&&h.call(m)==e}function g(m){return m==null?"":o(m)}function E(m){return m=g(m),m&&d.test(m)?m.replace(l,"\\$&"):m}return Ji=E,Ji}var Ks;function Ot(){if(Ks)return Rt;Ks=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.newBaseUrl=d,Rt.newUrlFromBase=c,Rt.getChannelFilename=f,Rt.blockmapFiles=u;const e=Ut,l=kf();function d(s){const h=new e.URL(s);return h.pathname.endsWith("/")||(h.pathname+="/"),h}function c(s,h,i=!1){const n=new e.URL(s,h),t=h.search;return t!=null&&t.length!==0?n.search=t:i&&(n.search=`noCache=${Date.now().toString(32)}`),n}function f(s){return`${s}.yml`}function u(s,h,i){const n=c(`${s.pathname}.blockmap`,s);return[c(`${s.pathname.replace(new RegExp(l(i),"g"),h)}.blockmap`,s),n]}return Rt}var lt={},Qs;function Qe(){if(Qs)return lt;Qs=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.Provider=void 0,lt.findFile=f,lt.parseUpdateInfo=u,lt.getFileList=s,lt.resolveFiles=h;const e=qe(),l=oa(),d=Ot();let c=class{constructor(n){this.runtimeOptions=n,this.requestHeaders=null,this.executor=n.executor}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const n=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(n==="x64"?"":`-${n}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(n){return`${n}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(n){this.requestHeaders=n}httpRequest(n,t,o){return this.executor.request(this.createRequestOptions(n,t),o)}createRequestOptions(n,t){const o={};return this.requestHeaders==null?t!=null&&(o.headers=t):o.headers=t==null?this.requestHeaders:{...this.requestHeaders,...t},(0,e.configureRequestUrl)(n,o),o}};lt.Provider=c;function f(i,n,t){if(i.length===0)throw(0,e.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const o=i.find(a=>a.url.pathname.toLowerCase().endsWith(`.${n}`));return o??(t==null?i[0]:i.find(a=>!t.some(p=>a.url.pathname.toLowerCase().endsWith(`.${p}`))))}function u(i,n,t){if(i==null)throw(0,e.newError)(`Cannot parse update info from ${n} in the latest release artifacts (${t}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let o;try{o=(0,l.load)(i)}catch(a){throw(0,e.newError)(`Cannot parse update info from ${n} in the latest release artifacts (${t}): ${a.stack||a.message}, rawData: ${i}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return o}function s(i){const n=i.files;if(n!=null&&n.length>0)return n;if(i.path!=null)return[{url:i.path,sha2:i.sha2,sha512:i.sha512}];throw(0,e.newError)(`No files provided: ${(0,e.safeStringifyJson)(i)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function h(i,n,t=o=>o){const a=s(i).map(E=>{if(E.sha2==null&&E.sha512==null)throw(0,e.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,e.safeStringifyJson)(E)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,d.newUrlFromBase)(t(E.url),n),info:E}}),p=i.packages,g=p==null?null:p[process.arch]||p.ia32;return g!=null&&(a[0].packageInfo={...g,path:(0,d.newUrlFromBase)(t(g.path),n).href}),a}return lt}var Zs;function uu(){if(Zs)return Xt;Zs=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.GenericProvider=void 0;const e=qe(),l=Ot(),d=Qe();let c=class extends d.Provider{constructor(u,s,h){super(h),this.configuration=u,this.updater=s,this.baseUrl=(0,l.newBaseUrl)(this.configuration.url)}get channel(){const u=this.updater.channel||this.configuration.channel;return u==null?this.getDefaultChannelName():this.getCustomChannelName(u)}async getLatestVersion(){const u=(0,l.getChannelFilename)(this.channel),s=(0,l.newUrlFromBase)(u,this.baseUrl,this.updater.isAddNoCacheQuery);for(let h=0;;h++)try{return(0,d.parseUpdateInfo)(await this.httpRequest(s),u,s)}catch(i){if(i instanceof e.HttpError&&i.statusCode===404)throw(0,e.newError)(`Cannot find channel "${u}" update info: ${i.stack||i.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(i.code==="ECONNREFUSED"&&h<3){await new Promise((n,t)=>{try{setTimeout(n,1e3*h)}catch(o){t(o)}});continue}throw i}}resolveFiles(u){return(0,d.resolveFiles)(u,this.baseUrl)}};return Xt.GenericProvider=c,Xt}var Jt={},Kt={},el;function qf(){if(el)return Kt;el=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.BitbucketProvider=void 0;const e=qe(),l=Ot(),d=Qe();let c=class extends d.Provider{constructor(u,s,h){super({...h,isUseMultipleRangeRequest:!1}),this.configuration=u,this.updater=s;const{owner:i,slug:n}=u;this.baseUrl=(0,l.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${i}/${n}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const u=new e.CancellationToken,s=(0,l.getChannelFilename)(this.getCustomChannelName(this.channel)),h=(0,l.newUrlFromBase)(s,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(h,void 0,u);return(0,d.parseUpdateInfo)(i,s,h)}catch(i){throw(0,e.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(u){return(0,d.resolveFiles)(u,this.baseUrl)}toString(){const{owner:u,slug:s}=this.configuration;return`Bitbucket (owner: ${u}, slug: ${s}, channel: ${this.channel})`}};return Kt.BitbucketProvider=c,Kt}var pt={},tl;function cu(){if(tl)return pt;tl=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.GitHubProvider=pt.BaseGitHubProvider=void 0,pt.computeReleaseNotes=n;const e=qe(),l=lu(),d=Ut,c=Ot(),f=Qe(),u=/\/tag\/([^/]+)$/;class s extends f.Provider{constructor(o,a,p){super({...p,isUseMultipleRangeRequest:!1}),this.options=o,this.baseUrl=(0,c.newBaseUrl)((0,e.githubUrl)(o,a));const g=a==="github.com"?"api.github.com":a;this.baseApiUrl=(0,c.newBaseUrl)((0,e.githubUrl)(o,g))}computeGithubBasePath(o){const a=this.options.host;return a&&!["github.com","api.github.com"].includes(a)?`/api/v3${o}`:o}}pt.BaseGitHubProvider=s;let h=class extends s{constructor(o,a,p){super(o,"github.com",p),this.options=o,this.updater=a}get channel(){const o=this.updater.channel||this.options.channel;return o==null?this.getDefaultChannelName():this.getCustomChannelName(o)}async getLatestVersion(){var o,a,p,g,E;const m=new e.CancellationToken,_=await this.httpRequest((0,c.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},m),b=(0,e.parseXml)(_);let O=b.element("entry",!1,"No published versions on GitHub"),I=null;try{if(this.updater.allowPrerelease){const M=((o=this.updater)===null||o===void 0?void 0:o.channel)||((a=l.prerelease(this.updater.currentVersion))===null||a===void 0?void 0:a[0])||null;if(M===null)I=u.exec(O.element("link").attribute("href"))[1];else for(const U of b.getElements("entry")){const x=u.exec(U.element("link").attribute("href"));if(x===null)continue;const q=x[1],N=((p=l.prerelease(q))===null||p===void 0?void 0:p[0])||null,P=!M||["alpha","beta"].includes(M),F=N!==null&&!["alpha","beta"].includes(String(N));if(P&&!F&&!(M==="beta"&&N==="alpha")){I=q;break}if(N&&N===M){I=q;break}}}else{I=await this.getLatestTagName(m);for(const M of b.getElements("entry"))if(u.exec(M.element("link").attribute("href"))[1]===I){O=M;break}}}catch(M){throw(0,e.newError)(`Cannot parse releases feed: ${M.stack||M.message},
XML:
${_}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(I==null)throw(0,e.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let $,R="",A="";const T=async M=>{R=(0,c.getChannelFilename)(M),A=(0,c.newUrlFromBase)(this.getBaseDownloadPath(String(I),R),this.baseUrl);const U=this.createRequestOptions(A);try{return await this.executor.request(U,m)}catch(x){throw x instanceof e.HttpError&&x.statusCode===404?(0,e.newError)(`Cannot find ${R} in the latest release artifacts (${A}): ${x.stack||x.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):x}};try{let M=this.channel;this.updater.allowPrerelease&&(!((g=l.prerelease(I))===null||g===void 0)&&g[0])&&(M=this.getCustomChannelName(String((E=l.prerelease(I))===null||E===void 0?void 0:E[0]))),$=await T(M)}catch(M){if(this.updater.allowPrerelease)$=await T(this.getDefaultChannelName());else throw M}const y=(0,f.parseUpdateInfo)($,R,A);return y.releaseName==null&&(y.releaseName=O.elementValueOrEmpty("title")),y.releaseNotes==null&&(y.releaseNotes=n(this.updater.currentVersion,this.updater.fullChangelog,b,O)),{tag:I,...y}}async getLatestTagName(o){const a=this.options,p=a.host==null||a.host==="github.com"?(0,c.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new d.URL(`${this.computeGithubBasePath(`/repos/${a.owner}/${a.repo}/releases`)}/latest`,this.baseApiUrl);try{const g=await this.httpRequest(p,{Accept:"application/json"},o);return g==null?null:JSON.parse(g).tag_name}catch(g){throw(0,e.newError)(`Unable to find latest version on GitHub (${p}), please ensure a production release exists: ${g.stack||g.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(o){return(0,f.resolveFiles)(o,this.baseUrl,a=>this.getBaseDownloadPath(o.tag,a.replace(/ /g,"-")))}getBaseDownloadPath(o,a){return`${this.basePath}/download/${o}/${a}`}};pt.GitHubProvider=h;function i(t){const o=t.elementValueOrEmpty("content");return o==="No content."?"":o}function n(t,o,a,p){if(!o)return i(p);const g=[];for(const E of a.getElements("entry")){const m=/\/tag\/v?([^/]+)$/.exec(E.element("link").attribute("href"))[1];l.lt(t,m)&&g.push({version:m,note:i(E)})}return g.sort((E,m)=>l.rcompare(E.version,m.version))}return pt}var Qt={},rl;function Mf(){if(rl)return Qt;rl=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.KeygenProvider=void 0;const e=qe(),l=Ot(),d=Qe();let c=class extends d.Provider{constructor(u,s,h){super({...h,isUseMultipleRangeRequest:!1}),this.configuration=u,this.updater=s,this.defaultHostname="api.keygen.sh";const i=this.configuration.host||this.defaultHostname;this.baseUrl=(0,l.newBaseUrl)(`https://${i}/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const u=new e.CancellationToken,s=(0,l.getChannelFilename)(this.getCustomChannelName(this.channel)),h=(0,l.newUrlFromBase)(s,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(h,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},u);return(0,d.parseUpdateInfo)(i,s,h)}catch(i){throw(0,e.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(u){return(0,d.resolveFiles)(u,this.baseUrl)}toString(){const{account:u,product:s,platform:h}=this.configuration;return`Keygen (account: ${u}, product: ${s}, platform: ${h}, channel: ${this.channel})`}};return Qt.KeygenProvider=c,Qt}var Zt={},nl;function $f(){if(nl)return Zt;nl=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.PrivateGitHubProvider=void 0;const e=qe(),l=oa(),d=Ie,c=Ut,f=Ot(),u=cu(),s=Qe();let h=class extends u.BaseGitHubProvider{constructor(n,t,o,a){super(n,"api.github.com",a),this.updater=t,this.token=o}createRequestOptions(n,t){const o=super.createRequestOptions(n,t);return o.redirect="manual",o}async getLatestVersion(){const n=new e.CancellationToken,t=(0,f.getChannelFilename)(this.getDefaultChannelName()),o=await this.getLatestVersionInfo(n),a=o.assets.find(E=>E.name===t);if(a==null)throw(0,e.newError)(`Cannot find ${t} in the release ${o.html_url||o.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const p=new c.URL(a.url);let g;try{g=(0,l.load)(await this.httpRequest(p,this.configureHeaders("application/octet-stream"),n))}catch(E){throw E instanceof e.HttpError&&E.statusCode===404?(0,e.newError)(`Cannot find ${t} in the latest release artifacts (${p}): ${E.stack||E.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):E}return g.assets=o.assets,g}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(n){return{accept:n,authorization:`token ${this.token}`}}async getLatestVersionInfo(n){const t=this.updater.allowPrerelease;let o=this.basePath;t||(o=`${o}/latest`);const a=(0,f.newUrlFromBase)(o,this.baseUrl);try{const p=JSON.parse(await this.httpRequest(a,this.configureHeaders("application/vnd.github.v3+json"),n));return t?p.find(g=>g.prerelease)||p[0]:p}catch(p){throw(0,e.newError)(`Unable to find latest version on GitHub (${a}), please ensure a production release exists: ${p.stack||p.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(n){return(0,s.getFileList)(n).map(t=>{const o=d.posix.basename(t.url).replace(/ /g,"-"),a=n.assets.find(p=>p!=null&&p.name===o);if(a==null)throw(0,e.newError)(`Cannot find asset "${o}" in: ${JSON.stringify(n.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new c.URL(a.url),info:t}})}};return Zt.PrivateGitHubProvider=h,Zt}var il;function Bf(){if(il)return Jt;il=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.isUrlProbablySupportMultiRangeRequests=s,Jt.createClient=h;const e=qe(),l=qf(),d=uu(),c=cu(),f=Mf(),u=$f();function s(i){return!i.includes("s3.amazonaws.com")}function h(i,n,t){if(typeof i=="string")throw(0,e.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const o=i.provider;switch(o){case"github":{const a=i,p=(a.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||a.token;return p==null?new c.GitHubProvider(a,n,t):new u.PrivateGitHubProvider(a,n,p,t)}case"bitbucket":return new l.BitbucketProvider(i,n,t);case"keygen":return new f.KeygenProvider(i,n,t);case"s3":case"spaces":return new d.GenericProvider({provider:"generic",url:(0,e.getS3LikeProviderBaseUrl)(i),channel:i.channel||null},n,{...t,isUseMultipleRangeRequest:!1});case"generic":{const a=i;return new d.GenericProvider(a,n,{...t,isUseMultipleRangeRequest:a.useMultipleRangeRequest!==!1&&s(a.url)})}case"custom":{const a=i,p=a.updateProvider;if(!p)throw(0,e.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new p(a,n,t)}default:throw(0,e.newError)(`Unsupported provider: ${o}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}return Jt}var er={},tr={},Lt={},xt={},al;function ha(){if(al)return xt;al=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.OperationKind=void 0,xt.computeOperations=l;var e;(function(s){s[s.COPY=0]="COPY",s[s.DOWNLOAD=1]="DOWNLOAD"})(e||(xt.OperationKind=e={}));function l(s,h,i){const n=u(s.files),t=u(h.files);let o=null;const a=h.files[0],p=[],g=a.name,E=n.get(g);if(E==null)throw new Error(`no file ${g} in old blockmap`);const m=t.get(g);let _=0;const{checksumToOffset:b,checksumToOldSize:O}=f(n.get(g),E.offset,i);let I=a.offset;for(let $=0;$<m.checksums.length;I+=m.sizes[$],$++){const R=m.sizes[$],A=m.checksums[$];let T=b.get(A);T!=null&&O.get(A)!==R&&(i.warn(`Checksum ("${A}") matches, but size differs (old: ${O.get(A)}, new: ${R})`),T=void 0),T===void 0?(_++,o!=null&&o.kind===e.DOWNLOAD&&o.end===I?o.end+=R:(o={kind:e.DOWNLOAD,start:I,end:I+R},c(o,p,A,$))):o!=null&&o.kind===e.COPY&&o.end===T?o.end+=R:(o={kind:e.COPY,start:T,end:T+R},c(o,p,A,$))}return _>0&&i.info(`File${a.name==="file"?"":" "+a.name} has ${_} changed blocks`),p}const d=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function c(s,h,i,n){if(d&&h.length!==0){const t=h[h.length-1];if(t.kind===s.kind&&s.start<t.end&&s.start>t.start){const o=[t.start,t.end,s.start,s.end].reduce((a,p)=>a<p?a:p);throw new Error(`operation (block index: ${n}, checksum: ${i}, kind: ${e[s.kind]}) overlaps previous operation (checksum: ${i}):
abs: ${t.start} until ${t.end} and ${s.start} until ${s.end}
rel: ${t.start-o} until ${t.end-o} and ${s.start-o} until ${s.end-o}`)}}h.push(s)}function f(s,h,i){const n=new Map,t=new Map;let o=h;for(let a=0;a<s.checksums.length;a++){const p=s.checksums[a],g=s.sizes[a],E=t.get(p);if(E===void 0)n.set(p,o),t.set(p,g);else if(i.debug!=null){const m=E===g?"(same size)":`(size: ${E}, this size: ${g})`;i.debug(`${p} duplicated in blockmap ${m}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}o+=g}return{checksumToOffset:n,checksumToOldSize:t}}function u(s){const h=new Map;for(const i of s)h.set(i.name,i);return h}return xt}var ol;function fu(){if(ol)return Lt;ol=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.DataSplitter=void 0,Lt.copyData=s;const e=qe(),l=ut,d=dr,c=ha(),f=Buffer.from(`\r
\r
`);var u;(function(i){i[i.INIT=0]="INIT",i[i.HEADER=1]="HEADER",i[i.BODY=2]="BODY"})(u||(u={}));function s(i,n,t,o,a){const p=(0,l.createReadStream)("",{fd:t,autoClose:!1,start:i.start,end:i.end-1});p.on("error",o),p.once("end",a),p.pipe(n,{end:!1})}let h=class extends d.Writable{constructor(n,t,o,a,p,g){super(),this.out=n,this.options=t,this.partIndexToTaskIndex=o,this.partIndexToLength=p,this.finishHandler=g,this.partIndex=-1,this.headerListBuffer=null,this.readState=u.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=a.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(n,t,o){if(this.isFinished){console.error(`Trailing ignored data: ${n.length} bytes`);return}this.handleData(n).then(o).catch(o)}async handleData(n){let t=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,e.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const o=Math.min(this.ignoreByteCount,n.length);this.ignoreByteCount-=o,t=o}else if(this.remainingPartDataCount>0){const o=Math.min(this.remainingPartDataCount,n.length);this.remainingPartDataCount-=o,await this.processPartData(n,0,o),t=o}if(t!==n.length){if(this.readState===u.HEADER){const o=this.searchHeaderListEnd(n,t);if(o===-1)return;t=o,this.readState=u.BODY,this.headerListBuffer=null}for(;;){if(this.readState===u.BODY)this.readState=u.INIT;else{this.partIndex++;let g=this.partIndexToTaskIndex.get(this.partIndex);if(g==null)if(this.isFinished)g=this.options.end;else throw(0,e.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const E=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(E<g)await this.copyExistingData(E,g);else if(E>g)throw(0,e.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(t=this.searchHeaderListEnd(n,t),t===-1){this.readState=u.HEADER;return}}const o=this.partIndexToLength[this.partIndex],a=t+o,p=Math.min(a,n.length);if(await this.processPartStarted(n,t,p),this.remainingPartDataCount=o-(p-t),this.remainingPartDataCount>0)return;if(t=a+this.boundaryLength,t>=n.length){this.ignoreByteCount=this.boundaryLength-(n.length-a);return}}}}copyExistingData(n,t){return new Promise((o,a)=>{const p=()=>{if(n===t){o();return}const g=this.options.tasks[n];if(g.kind!==c.OperationKind.COPY){a(new Error("Task kind must be COPY"));return}s(g,this.out,this.options.oldFileFd,a,()=>{n++,p()})};p()})}searchHeaderListEnd(n,t){const o=n.indexOf(f,t);if(o!==-1)return o+f.length;const a=t===0?n:n.slice(t);return this.headerListBuffer==null?this.headerListBuffer=a:this.headerListBuffer=Buffer.concat([this.headerListBuffer,a]),-1}onPartEnd(){const n=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==n)throw(0,e.newError)(`Expected length: ${n} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(n,t,o){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(n,t,o)}processPartData(n,t,o){this.actualPartLength+=o-t;const a=this.out;return a.write(t===0&&n.length===o?n:n.slice(t,o))?Promise.resolve():new Promise((p,g)=>{a.on("error",g),a.once("drain",()=>{a.removeListener("error",g),p()})})}};return Lt.DataSplitter=h,Lt}var rr={},sl;function Hf(){if(sl)return rr;sl=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.executeTasksUsingMultipleRangeRequests=c,rr.checkIsRangesSupported=u;const e=qe(),l=fu(),d=ha();function c(s,h,i,n,t){const o=a=>{if(a>=h.length){s.fileMetadataBuffer!=null&&i.write(s.fileMetadataBuffer),i.end();return}const p=a+1e3;f(s,{tasks:h,start:a,end:Math.min(h.length,p),oldFileFd:n},i,()=>o(p),t)};return o}function f(s,h,i,n,t){let o="bytes=",a=0;const p=new Map,g=[];for(let _=h.start;_<h.end;_++){const b=h.tasks[_];b.kind===d.OperationKind.DOWNLOAD&&(o+=`${b.start}-${b.end-1}, `,p.set(a,_),a++,g.push(b.end-b.start))}if(a<=1){const _=b=>{if(b>=h.end){n();return}const O=h.tasks[b++];if(O.kind===d.OperationKind.COPY)(0,l.copyData)(O,i,h.oldFileFd,t,()=>_(b));else{const I=s.createRequestOptions();I.headers.Range=`bytes=${O.start}-${O.end-1}`;const $=s.httpExecutor.createRequest(I,R=>{u(R,t)&&(R.pipe(i,{end:!1}),R.once("end",()=>_(b)))});s.httpExecutor.addErrorAndTimeoutHandlers($,t),$.end()}};_(h.start);return}const E=s.createRequestOptions();E.headers.Range=o.substring(0,o.length-2);const m=s.httpExecutor.createRequest(E,_=>{if(!u(_,t))return;const b=(0,e.safeGetHeader)(_,"content-type"),O=/^multipart\/.+?(?:; boundary=(?:(?:"(.+)")|(?:([^\s]+))))$/i.exec(b);if(O==null){t(new Error(`Content-Type "multipart/byteranges" is expected, but got "${b}"`));return}const I=new l.DataSplitter(i,h,p,O[1]||O[2],g,n);I.on("error",t),_.pipe(I),_.on("end",()=>{setTimeout(()=>{m.abort(),t(new Error("Response ends without calling any handlers"))},1e4)})});s.httpExecutor.addErrorAndTimeoutHandlers(m,t),m.end()}function u(s,h){if(s.statusCode>=400)return h((0,e.createHttpError)(s)),!1;if(s.statusCode!==206){const i=(0,e.safeGetHeader)(s,"accept-ranges");if(i==null||i==="none")return h(new Error(`Server doesn't support Accept-Ranges (response code ${s.statusCode})`)),!1}return!0}return rr}var nr={},ll;function jf(){if(ll)return nr;ll=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.ProgressDifferentialDownloadCallbackTransform=void 0;const e=dr;var l;(function(c){c[c.COPY=0]="COPY",c[c.DOWNLOAD=1]="DOWNLOAD"})(l||(l={}));let d=class extends e.Transform{constructor(f,u,s){super(),this.progressDifferentialDownloadInfo=f,this.cancellationToken=u,this.onProgress=s,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=l.COPY,this.nextUpdate=this.start+1e3}_transform(f,u,s){if(this.cancellationToken.cancelled){s(new Error("cancelled"),null);return}if(this.operationType==l.COPY){s(null,f);return}this.transferred+=f.length,this.delta+=f.length;const h=Date.now();h>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=h+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((h-this.start)/1e3))}),this.delta=0),s(null,f)}beginFileCopy(){this.operationType=l.COPY}beginRangeDownload(){this.operationType=l.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(f){if(this.cancellationToken.cancelled){f(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,f(null)}};return nr.ProgressDifferentialDownloadCallbackTransform=d,nr}var ul;function du(){if(ul)return tr;ul=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.DifferentialDownloader=void 0;const e=qe(),l=mt(),d=ut,c=fu(),f=Ut,u=ha(),s=Hf(),h=jf();let i=class{constructor(a,p,g){this.blockAwareFileInfo=a,this.httpExecutor=p,this.options=g,this.fileMetadataBuffer=null,this.logger=g.logger}createRequestOptions(){const a={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,e.configureRequestUrl)(this.options.newUrl,a),(0,e.configureRequestOptions)(a),a}doDownload(a,p){if(a.version!==p.version)throw new Error(`version is different (${a.version} - ${p.version}), full download is required`);const g=this.logger,E=(0,u.computeOperations)(a,p,g);g.debug!=null&&g.debug(JSON.stringify(E,null,2));let m=0,_=0;for(const O of E){const I=O.end-O.start;O.kind===u.OperationKind.DOWNLOAD?m+=I:_+=I}const b=this.blockAwareFileInfo.size;if(m+_+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==b)throw new Error(`Internal error, size mismatch: downloadSize: ${m}, copySize: ${_}, newSize: ${b}`);return g.info(`Full: ${n(b)}, To download: ${n(m)} (${Math.round(m/(b/100))}%)`),this.downloadFile(E)}downloadFile(a){const p=[],g=()=>Promise.all(p.map(E=>(0,l.close)(E.descriptor).catch(m=>{this.logger.error(`cannot close file "${E.path}": ${m}`)})));return this.doDownloadFile(a,p).then(g).catch(E=>g().catch(m=>{try{this.logger.error(`cannot close files: ${m}`)}catch(_){try{console.error(_)}catch{}}throw E}).then(()=>{throw E}))}async doDownloadFile(a,p){const g=await(0,l.open)(this.options.oldFile,"r");p.push({descriptor:g,path:this.options.oldFile});const E=await(0,l.open)(this.options.newFile,"w");p.push({descriptor:E,path:this.options.newFile});const m=(0,d.createWriteStream)(this.options.newFile,{fd:E});await new Promise((_,b)=>{const O=[];let I;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const x=[];let q=0;for(const P of a)P.kind===u.OperationKind.DOWNLOAD&&(x.push(P.end-P.start),q+=P.end-P.start);const N={expectedByteCounts:x,grandTotal:q};I=new h.ProgressDifferentialDownloadCallbackTransform(N,this.options.cancellationToken,this.options.onProgress),O.push(I)}const $=new e.DigestTransform(this.blockAwareFileInfo.sha512);$.isValidateOnEnd=!1,O.push($),m.on("finish",()=>{m.close(()=>{p.splice(1,1);try{$.validate()}catch(x){b(x);return}_(void 0)})}),O.push(m);let R=null;for(const x of O)x.on("error",b),R==null?R=x:R=R.pipe(x);const A=O[0];let T;if(this.options.isUseMultipleRangeRequest){T=(0,s.executeTasksUsingMultipleRangeRequests)(this,a,A,g,b),T(0);return}let y=0,M=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const U=this.createRequestOptions();U.redirect="manual",T=x=>{var q,N;if(x>=a.length){this.fileMetadataBuffer!=null&&A.write(this.fileMetadataBuffer),A.end();return}const P=a[x++];if(P.kind===u.OperationKind.COPY){I&&I.beginFileCopy(),(0,c.copyData)(P,A,g,b,()=>T(x));return}const F=`bytes=${P.start}-${P.end-1}`;U.headers.range=F,(N=(q=this.logger)===null||q===void 0?void 0:q.debug)===null||N===void 0||N.call(q,`download range: ${F}`),I&&I.beginRangeDownload();const k=this.httpExecutor.createRequest(U,K=>{K.on("error",b),K.on("aborted",()=>{b(new Error("response has been aborted by the server"))}),K.statusCode>=400&&b((0,e.createHttpError)(K)),K.pipe(A,{end:!1}),K.once("end",()=>{I&&I.endRangeDownload(),++y===100?(y=0,setTimeout(()=>T(x),1e3)):T(x)})});k.on("redirect",(K,W,ne)=>{this.logger.info(`Redirect to ${t(ne)}`),M=ne,(0,e.configureRequestUrl)(new f.URL(M),U),k.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(k,b),k.end()},T(0)})}async readRemoteBytes(a,p){const g=Buffer.allocUnsafe(p+1-a),E=this.createRequestOptions();E.headers.range=`bytes=${a}-${p}`;let m=0;if(await this.request(E,_=>{_.copy(g,m),m+=_.length}),m!==g.length)throw new Error(`Received data length ${m} is not equal to expected ${g.length}`);return g}request(a,p){return new Promise((g,E)=>{const m=this.httpExecutor.createRequest(a,_=>{(0,s.checkIsRangesSupported)(_,E)&&(_.on("error",E),_.on("aborted",()=>{E(new Error("response has been aborted by the server"))}),_.on("data",p),_.on("end",()=>g()))});this.httpExecutor.addErrorAndTimeoutHandlers(m,E),m.end()})}};tr.DifferentialDownloader=i;function n(o,a=" KB"){return new Intl.NumberFormat("en").format((o/1024).toFixed(2))+a}function t(o){const a=o.indexOf("?");return a<0?o:o.substring(0,a)}return tr}var cl;function Gf(){if(cl)return er;cl=1,Object.defineProperty(er,"__esModule",{value:!0}),er.GenericDifferentialDownloader=void 0;const e=du();let l=class extends e.DifferentialDownloader{download(c,f){return this.doDownload(c,f)}};return er.GenericDifferentialDownloader=l,er}var Ki={},fl;function It(){return fl||(fl=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.UpdaterSignal=e.UPDATE_DOWNLOADED=e.DOWNLOAD_PROGRESS=e.CancellationToken=void 0,e.addHandler=c;const l=qe();Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return l.CancellationToken}}),e.DOWNLOAD_PROGRESS="download-progress",e.UPDATE_DOWNLOADED="update-downloaded";class d{constructor(u){this.emitter=u}login(u){c(this.emitter,"login",u)}progress(u){c(this.emitter,e.DOWNLOAD_PROGRESS,u)}updateDownloaded(u){c(this.emitter,e.UPDATE_DOWNLOADED,u)}updateCancelled(u){c(this.emitter,"update-cancelled",u)}}e.UpdaterSignal=d;function c(f,u,s){f.on(u,s)}})(Ki)),Ki}var dl;function pa(){if(dl)return At;dl=1,Object.defineProperty(At,"__esModule",{value:!0}),At.NoOpLogger=At.AppUpdater=void 0;const e=qe(),l=pr,d=Hr,c=Ul,f=mt(),u=oa(),s=sf(),h=Ie,i=lu(),n=Ff(),t=xf(),o=Uf(),a=uu(),p=Bf(),g=kl,E=Ot(),m=Gf(),_=It();let b=class hu extends c.EventEmitter{get channel(){return this._channel}set channel(R){if(this._channel!=null){if(typeof R!="string")throw(0,e.newError)(`Channel must be a string, but got: ${R}`,"ERR_UPDATER_INVALID_CHANNEL");if(R.length===0)throw(0,e.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=R,this.allowDowngrade=!0}addAuthHeader(R){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:R})}get netSession(){return(0,o.getNetSession)()}get logger(){return this._logger}set logger(R){this._logger=R??new I}set updateConfigPath(R){this.clientPromise=null,this._appUpdateConfigPath=R,this.configOnDisk=new s.Lazy(()=>this.loadUpdateConfig())}get isUpdateSupported(){return this._isUpdateSupported}set isUpdateSupported(R){R&&(this._isUpdateSupported=R)}constructor(R,A){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new _.UpdaterSignal(this),this._appUpdateConfigPath=null,this._isUpdateSupported=M=>this.checkIfUpdateSupported(M),this.clientPromise=null,this.stagingUserIdPromise=new s.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new s.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",M=>{this._logger.error(`Error: ${M.stack||M.message}`)}),A==null?(this.app=new t.ElectronAppAdapter,this.httpExecutor=new o.ElectronHttpExecutor((M,U)=>this.emit("login",M,U))):(this.app=A,this.httpExecutor=null);const T=this.app.version,y=(0,i.parse)(T);if(y==null)throw(0,e.newError)(`App version is not a valid semver version: "${T}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=y,this.allowPrerelease=O(y),R!=null&&(this.setFeedURL(R),typeof R!="string"&&R.requestHeaders&&(this.requestHeaders=R.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(R){const A=this.createProviderRuntimeOptions();let T;typeof R=="string"?T=new a.GenericProvider({provider:"generic",url:R},this,{...A,isUseMultipleRangeRequest:(0,p.isUrlProbablySupportMultiRangeRequests)(R)}):T=(0,p.createClient)(R,this,A),this.clientPromise=Promise.resolve(T)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let R=this.checkForUpdatesPromise;if(R!=null)return this._logger.info("Checking for update (already in progress)"),R;const A=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),R=this.doCheckForUpdates().then(T=>(A(),T)).catch(T=>{throw A(),this.emit("error",T,`Cannot check for updates: ${(T.stack||T).toString()}`),T}),this.checkForUpdatesPromise=R,R}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(R){return this.checkForUpdates().then(A=>A?.downloadPromise?(A.downloadPromise.then(()=>{const T=hu.formatDownloadNotification(A.updateInfo.version,this.app.name,R);new Ae.Notification(T).show()}),A):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),A))}static formatDownloadNotification(R,A,T){return T==null&&(T={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),T={title:T.title.replace("{appName}",A).replace("{version}",R),body:T.body.replace("{appName}",A).replace("{version}",R)},T}async isStagingMatch(R){const A=R.stagingPercentage;let T=A;if(T==null)return!0;if(T=parseInt(T,10),isNaN(T))return this._logger.warn(`Staging percentage is NaN: ${A}`),!0;T=T/100;const y=await this.stagingUserIdPromise.value,U=e.UUID.parse(y).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${T}, percentage: ${U}, user id: ${y}`),U<T}computeFinalHeaders(R){return this.requestHeaders!=null&&Object.assign(R,this.requestHeaders),R}async isUpdateAvailable(R){const A=(0,i.parse)(R.version);if(A==null)throw(0,e.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${R.version}"`,"ERR_UPDATER_INVALID_VERSION");const T=this.currentVersion;if((0,i.eq)(A,T)||!await Promise.resolve(this.isUpdateSupported(R))||!await this.isStagingMatch(R))return!1;const M=(0,i.gt)(A,T),U=(0,i.lt)(A,T);return M?!0:this.allowDowngrade&&U}checkIfUpdateSupported(R){const A=R?.minimumSystemVersion,T=(0,d.release)();if(A)try{if((0,i.lt)(T,A))return this._logger.info(`Current OS version ${T} is less than the minimum OS version required ${A} for version ${T}`),!1}catch(y){this._logger.warn(`Failed to compare current OS version(${T}) with minimum OS version(${A}): ${(y.message||y).toString()}`)}return!0}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(T=>(0,p.createClient)(T,this,this.createProviderRuntimeOptions())));const R=await this.clientPromise,A=await this.stagingUserIdPromise.value;return R.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":A})),{info:await R.getLatestVersion(),provider:R}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const R=await this.getUpdateInfoAndProvider(),A=R.info;if(!await this.isUpdateAvailable(A))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${A.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",A),{isUpdateAvailable:!1,versionInfo:A,updateInfo:A};this.updateInfoAndProvider=R,this.onUpdateAvailable(A);const T=new e.CancellationToken;return{isUpdateAvailable:!0,versionInfo:A,updateInfo:A,cancellationToken:T,downloadPromise:this.autoDownload?this.downloadUpdate(T):null}}onUpdateAvailable(R){this._logger.info(`Found version ${R.version} (url: ${(0,e.asArray)(R.files).map(A=>A.url).join(", ")})`),this.emit("update-available",R)}downloadUpdate(R=new e.CancellationToken){const A=this.updateInfoAndProvider;if(A==null){const y=new Error("Please check update first");return this.dispatchError(y),Promise.reject(y)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,e.asArray)(A.info.files).map(y=>y.url).join(", ")}`);const T=y=>{if(!(y instanceof e.CancellationError))try{this.dispatchError(y)}catch(M){this._logger.warn(`Cannot dispatch error event: ${M.stack||M}`)}return y};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:A,requestHeaders:this.computeRequestHeaders(A.provider),cancellationToken:R,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(y=>{throw T(y)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(R){this.emit("error",R,(R.stack||R).toString())}dispatchUpdateDownloaded(R){this.emit(_.UPDATE_DOWNLOADED,R)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,u.load)(await(0,f.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(R){const A=R.fileExtraDownloadHeaders;if(A!=null){const T=this.requestHeaders;return T==null?A:{...A,...T}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const R=h.join(this.app.userDataPath,".updaterId");try{const T=await(0,f.readFile)(R,"utf-8");if(e.UUID.check(T))return T;this._logger.warn(`Staging user id file exists, but content was invalid: ${T}`)}catch(T){T.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${T}`)}const A=e.UUID.v5((0,l.randomBytes)(4096),e.UUID.OID);this._logger.info(`Generated new staging user ID: ${A}`);try{await(0,f.outputFile)(R,A)}catch(T){this._logger.warn(`Couldn't write out staging user ID: ${T}`)}return A}get isAddNoCacheQuery(){const R=this.requestHeaders;if(R==null)return!0;for(const A of Object.keys(R)){const T=A.toLowerCase();if(T==="authorization"||T==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let R=this.downloadedUpdateHelper;if(R==null){const A=(await this.configOnDisk.value).updaterCacheDirName,T=this._logger;A==null&&T.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const y=h.join(this.app.baseCachePath,A||this.app.name);T.debug!=null&&T.debug(`updater cache dir: ${y}`),R=new n.DownloadedUpdateHelper(y),this.downloadedUpdateHelper=R}return R}async executeDownload(R){const A=R.fileInfo,T={headers:R.downloadUpdateOptions.requestHeaders,cancellationToken:R.downloadUpdateOptions.cancellationToken,sha2:A.info.sha2,sha512:A.info.sha512};this.listenerCount(_.DOWNLOAD_PROGRESS)>0&&(T.onProgress=ie=>this.emit(_.DOWNLOAD_PROGRESS,ie));const y=R.downloadUpdateOptions.updateInfoAndProvider.info,M=y.version,U=A.packageInfo;function x(){const ie=decodeURIComponent(R.fileInfo.url.pathname);return ie.endsWith(`.${R.fileExtension}`)?h.basename(ie):R.fileInfo.info.url}const q=await this.getOrCreateDownloadHelper(),N=q.cacheDirForPendingUpdate;await(0,f.mkdir)(N,{recursive:!0});const P=x();let F=h.join(N,P);const k=U==null?null:h.join(N,`package-${M}${h.extname(U.path)||".7z"}`),K=async ie=>(await q.setDownloadedFile(F,k,y,A,P,ie),await R.done({...y,downloadedFile:F}),k==null?[F]:[F,k]),W=this._logger,ne=await q.validateDownloadedPath(F,y,A,W);if(ne!=null)return F=ne,await K(!1);const ce=async()=>(await q.clear().catch(()=>{}),await(0,f.unlink)(F).catch(()=>{})),ue=await(0,n.createTempUpdateFile)(`temp-${P}`,N,W);try{await R.task(ue,T,k,ce),await(0,e.retry)(()=>(0,f.rename)(ue,F),60,500,0,0,ie=>ie instanceof Error&&/^EBUSY:/.test(ie.message))}catch(ie){throw await ce(),ie instanceof e.CancellationError&&(W.info("cancelled"),this.emit("update-cancelled",y)),ie}return W.info(`New version ${M} has been downloaded to ${F}`),await K(!0)}async differentialDownloadInstaller(R,A,T,y,M){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const U=(0,E.blockmapFiles)(R.url,this.app.version,A.updateInfoAndProvider.info.version);this._logger.info(`Download block maps (old: "${U[0]}", new: ${U[1]})`);const x=async P=>{const F=await this.httpExecutor.downloadToBuffer(P,{headers:A.requestHeaders,cancellationToken:A.cancellationToken});if(F==null||F.length===0)throw new Error(`Blockmap "${P.href}" is empty`);try{return JSON.parse((0,g.gunzipSync)(F).toString())}catch(k){throw new Error(`Cannot parse blockmap "${P.href}", error: ${k}`)}},q={newUrl:R.url,oldFile:h.join(this.downloadedUpdateHelper.cacheDir,M),logger:this._logger,newFile:T,isUseMultipleRangeRequest:y.isUseMultipleRangeRequest,requestHeaders:A.requestHeaders,cancellationToken:A.cancellationToken};this.listenerCount(_.DOWNLOAD_PROGRESS)>0&&(q.onProgress=P=>this.emit(_.DOWNLOAD_PROGRESS,P));const N=await Promise.all(U.map(P=>x(P)));return await new m.GenericDifferentialDownloader(R.info,this.httpExecutor,q).download(N[0],N[1]),!1}catch(U){if(this._logger.error(`Cannot download differentially, fallback to full download: ${U.stack||U}`),this._testOnlyOptions!=null)throw U;return!0}}};At.AppUpdater=b;function O($){const R=(0,i.prerelease)($);return R!=null&&R.length>0}class I{info(R){}warn(R){}error(R){}}return At.NoOpLogger=I,At}var hl;function $t(){if(hl)return jt;hl=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.BaseUpdater=void 0;const e=hr,l=pa();let d=class extends l.AppUpdater{constructor(f,u){super(f,u),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(f=!1,u=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(f,f?u:this.autoRunAppAfterInstall)?setImmediate(()=>{Ae.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(f){return super.executeDownload({...f,done:u=>(this.dispatchUpdateDownloaded(u),this.addQuitHandler(),Promise.resolve())})}get installerPath(){return this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.file}install(f=!1,u=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const s=this.downloadedUpdateHelper,h=this.installerPath,i=s==null?null:s.downloadedFileInfo;if(h==null||i==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${f}, isForceRunAfter: ${u}`),this.doInstall({isSilent:f,isForceRunAfter:u,isAdminRightsRequired:i.isAdminRightsRequired})}catch(n){return this.dispatchError(n),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(f=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(f!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${f}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}wrapSudo(){const{name:f}=this.app,u=`"${f} would like to update"`,s=this.spawnSyncLog("which gksudo || which kdesudo || which pkexec || which beesu"),h=[s];return/kdesudo/i.test(s)?(h.push("--comment",u),h.push("-c")):/gksudo/i.test(s)?h.push("--message",u):/pkexec/i.test(s)&&h.push("--disable-internal-agent"),h.join(" ")}spawnSyncLog(f,u=[],s={}){this._logger.info(`Executing: ${f} with args: ${u}`);const h=(0,e.spawnSync)(f,u,{env:{...process.env,...s},encoding:"utf-8",shell:!0}),{error:i,status:n,stdout:t,stderr:o}=h;if(i!=null)throw this._logger.error(o),i;if(n!=null&&n!==0)throw this._logger.error(o),new Error(`Command ${f} exited with code ${n}`);return t.trim()}async spawnLog(f,u=[],s=void 0,h="ignore"){return this._logger.info(`Executing: ${f} with args: ${u}`),new Promise((i,n)=>{try{const t={stdio:h,env:s,detached:!0},o=(0,e.spawn)(f,u,t);o.on("error",a=>{n(a)}),o.unref(),o.pid!==void 0&&i(!0)}catch(t){n(t)}})}};return jt.BaseUpdater=d,jt}var ir={},ar={},pl;function pu(){if(pl)return ar;pl=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const e=mt(),l=du(),d=kl;let c=class extends l.DifferentialDownloader{async download(){const h=this.blockAwareFileInfo,i=h.size,n=i-(h.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(n,i-1);const t=f(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await u(this.options.oldFile),t)}};ar.FileWithEmbeddedBlockMapDifferentialDownloader=c;function f(s){return JSON.parse((0,d.inflateRawSync)(s).toString())}async function u(s){const h=await(0,e.open)(s,"r");try{const i=(await(0,e.fstat)(h)).size,n=Buffer.allocUnsafe(4);await(0,e.read)(h,n,0,n.length,i-n.length);const t=Buffer.allocUnsafe(n.readUInt32BE(0));return await(0,e.read)(h,t,0,t.length,i-n.length-t.length),await(0,e.close)(h),f(t)}catch(i){throw await(0,e.close)(h),i}}return ar}var ml;function gl(){if(ml)return ir;ml=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.AppImageUpdater=void 0;const e=qe(),l=hr,d=mt(),c=ut,f=Ie,u=$t(),s=pu(),h=Qe(),i=It();let n=class extends u.BaseUpdater{constructor(o,a){super(o,a)}isUpdaterActive(){return process.env.APPIMAGE==null?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(o){const a=o.updateInfoAndProvider.provider,p=(0,h.findFile)(a.resolveFiles(o.updateInfoAndProvider.info),"AppImage",["rpm","deb","pacman"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:p,downloadUpdateOptions:o,task:async(g,E)=>{const m=process.env.APPIMAGE;if(m==null)throw(0,e.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(o.disableDifferentialDownload||await this.downloadDifferential(p,m,g,a,o))&&await this.httpExecutor.download(p.url,g,E),await(0,d.chmod)(g,493)}})}async downloadDifferential(o,a,p,g,E){try{const m={newUrl:o.url,oldFile:a,logger:this._logger,newFile:p,isUseMultipleRangeRequest:g.isUseMultipleRangeRequest,requestHeaders:E.requestHeaders,cancellationToken:E.cancellationToken};return this.listenerCount(i.DOWNLOAD_PROGRESS)>0&&(m.onProgress=_=>this.emit(i.DOWNLOAD_PROGRESS,_)),await new s.FileWithEmbeddedBlockMapDifferentialDownloader(o.info,this.httpExecutor,m).download(),!1}catch(m){return this._logger.error(`Cannot download differentially, fallback to full download: ${m.stack||m}`),process.platform==="linux"}}doInstall(o){const a=process.env.APPIMAGE;if(a==null)throw(0,e.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,c.unlinkSync)(a);let p;const g=f.basename(a),E=this.installerPath;if(E==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;f.basename(E)===g||!/\d+\.\d+\.\d+/.test(g)?p=a:p=f.join(f.dirname(a),f.basename(E)),(0,l.execFileSync)("mv",["-f",E,p]),p!==a&&this.emit("appimage-filename-updated",p);const m={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return o.isForceRunAfter?this.spawnLog(p,[],m):(m.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,l.execFileSync)(p,[],{env:m})),!0}};return ir.AppImageUpdater=n,ir}var or={},vl;function El(){if(vl)return or;vl=1,Object.defineProperty(or,"__esModule",{value:!0}),or.DebUpdater=void 0;const e=$t(),l=Qe(),d=It();let c=class extends e.BaseUpdater{constructor(u,s){super(u,s)}doDownloadUpdate(u){const s=u.updateInfoAndProvider.provider,h=(0,l.findFile)(s.resolveFiles(u.updateInfoAndProvider.info),"deb",["AppImage","rpm","pacman"]);return this.executeDownload({fileExtension:"deb",fileInfo:h,downloadUpdateOptions:u,task:async(i,n)=>{this.listenerCount(d.DOWNLOAD_PROGRESS)>0&&(n.onProgress=t=>this.emit(d.DOWNLOAD_PROGRESS,t)),await this.httpExecutor.download(h.url,i,n)}})}get installerPath(){var u,s;return(s=(u=super.installerPath)===null||u===void 0?void 0:u.replace(/ /g,"\\ "))!==null&&s!==void 0?s:null}doInstall(u){const s=this.wrapSudo(),h=/pkexec/i.test(s)?"":'"',i=this.installerPath;if(i==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const n=["dpkg","-i",i,"||","apt-get","install","-f","-y"];return this.spawnSyncLog(s,[`${h}/bin/bash`,"-c",`'${n.join(" ")}'${h}`]),u.isForceRunAfter&&this.app.relaunch(),!0}};return or.DebUpdater=c,or}var sr={},yl;function wl(){if(yl)return sr;yl=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.PacmanUpdater=void 0;const e=$t(),l=It(),d=Qe();let c=class extends e.BaseUpdater{constructor(u,s){super(u,s)}doDownloadUpdate(u){const s=u.updateInfoAndProvider.provider,h=(0,d.findFile)(s.resolveFiles(u.updateInfoAndProvider.info),"pacman",["AppImage","deb","rpm"]);return this.executeDownload({fileExtension:"pacman",fileInfo:h,downloadUpdateOptions:u,task:async(i,n)=>{this.listenerCount(l.DOWNLOAD_PROGRESS)>0&&(n.onProgress=t=>this.emit(l.DOWNLOAD_PROGRESS,t)),await this.httpExecutor.download(h.url,i,n)}})}get installerPath(){var u,s;return(s=(u=super.installerPath)===null||u===void 0?void 0:u.replace(/ /g,"\\ "))!==null&&s!==void 0?s:null}doInstall(u){const s=this.wrapSudo(),h=/pkexec/i.test(s)?"":'"',i=this.installerPath;if(i==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const n=["pacman","-U","--noconfirm",i];return this.spawnSyncLog(s,[`${h}/bin/bash`,"-c",`'${n.join(" ")}'${h}`]),u.isForceRunAfter&&this.app.relaunch(),!0}};return sr.PacmanUpdater=c,sr}var lr={},_l;function Sl(){if(_l)return lr;_l=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.RpmUpdater=void 0;const e=$t(),l=It(),d=Qe();let c=class extends e.BaseUpdater{constructor(u,s){super(u,s)}doDownloadUpdate(u){const s=u.updateInfoAndProvider.provider,h=(0,d.findFile)(s.resolveFiles(u.updateInfoAndProvider.info),"rpm",["AppImage","deb","pacman"]);return this.executeDownload({fileExtension:"rpm",fileInfo:h,downloadUpdateOptions:u,task:async(i,n)=>{this.listenerCount(l.DOWNLOAD_PROGRESS)>0&&(n.onProgress=t=>this.emit(l.DOWNLOAD_PROGRESS,t)),await this.httpExecutor.download(h.url,i,n)}})}get installerPath(){var u,s;return(s=(u=super.installerPath)===null||u===void 0?void 0:u.replace(/ /g,"\\ "))!==null&&s!==void 0?s:null}doInstall(u){const s=this.wrapSudo(),h=/pkexec/i.test(s)?"":'"',i=this.spawnSyncLog("which zypper"),n=this.installerPath;if(n==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;let t;return i?t=[i,"--no-refresh","install","--allow-unsigned-rpm","-y","-f",n]:t=[this.spawnSyncLog("which dnf || which yum"),"-y","install",n],this.spawnSyncLog(s,[`${h}/bin/bash`,"-c",`'${t.join(" ")}'${h}`]),u.isForceRunAfter&&this.app.relaunch(),!0}};return lr.RpmUpdater=c,lr}var ur={},Al;function Tl(){if(Al)return ur;Al=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.MacUpdater=void 0;const e=qe(),l=mt(),d=ut,c=Ie,f=hc,u=pa(),s=Qe(),h=hr,i=pr;let n=class extends u.AppUpdater{constructor(o,a){super(o,a),this.nativeUpdater=Ae.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",p=>{this._logger.warn(p),this.emit("error",p)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(o){this._logger.debug!=null&&this._logger.debug(o)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(o=>{o&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(o){let a=o.updateInfoAndProvider.provider.resolveFiles(o.updateInfoAndProvider.info);const p=this._logger,g="sysctl.proc_translated";let E=!1;try{this.debug("Checking for macOS Rosetta environment"),E=(0,h.execFileSync)("sysctl",[g],{encoding:"utf8"}).includes(`${g}: 1`),p.info(`Checked for macOS Rosetta environment (isRosetta=${E})`)}catch($){p.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${$}`)}let m=!1;try{this.debug("Checking for arm64 in uname");const R=(0,h.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");p.info(`Checked 'uname -a': arm64=${R}`),m=m||R}catch($){p.warn(`uname shell command to check for arm64 failed: ${$}`)}m=m||process.arch==="arm64"||E;const _=$=>{var R;return $.url.pathname.includes("arm64")||((R=$.info.url)===null||R===void 0?void 0:R.includes("arm64"))};m&&a.some(_)?a=a.filter($=>m===_($)):a=a.filter($=>!_($));const b=(0,s.findFile)(a,"zip",["pkg","dmg"]);if(b==null)throw(0,e.newError)(`ZIP file not provided: ${(0,e.safeStringifyJson)(a)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const O=o.updateInfoAndProvider.provider,I="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:b,downloadUpdateOptions:o,task:async($,R)=>{const A=c.join(this.downloadedUpdateHelper.cacheDir,I),T=()=>(0,l.pathExistsSync)(A)?!o.disableDifferentialDownload:(p.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let y=!0;T()&&(y=await this.differentialDownloadInstaller(b,o,$,O,I)),y&&await this.httpExecutor.download(b.url,$,R)},done:async $=>{if(!o.disableDifferentialDownload)try{const R=c.join(this.downloadedUpdateHelper.cacheDir,I);await(0,l.copyFile)($.downloadedFile,R)}catch(R){this._logger.warn(`Unable to copy file for caching for future differential downloads: ${R.message}`)}return this.updateDownloaded(b,$)}})}async updateDownloaded(o,a){var p;const g=a.downloadedFile,E=(p=o.info.size)!==null&&p!==void 0?p:(await(0,l.stat)(g)).size,m=this._logger,_=`fileToProxy=${o.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${_})`),this.server=(0,f.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${_})`),this.server.on("close",()=>{m.info(`Proxy server for native Squirrel.Mac is closed (${_})`)});const b=O=>{const I=O.address();return typeof I=="string"?I:`http://127.0.0.1:${I?.port}`};return await new Promise((O,I)=>{const $=(0,i.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),R=Buffer.from(`autoupdater:${$}`,"ascii"),A=`/${(0,i.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(T,y)=>{const M=T.url;if(m.info(`${M} requested`),M==="/"){if(!T.headers.authorization||T.headers.authorization.indexOf("Basic ")===-1){y.statusCode=401,y.statusMessage="Invalid Authentication Credentials",y.end(),m.warn("No authenthication info");return}const q=T.headers.authorization.split(" ")[1],N=Buffer.from(q,"base64").toString("ascii"),[P,F]=N.split(":");if(P!=="autoupdater"||F!==$){y.statusCode=401,y.statusMessage="Invalid Authentication Credentials",y.end(),m.warn("Invalid authenthication credentials");return}const k=Buffer.from(`{ "url": "${b(this.server)}${A}" }`);y.writeHead(200,{"Content-Type":"application/json","Content-Length":k.length}),y.end(k);return}if(!M.startsWith(A)){m.warn(`${M} requested, but not supported`),y.writeHead(404),y.end();return}m.info(`${A} requested by Squirrel.Mac, pipe ${g}`);let U=!1;y.on("finish",()=>{U||(this.nativeUpdater.removeListener("error",I),O([]))});const x=(0,d.createReadStream)(g);x.on("error",q=>{try{y.end()}catch(N){m.warn(`cannot end response: ${N}`)}U=!0,this.nativeUpdater.removeListener("error",I),I(new Error(`Cannot pipe "${g}": ${q}`))}),y.writeHead(200,{"Content-Type":"application/zip","Content-Length":E}),x.pipe(y)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${_})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${b(this.server)}, ${_})`),this.nativeUpdater.setFeedURL({url:b(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${R.toString("base64")}`}}),this.dispatchUpdateDownloaded(a),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",I),this.nativeUpdater.checkForUpdates()):O([])})})}handleUpdateDownloaded(){this.autoRunAppAfterInstall?this.nativeUpdater.quitAndInstall():this.app.quit(),this.closeServerIfExists()}quitAndInstall(){this.squirrelDownloadedUpdate?this.handleUpdateDownloaded():(this.nativeUpdater.on("update-downloaded",()=>this.handleUpdateDownloaded()),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};return ur.MacUpdater=n,ur}var cr={},Ur={},bl;function Wf(){if(bl)return Ur;bl=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.verifySignature=f;const e=qe(),l=hr,d=Hr,c=Ie;function f(i,n,t){return new Promise((o,a)=>{const p=n.replace(/'/g,"''");t.info(`Verifying signature ${p}`),(0,l.execFile)('set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",`"Get-AuthenticodeSignature -LiteralPath '${p}' | ConvertTo-Json -Compress"`],{shell:!0,timeout:20*1e3},(g,E,m)=>{var _;try{if(g!=null||m){s(t,g,m,a),o(null);return}const b=u(E);if(b.Status===0){try{const R=c.normalize(b.Path),A=c.normalize(n);if(t.info(`LiteralPath: ${R}. Update Path: ${A}`),R!==A){s(t,new Error(`LiteralPath of ${R} is different than ${A}`),m,a),o(null);return}}catch(R){t.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(_=R.message)!==null&&_!==void 0?_:R.stack}`)}const I=(0,e.parseDn)(b.SignerCertificate.Subject);let $=!1;for(const R of i){const A=(0,e.parseDn)(R);if(A.size?$=Array.from(A.keys()).every(y=>A.get(y)===I.get(y)):R===I.get("CN")&&(t.warn(`Signature validated using only CN ${R}. Please add your full Distinguished Name (DN) to publisherNames configuration`),$=!0),$){o(null);return}}}const O=`publisherNames: ${i.join(" | ")}, raw info: `+JSON.stringify(b,(I,$)=>I==="RawData"?void 0:$,2);t.warn(`Sign verification failed, installer signed with incorrect certificate: ${O}`),o(O)}catch(b){s(t,b,null,a),o(null);return}})})}function u(i){const n=JSON.parse(i);delete n.PrivateKey,delete n.IsOSBinary,delete n.SignatureType;const t=n.SignerCertificate;return t!=null&&(delete t.Archived,delete t.Extensions,delete t.Handle,delete t.HasPrivateKey,delete t.SubjectName),n}function s(i,n,t,o){if(h()){i.warn(`Cannot execute Get-AuthenticodeSignature: ${n||t}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,l.execFileSync)("powershell.exe",["-NoProfile","-NonInteractive","-Command","ConvertTo-Json test"],{timeout:10*1e3})}catch(a){i.warn(`Cannot execute ConvertTo-Json: ${a.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}n!=null&&o(n),t&&o(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${t}. Failing signature validation due to unknown stderr.`))}function h(){const i=d.release();return i.startsWith("6.")&&!i.startsWith("6.3")}return Ur}var Rl;function Cl(){if(Rl)return cr;Rl=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.NsisUpdater=void 0;const e=qe(),l=Ie,d=$t(),c=pu(),f=It(),u=Qe(),s=mt(),h=Wf(),i=Ut;let n=class extends d.BaseUpdater{constructor(o,a){super(o,a),this._verifyUpdateCodeSignature=(p,g)=>(0,h.verifySignature)(p,g,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(o){o&&(this._verifyUpdateCodeSignature=o)}doDownloadUpdate(o){const a=o.updateInfoAndProvider.provider,p=(0,u.findFile)(a.resolveFiles(o.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:o,fileInfo:p,task:async(g,E,m,_)=>{const b=p.packageInfo,O=b!=null&&m!=null;if(O&&o.disableWebInstaller)throw(0,e.newError)(`Unable to download new version ${o.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!O&&!o.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(O||o.disableDifferentialDownload||await this.differentialDownloadInstaller(p,o,g,a,e.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(p.url,g,E);const I=await this.verifySignature(g);if(I!=null)throw await _(),(0,e.newError)(`New version ${o.updateInfoAndProvider.info.version} is not signed by the application owner: ${I}`,"ERR_UPDATER_INVALID_SIGNATURE");if(O&&await this.differentialDownloadWebPackage(o,b,m,a))try{await this.httpExecutor.download(new i.URL(b.path),m,{headers:o.requestHeaders,cancellationToken:o.cancellationToken,sha512:b.sha512})}catch($){try{await(0,s.unlink)(m)}catch{}throw $}}})}async verifySignature(o){let a;try{if(a=(await this.configOnDisk.value).publisherName,a==null)return null}catch(p){if(p.code==="ENOENT")return null;throw p}return await this._verifyUpdateCodeSignature(Array.isArray(a)?a:[a],o)}doInstall(o){const a=this.installerPath;if(a==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const p=["--updated"];o.isSilent&&p.push("/S"),o.isForceRunAfter&&p.push("--force-run"),this.installDirectory&&p.push(`/D=${this.installDirectory}`);const g=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;g!=null&&p.push(`--package-file=${g}`);const E=()=>{this.spawnLog(l.join(process.resourcesPath,"elevate.exe"),[a].concat(p)).catch(m=>this.dispatchError(m))};return o.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),E(),!0):(this.spawnLog(a,p).catch(m=>{const _=m.code;this._logger.info(`Cannot run installer: error code: ${_}, error message: "${m.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),_==="UNKNOWN"||_==="EACCES"?E():_==="ENOENT"?Ae.shell.openPath(a).catch(b=>this.dispatchError(b)):this.dispatchError(m)}),!0)}async differentialDownloadWebPackage(o,a,p,g){if(a.blockMapSize==null)return!0;try{const E={newUrl:new i.URL(a.path),oldFile:l.join(this.downloadedUpdateHelper.cacheDir,e.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:p,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:g.isUseMultipleRangeRequest,cancellationToken:o.cancellationToken};this.listenerCount(f.DOWNLOAD_PROGRESS)>0&&(E.onProgress=m=>this.emit(f.DOWNLOAD_PROGRESS,m)),await new c.FileWithEmbeddedBlockMapDifferentialDownloader(a,this.httpExecutor,E).download()}catch(E){return this._logger.error(`Cannot download differentially, fallback to full download: ${E.stack||E}`),process.platform==="win32"}return!1}};return cr.NsisUpdater=n,cr}var Ol;function Yf(){return Ol||(Ol=1,(function(e){var l=St&&St.__createBinding||(Object.create?(function(m,_,b,O){O===void 0&&(O=b);var I=Object.getOwnPropertyDescriptor(_,b);(!I||("get"in I?!_.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return _[b]}}),Object.defineProperty(m,O,I)}):(function(m,_,b,O){O===void 0&&(O=b),m[O]=_[b]})),d=St&&St.__exportStar||function(m,_){for(var b in m)b!=="default"&&!Object.prototype.hasOwnProperty.call(_,b)&&l(_,m,b)};Object.defineProperty(e,"__esModule",{value:!0}),e.NsisUpdater=e.MacUpdater=e.RpmUpdater=e.PacmanUpdater=e.DebUpdater=e.AppImageUpdater=e.Provider=e.NoOpLogger=e.AppUpdater=e.BaseUpdater=void 0;const c=mt(),f=Ie;var u=$t();Object.defineProperty(e,"BaseUpdater",{enumerable:!0,get:function(){return u.BaseUpdater}});var s=pa();Object.defineProperty(e,"AppUpdater",{enumerable:!0,get:function(){return s.AppUpdater}}),Object.defineProperty(e,"NoOpLogger",{enumerable:!0,get:function(){return s.NoOpLogger}});var h=Qe();Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return h.Provider}});var i=gl();Object.defineProperty(e,"AppImageUpdater",{enumerable:!0,get:function(){return i.AppImageUpdater}});var n=El();Object.defineProperty(e,"DebUpdater",{enumerable:!0,get:function(){return n.DebUpdater}});var t=wl();Object.defineProperty(e,"PacmanUpdater",{enumerable:!0,get:function(){return t.PacmanUpdater}});var o=Sl();Object.defineProperty(e,"RpmUpdater",{enumerable:!0,get:function(){return o.RpmUpdater}});var a=Tl();Object.defineProperty(e,"MacUpdater",{enumerable:!0,get:function(){return a.MacUpdater}});var p=Cl();Object.defineProperty(e,"NsisUpdater",{enumerable:!0,get:function(){return p.NsisUpdater}}),d(It(),e);let g;function E(){if(process.platform==="win32")g=new(Cl()).NsisUpdater;else if(process.platform==="darwin")g=new(Tl()).MacUpdater;else{g=new(gl()).AppImageUpdater;try{const m=f.join(process.resourcesPath,"package-type");if(!(0,c.existsSync)(m))return g;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const _=(0,c.readFileSync)(m).toString().trim();switch(console.info("Found package-type:",_),_){case"deb":g=new(El()).DebUpdater;break;case"rpm":g=new(Sl()).RpmUpdater;break;case"pacman":g=new(wl()).PacmanUpdater;break;default:break}}catch(m){console.warn("Unable to detect 'package-type' for autoUpdater (beta rpm/deb support). If you'd like to expand support, please consider contributing to electron-builder",m.message)}}return g}Object.defineProperty(e,"autoUpdater",{enumerable:!0,get:()=>g||E()})})(St)),St}var Je=Yf(),kr={exports:{}},qr={exports:{}},Mr={exports:{}},Qi,Il;function Vf(){if(Il)return Qi;Il=1;var e=1e3,l=e*60,d=l*60,c=d*24,f=c*365.25;Qi=function(n,t){t=t||{};var o=typeof n;if(o==="string"&&n.length>0)return u(n);if(o==="number"&&isNaN(n)===!1)return t.long?h(n):s(n);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))};function u(n){if(n=String(n),!(n.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(n);if(t){var o=parseFloat(t[1]),a=(t[2]||"ms").toLowerCase();switch(a){case"years":case"year":case"yrs":case"yr":case"y":return o*f;case"days":case"day":case"d":return o*c;case"hours":case"hour":case"hrs":case"hr":case"h":return o*d;case"minutes":case"minute":case"mins":case"min":case"m":return o*l;case"seconds":case"second":case"secs":case"sec":case"s":return o*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function s(n){return n>=c?Math.round(n/c)+"d":n>=d?Math.round(n/d)+"h":n>=l?Math.round(n/l)+"m":n>=e?Math.round(n/e)+"s":n+"ms"}function h(n){return i(n,c,"day")||i(n,d,"hour")||i(n,l,"minute")||i(n,e,"second")||n+" ms"}function i(n,t,o){if(!(n<t))return n<t*1.5?Math.floor(n/t)+" "+o:Math.ceil(n/t)+" "+o+"s"}return Qi}var Dl;function mu(){return Dl||(Dl=1,(function(e,l){l=e.exports=f.debug=f.default=f,l.coerce=i,l.disable=s,l.enable=u,l.enabled=h,l.humanize=Vf(),l.names=[],l.skips=[],l.formatters={};var d;function c(n){var t=0,o;for(o in n)t=(t<<5)-t+n.charCodeAt(o),t|=0;return l.colors[Math.abs(t)%l.colors.length]}function f(n){function t(){if(t.enabled){var o=t,a=+new Date,p=a-(d||a);o.diff=p,o.prev=d,o.curr=a,d=a;for(var g=new Array(arguments.length),E=0;E<g.length;E++)g[E]=arguments[E];g[0]=l.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");var m=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,function(b,O){if(b==="%%")return b;m++;var I=l.formatters[O];if(typeof I=="function"){var $=g[m];b=I.call(o,$),g.splice(m,1),m--}return b}),l.formatArgs.call(o,g);var _=t.log||l.log||console.log.bind(console);_.apply(o,g)}}return t.namespace=n,t.enabled=l.enabled(n),t.useColors=l.useColors(),t.color=c(n),typeof l.init=="function"&&l.init(t),t}function u(n){l.save(n),l.names=[],l.skips=[];for(var t=(typeof n=="string"?n:"").split(/[\s,]+/),o=t.length,a=0;a<o;a++)t[a]&&(n=t[a].replace(/\*/g,".*?"),n[0]==="-"?l.skips.push(new RegExp("^"+n.substr(1)+"$")):l.names.push(new RegExp("^"+n+"$")))}function s(){l.enable("")}function h(n){var t,o;for(t=0,o=l.skips.length;t<o;t++)if(l.skips[t].test(n))return!1;for(t=0,o=l.names.length;t<o;t++)if(l.names[t].test(n))return!0;return!1}function i(n){return n instanceof Error?n.stack||n.message:n}})(Mr,Mr.exports)),Mr.exports}var Pl;function zf(){return Pl||(Pl=1,(function(e,l){l=e.exports=mu(),l.log=f,l.formatArgs=c,l.save=u,l.load=s,l.useColors=d,l.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:h(),l.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function d(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}l.formatters.j=function(i){try{return JSON.stringify(i)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}};function c(i){var n=this.useColors;if(i[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+i[0]+(n?"%c ":" ")+"+"+l.humanize(this.diff),!!n){var t="color: "+this.color;i.splice(1,0,t,"color: inherit");var o=0,a=0;i[0].replace(/%[a-zA-Z%]/g,function(p){p!=="%%"&&(o++,p==="%c"&&(a=o))}),i.splice(a,0,t)}}function f(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function u(i){try{i==null?l.storage.removeItem("debug"):l.storage.debug=i}catch{}}function s(){var i;try{i=l.storage.debug}catch{}return!i&&typeof process<"u"&&"env"in process&&(i=process.env.DEBUG),i}l.enable(s());function h(){try{return window.localStorage}catch{}}})(qr,qr.exports)),qr.exports}var $r={exports:{}},Nl;function Xf(){return Nl||(Nl=1,(function(e,l){var d=ea,c=Br;l=e.exports=mu(),l.init=a,l.log=i,l.formatArgs=h,l.save=n,l.load=t,l.useColors=s,l.colors=[6,2,3,4,5,1],l.inspectOpts=Object.keys(process.env).filter(function(p){return/^debug_/i.test(p)}).reduce(function(p,g){var E=g.substring(6).toLowerCase().replace(/_([a-z])/g,function(_,b){return b.toUpperCase()}),m=process.env[g];return/^(yes|on|true|enabled)$/i.test(m)?m=!0:/^(no|off|false|disabled)$/i.test(m)?m=!1:m==="null"?m=null:m=Number(m),p[E]=m,p},{});var f=parseInt(process.env.DEBUG_FD,10)||2;f!==1&&f!==2&&c.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var u=f===1?process.stdout:f===2?process.stderr:o(f);function s(){return"colors"in l.inspectOpts?!!l.inspectOpts.colors:d.isatty(f)}l.formatters.o=function(p){return this.inspectOpts.colors=this.useColors,c.inspect(p,this.inspectOpts).split(`
`).map(function(g){return g.trim()}).join(" ")},l.formatters.O=function(p){return this.inspectOpts.colors=this.useColors,c.inspect(p,this.inspectOpts)};function h(p){var g=this.namespace,E=this.useColors;if(E){var m=this.color,_="  \x1B[3"+m+";1m"+g+" \x1B[0m";p[0]=_+p[0].split(`
`).join(`
`+_),p.push("\x1B[3"+m+"m+"+l.humanize(this.diff)+"\x1B[0m")}else p[0]=new Date().toUTCString()+" "+g+" "+p[0]}function i(){return u.write(c.format.apply(c,arguments)+`
`)}function n(p){p==null?delete process.env.DEBUG:process.env.DEBUG=p}function t(){return process.env.DEBUG}function o(p){var g,E=process.binding("tty_wrap");switch(E.guessHandleType(p)){case"TTY":g=new d.WriteStream(p),g._type="tty",g._handle&&g._handle.unref&&g._handle.unref();break;case"FILE":var m=ut;g=new m.SyncWriteStream(p,{autoClose:!1}),g._type="fs";break;case"PIPE":case"TCP":var _=pc;g=new _.Socket({fd:p,readable:!1,writable:!0}),g.readable=!1,g.read=null,g._type="pipe",g._handle&&g._handle.unref&&g._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return g.fd=p,g._isStdio=!0,g}function a(p){p.inspectOpts={};for(var g=Object.keys(l.inspectOpts),E=0;E<g.length;E++)p.inspectOpts[g[E]]=l.inspectOpts[g[E]]}l.enable(t())})($r,$r.exports)),$r.exports}var Fl;function Jf(){return Fl||(Fl=1,typeof process<"u"&&process.type==="renderer"?kr.exports=zf():kr.exports=Xf()),kr.exports}var Zi,Ll;function Kf(){if(Ll)return Zi;Ll=1;var e=Ie,l=hr.spawn,d=Jf()("electron-squirrel-startup"),c=Ae.app,f=function(s,h){var i=e.resolve(e.dirname(process.execPath),"..","Update.exe");d("Spawning `%s` with args `%s`",i,s),l(i,s,{detached:!0}).on("close",h)},u=function(){if(process.platform==="win32"){var s=process.argv[1];d("processing squirrel command `%s`",s);var h=e.basename(process.execPath);if(s==="--squirrel-install"||s==="--squirrel-updated")return f(["--createShortcut="+h],c.quit),!0;if(s==="--squirrel-uninstall")return f(["--removeShortcut="+h],c.quit),!0;if(s==="--squirrel-obsolete")return c.quit(),!0}return!1};return Zi=u(),Zi}var Qf=Kf();const Zf=yc(Qf);Zf&&Ae.app.quit();Je.autoUpdater.autoDownload=!1;Je.autoUpdater.autoInstallOnAppQuit=!0;Je.autoUpdater.logger=console;Je.autoUpdater.on("checking-for-update",()=>{console.log("[AutoUpdater] Checking for updates...")});Je.autoUpdater.on("update-available",e=>{console.log("[AutoUpdater] Update available:",e.version),Ae.dialog.showMessageBox({type:"info",title:"Update Available",message:`A new version (${e.version}) is available. Would you like to download it now?`,buttons:["Download","Later"]}).then(l=>{l.response===0&&Je.autoUpdater.downloadUpdate()})});Je.autoUpdater.on("update-not-available",()=>{console.log("[AutoUpdater] No updates available.")});Je.autoUpdater.on("download-progress",e=>{console.log(`[AutoUpdater] Download progress: ${Math.round(e.percent)}%`)});Je.autoUpdater.on("update-downloaded",()=>{console.log("[AutoUpdater] Update downloaded."),Ae.dialog.showMessageBox({type:"info",title:"Update Ready",message:"Update downloaded. The app will restart to install the update.",buttons:["Restart Now","Later"]}).then(e=>{e.response===0&&Je.autoUpdater.quitAndInstall()})});Je.autoUpdater.on("error",e=>{console.error("[AutoUpdater] Error:",e)});const gu=()=>{const e=new Ae.BrowserWindow({height:700,width:1e3,backgroundColor:"#171717",frame:!1,titleBarStyle:"hidden",webPreferences:{preload:Ra.join(__dirname,"preload.js"),nodeIntegration:!1,contextIsolation:!0}});e.loadFile(Ra.join(__dirname,"../renderer/main_window/index.html")),process.env.NODE_ENV==="development"&&e.webContents.openDevTools(),Ae.ipcMain.handle("window-minimize",()=>{e.minimize()}),Ae.ipcMain.handle("window-maximize",()=>{e.isMaximized()?e.unmaximize():e.maximize()}),Ae.ipcMain.handle("window-close",()=>{e.close()}),Ae.ipcMain.handle("window-is-maximized",()=>e.isMaximized())};Ae.ipcMain.handle("db-get-all-workspaces",()=>Ke.getAllWorkspaces());Ae.ipcMain.handle("db-get-workspace",(e,l)=>Ke.getWorkspace(l));Ae.ipcMain.handle("db-create-workspace",(e,l)=>(Ke.createWorkspace(l),{success:!0}));Ae.ipcMain.handle("db-update-workspace",(e,l,d)=>(Ke.updateWorkspace(l,d),{success:!0}));Ae.ipcMain.handle("db-delete-workspace",(e,l)=>(Ke.deleteWorkspace(l),{success:!0}));Ae.ipcMain.handle("db-get-notes-for-workspace",(e,l)=>Ke.getNotesForWorkspace(l));Ae.ipcMain.handle("db-create-note",(e,l)=>(Ke.createNote(l),{success:!0}));Ae.ipcMain.handle("db-update-note",(e,l,d)=>(Ke.updateNote(l,d),{success:!0}));Ae.ipcMain.handle("db-delete-note",(e,l)=>(Ke.deleteNote(l),{success:!0}));Ae.app.on("ready",()=>{Ke.initialize(),gu(),setTimeout(()=>{Je.autoUpdater.checkForUpdates()},3e3)});Ae.app.on("window-all-closed",()=>{process.platform!=="darwin"&&(Ke.close(),Ae.app.quit())});Ae.app.on("activate",()=>{Ae.BrowserWindow.getAllWindows().length===0&&gu()});Ae.app.on("before-quit",()=>{Ke.close()});
